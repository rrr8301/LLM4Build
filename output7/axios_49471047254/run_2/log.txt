
> axios@1.11.0 build
> gulp clear && cross-env NODE_ENV=production rollup -c -m

[GITHUB_TOKEN is not defined]
[15:00:56] Using gulpfile /app/gulpfile.js
[15:00:56] Starting 'clear'...
[15:00:56] Finished 'clear' after 2.84 ms
[36m
[1m./index.js[22m â†’ [1mdist/esm/axios.js[22m...[39m
[32mcreated [1mdist/esm/axios.js[22m in [1m304ms[22m[39m
[36m
[1m./index.js[22m â†’ [1mdist/esm/axios.min.js[22m...[39m
Created bundle axios.min.js: 36.11 kB â†’ 14.11 kB (gzip)
[32mcreated [1mdist/esm/axios.min.js[22m in [1m1.2s[22m[39m
[36m
[1m./lib/axios.js[22m â†’ [1mdist/axios.js[22m...[39m
[32mcreated [1mdist/axios.js[22m in [1m1.5s[22m[39m
[36m
[1m./lib/axios.js[22m â†’ [1mdist/axios.min.js[22m...[39m
Created bundle axios.min.js: 54.9 kB â†’ 19.16 kB (gzip)
[32mcreated [1mdist/axios.min.js[22m in [1m2s[22m[39m
[36m
[1m./lib/axios.js[22m â†’ [1mdist/browser/axios.cjs[22m...[39m
[32mcreated [1mdist/browser/axios.cjs[22m in [1m168ms[22m[39m
[36m
[1m./lib/axios.js[22m â†’ [1mdist/node/axios.cjs[22m...[39m
[32mcreated [1mdist/node/axios.cjs[22m in [1m193ms[22m[39m

> axios@1.11.0 test
> npm run test:eslint && npm run test:mocha && npm run test:karma && npm run test:dtslint && npm run test:exports


> axios@1.11.0 test:eslint
> node bin/ssl_hotfix.js eslint lib/**/*.js

Running eslint lib/adapters/adapters.js lib/adapters/fetch.js lib/adapters/http.js lib/adapters/xhr.js lib/cancel/CancelToken.js lib/cancel/CanceledError.js lib/cancel/isCancel.js lib/core/Axios.js lib/core/AxiosError.js lib/core/AxiosHeaders.js lib/core/InterceptorManager.js lib/core/buildFullPath.js lib/core/dispatchRequest.js lib/core/mergeConfig.js lib/core/settle.js lib/core/transformData.js lib/defaults/index.js lib/defaults/transitional.js lib/env/data.js lib/helpers/AxiosTransformStream.js lib/helpers/AxiosURLSearchParams.js lib/helpers/HttpStatusCode.js lib/helpers/ZlibHeaderTransformStream.js lib/helpers/bind.js lib/helpers/buildURL.js lib/helpers/callbackify.js lib/helpers/combineURLs.js lib/helpers/composeSignals.js lib/helpers/cookies.js lib/helpers/deprecatedMethod.js lib/helpers/formDataToJSON.js lib/helpers/formDataToStream.js lib/helpers/fromDataURI.js lib/helpers/isAbsoluteURL.js lib/helpers/isAxiosError.js lib/helpers/isURLSameOrigin.js lib/helpers/null.js lib/helpers/parseHeaders.js lib/helpers/parseProtocol.js lib/helpers/progressEventReducer.js lib/helpers/readBlob.js lib/helpers/resolveConfig.js lib/helpers/speedometer.js lib/helpers/spread.js lib/helpers/throttle.js lib/helpers/toFormData.js lib/helpers/toURLEncodedForm.js lib/helpers/trackStream.js lib/helpers/validator.js lib/platform/index.js on v20.19.5

Setting --openssl-legacy-provider as ssl hotfix

> axios@1.11.0 test:mocha
> node bin/ssl_hotfix.js mocha test/unit/**/*.js --timeout 30000 --exit

Running mocha test/unit/adapters/adapters.js test/unit/adapters/error-details.spec.js test/unit/adapters/fetch.js test/unit/adapters/http.js test/unit/core/Axios.js test/unit/core/AxiosHeaders.js test/unit/defaults/transformReponse.js test/unit/helpers/composeSignals.js test/unit/helpers/fromDataURI.js test/unit/helpers/parseProtocol.js test/unit/platform/index.js test/unit/regression/SNYK-JS-AXIOS-1038255.js test/unit/regression/SNYK-JS-AXIOS-7361793.js test/unit/regression/bugs.js test/unit/utils/utils.js --timeout 30000 --exit on v20.19.5

Setting --openssl-legacy-provider as ssl hotfix


  adapters
    âœ” should support loading by fn handle
    âœ” should support loading by name
    âœ” should detect adapter unavailable status
    âœ” should detect adapter unsupported status
    âœ” should pick suitable adapter from the list

  adapters â€“ network-error details
    âœ” should expose ECONNREFUSED and set error.cause on connection refusal
    âœ” should expose self-signed TLS error and set error.cause

  supports fetch with nodejs
    âœ” should support basic auth
    âœ” should support stream.Readable as a payload
    âœ” should support a timeout (505ms)
    âœ” should combine baseURL and url
    âœ” should support params
    âœ” should handle fetch failed error as an AxiosError with ERR_NETWORK code (135ms)
    âœ” should get response headers
    responses
      âœ” should support text response type
      âœ” should support arraybuffer response type
      âœ” should support blob response type
      âœ” should support stream response type
      âœ” should support formData response type
      âœ” should support json response type
    progress
      upload
Upload Progress 4 from 40 bytes (10.0%)
Upload Progress 8 from 40 bytes (20.0%)
Upload Progress 12 from 40 bytes (30.0%)
Upload Progress 16 from 40 bytes (40.0%)
Upload Progress 20 from 40 bytes (50.0%)
Upload Progress 24 from 40 bytes (60.0%)
Upload Progress 28 from 40 bytes (70.0%)
Upload Progress 32 from 40 bytes (80.0%)
Upload Progress 36 from 40 bytes (90.0%)
Upload Progress 40 from 40 bytes (100.0%)
        âœ” should support upload progress capturing (11512ms)
        âœ” should not fail with get method
      download
Download Progress 4 from 40 bytes (10.0%)
Download Progress 8 from 40 bytes (20.0%)
Download Progress 12 from 40 bytes (30.0%)
Download Progress 16 from 40 bytes (40.0%)
Download Progress 20 from 40 bytes (50.0%)
Download Progress 24 from 40 bytes (60.0%)
Download Progress 28 from 40 bytes (70.0%)
Download Progress 32 from 40 bytes (80.0%)
Download Progress 36 from 40 bytes (90.0%)
Download Progress 40 from 40 bytes (100.0%)
        âœ” should support download progress capturing (11512ms)
    request aborting
      âœ” should be able to abort the request stream (506ms)
HTTP server error: Error: aborted
    at abortIncoming (node:_http_server:796:17)
    at socketOnClose (node:_http_server:790:3)
    at Socket.emit (node:events:536:35)
    at TCP.<anonymous> (node:net:343:12) {
  code: 'ECONNRESET',
  bufferedData: 'chunkchunkchunkchunk'
}
      âœ” should be able to abort the response stream (803ms)
    fetch adapter - Content-Type handling
      âœ” should set correct Content-Type for FormData automatically
    env config
      âœ” should respect env fetch API configuration
      âœ” should be able to request with lack of Request object
      âœ” should be able to handle response with lack of Response object
      âœ” should fallback to the global on undefined env value

  supports http with nodejs
    âœ” should support IPv4 literal strings
    1) should support IPv6 literal strings
    âœ” should throw an error if the timeout property is not parsable as a number (302ms)
    âœ” should parse the timeout property (302ms)
    âœ” should respect the timeout property (302ms)
    âœ” should respect the timeoutErrorMessage property (302ms)
    âœ” should allow passing JSON
    âœ” should allow passing JSON with BOM
    âœ” should redirect
    âœ” should not redirect
    âœ” should support max redirects
    âœ” should support beforeRedirect
    âœ” should support beforeRedirect and proxy with redirect
    âœ” should wrap HTTP errors and keep stack
    âœ” should wrap interceptor errors and keep stack
    âœ” should preserve the HTTP verb on redirect
    âœ” should support UTF8
    âœ” should support basic auth
    âœ” should support basic auth with a header
    âœ” should provides a default User-Agent header
    âœ” should allow the User-Agent header to be overridden
    âœ” should allow the Content-Length header to be overridden
    âœ” should support max content length
    âœ” should support max content length for redirected (104ms)
    âœ” should support max body length (108ms)
    âœ” should properly support default max body length (follow-redirects as well) (632ms)
    âœ” should display error while parsing params
    âœ” should support sockets
    âœ” should support buffers
    âœ” should support HTTP proxies
    âœ” should support HTTPS proxies
    âœ” should not pass through disabled proxy
    âœ” should support proxy set via env var
    âœ” should support HTTPS proxy set via env var
    âœ” should re-evaluate proxy on redirect when proxy set via env var
    âœ” should not use proxy for domains in no_proxy
    âœ” should use proxy for domains not in no_proxy
    âœ” should support HTTP proxy auth
    âœ” should support proxy auth from env
    âœ” should support proxy auth with header
    âœ” should support cancel
    âœ” should combine baseURL and url
    âœ” should support HTTP protocol (1004ms)
    âœ” should support HTTPS protocol (93ms)
    âœ” should return malformed URL (301ms)
    âœ” should return unsupported protocol (302ms)
    âœ” should supply a user-agent if one is not specified
    âœ” should omit a user-agent if one is explicitly disclaimed
    âœ” should throw an error if http server that aborts a chunked request (205ms)
    âœ” should able to cancel multiple requests with CancelToken
    âœ” should respect formSerializer config
    âœ” should properly handle synchronous errors inside the adapter
    âœ” should support function as paramsSerializer value
    compression
      âœ” should support transparent gunzip
      âœ” should support gunzip error handling
      âœ” should support disabling automatic decompression of response data
      algorithms
        gzip decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (gzip)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
        GZIP decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (GZIP)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
        compress decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (compress)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
        deflate decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (deflate)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
        deflate-raw decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (deflate)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
        br decompression
          âœ” should support decompression
          âœ” should not fail if response content-length header is missing (br)
          âœ” should not fail with chunked responses (without Content-Length header)
          âœ” should not fail with an empty response without content-length header (Z_BUF_ERROR)
          âœ” should not fail with an empty response with content-length header (Z_BUF_ERROR)
    streams
      âœ” should support streams
      âœ” should pass errors for a failed stream
pipeline error: CanceledError: Request stream has been aborted
      âœ” should destroy the response stream with an error on request stream destroying (1009ms)
Server warning: Premature close
    different options for direct proxy configuration (without env variables)
      âœ” hostname and trailing colon in protocol
      âœ” hostname and no trailing colon in protocol
      âœ” both hostname and host -> hostname takes precedence
      âœ” only host and https protocol
    FormData
      form-data instance (https://www.npmjs.com/package/form-data)
        âœ” should allow passing FormData
      SpecCompliant FormData
        âœ” should allow passing FormData
      toFormData helper
        âœ” should properly serialize nested objects for parsing with multer.js (express.js)
    Blob
      âœ” should support Blob
    URLEncoded Form
      âœ” should post object data as url-encoded form if content-type is application/x-www-form-urlencoded
    Data URL
      âœ” should support requesting data URL as a Buffer
      âœ” should support requesting data URL as a Blob (if supported by the environment)
      âœ” should support requesting data URL as a String (text)
      âœ” should support requesting data URL as a Stream
    progress
      upload
onUploadProgress 4 / 40
onUploadProgress 8 / 40
onUploadProgress 12 / 40
onUploadProgress 16 / 40
onUploadProgress 20 / 40
onUploadProgress 24 / 40
onUploadProgress 28 / 40
onUploadProgress 32 / 40
onUploadProgress 36 / 40
onUploadProgress 40 / 40
        âœ” should support upload progress capturing (11011ms)
      download
onDownloadProgress 4 / 40
onDownloadProgress 8 / 40
onDownloadProgress 12 / 40
onDownloadProgress 16 / 40
onDownloadProgress 20 / 40
onDownloadProgress 24 / 40
onDownloadProgress 28 / 40
onDownloadProgress 32 / 40
onDownloadProgress 36 / 40
onDownloadProgress 40 / 40
        âœ” should support download progress capturing (11014ms)
    Rate limit
      âœ” should support upload rate limit (9523ms)
      âœ” should support download rate limit (9517ms)
    request aborting
pipeline error: CanceledError: canceled
      âœ” should be able to abort the response stream (612ms)
Server warning: Premature close
    DNS
      âœ” should support a custom DNS lookup function
      âœ” should support a custom DNS lookup function with address entry passing
      âœ” should support a custom DNS lookup function (async)
      âœ” should support a custom DNS lookup function with address entry (async)
      âœ” should support a custom DNS lookup function that returns only IP address (async)
      âœ” should handle errors
    JSON
      âœ” should support reviver on JSON.parse

  Axios
    âœ” should not throw if the config argument is omitted
    handle un-writable error stack
      âœ” should support errors with a defined but un-writable stack
      âœ” should support errors with an undefined and un-writable stack
      âœ” should support errors with a custom getter/setter for the stack property
      âœ” should support errors with a custom getter/setter for the stack property (null case)

  AxiosHeaders
    âœ” should support headers argument
    âœ” should support uppercase name mapping for names overlapped by class methods
    âœ” should be caseless
    set
      âœ” should support adding a single header
      âœ” should support adding multiple headers
      âœ” should support adding multiple headers from raw headers string
      âœ” should not rewrite header the header if the value is false
      âœ” should not rewrite the header if its value is false, unless rewrite options is set to true
      âœ” should support iterables as a key-value source object
      âœ” should support setting multiple header values from an iterable source
    get
      filter
        âœ” should support RegExp
        âœ” should support function
    has
      âœ” should return true if the header is defined, otherwise false
      filter
        âœ” should support RegExp
        âœ” should support function
        âœ” should support string pattern
    delete
      âœ” should delete the header
      âœ” should return true if the header has been deleted, otherwise false
      âœ” should support headers array
      filter
        âœ” should support RegExp
        âœ” should support function
        âœ” should support string pattern
    clear
      âœ” should clear all headers
      âœ” should clear matching headers if a matcher was specified
    toJSON
      âœ” should return headers object with original headers case
    accessors
      âœ” should support get accessor
      âœ” should support set accessor
      âœ” should support has accessor
    normalize()
      âœ” should support auto-formatting
      âœ” should support external defined values
      âœ” should support array values
    AxiosHeaders.concat
      âœ” should concatenate plain headers into an AxiosHeader instance
      âœ” should concatenate raw headers into an AxiosHeader instance
      âœ” should concatenate Axios headers into a new AxiosHeader instance
    toString
      âœ” should serialize AxiosHeader instance to a raw headers string
    getSetCookie
      âœ” should return set-cookie
      âœ” should return empty set-cookie

  transformResponse
    200 request
      âœ” parses json
      âœ” ignores XML
    204 request
      âœ” does not parse the empty string
      âœ” does not parse undefined

  helpers::composeSignals
    âœ” should abort when any of the signals abort
    âœ” should abort on timeout (100ms)
    âœ” should return undefined if signals and timeout are not provided

  helpers::fromDataURI
    âœ” should return buffer from data uri

  helpers::parseProtocol
    âœ” should parse protocol part if it exists

  generateString
    âœ” should generate a string of the specified length using the default alphabet
    âœ” should generate a string using only characters from the default alphabet

  Server-Side Request Forgery (SSRF)
    âœ” obeys proxy settings when following redirects

  Server-Side Request Forgery (SSRF)
    âœ” should not fetch in server-side mode
    should fetch in client-side mode
      âœ” should fetch in client-side mode

  issues
    4999
      âœ” should not fail with query parsing (312ms)
    5028
      âœ” should handle set-cookie headers as an array

  utils
    âœ” should validate Stream
    âœ” should validate Buffer
    utils::isFormData
      âœ” should detect the FormData instance provided by the `form-data` package
      âœ” should not call toString method on built-in objects instances
      âœ” should not call toString method on built-in objects instances, even if append method exists
      âœ” should detect custom FormData instances by toStringTag signature and append method presence
    toJSON
      âœ” should convert to a plain object without circular references
      âœ” should use objects with defined toJSON method without rebuilding
    Buffer RangeError Fix
      âœ” should handle large Buffer in isEmptyObject without RangeError
      âœ” should handle large Buffer in forEach without RangeError
      âœ” should handle large Buffer in findKey without RangeError


  212 passing (1m)
  1 failing

  1) supports http with nodejs
       should support IPv6 literal strings:
     Error: connect EADDRNOTAVAIL ::1:4444 - Local (:::0)
      at AxiosError.from (file:///app/lib/core/AxiosError.js:96:14)
      at RedirectableRequest.handleRequestError (file:///app/lib/adapters/http.js:620:25)
      at RedirectableRequest.emit (node:events:524:28)
      at eventHandlers.<computed> (node_modules/follow-redirects/index.js:38:24)
      at ClientRequest.emit (node:events:524:28)
      at emitErrorEvent (node:_http_client:101:11)
      at Socket.socketErrorListener (node:_http_client:504:5)
      at Socket.emit (node:events:524:28)
      at emitErrorNT (node:internal/streams/destroy:169:8)
      at emitErrorCloseNT (node:internal/streams/destroy:128:3)
      at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
      at Axios.request (file:///app/lib/core/Axios.js:45:41)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)



