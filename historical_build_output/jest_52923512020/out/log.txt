‚û§ YN0000: ¬∑ Yarn 4.10.3
‚û§ YN0000: ‚îå Resolution step
‚û§ YN0000: ‚îî Completed in 0s 517ms
‚û§ YN0000: ‚îå Post-resolution validation
‚û§ YN0060: ‚îÇ @babel/core is listed by your project with version 7.28.4 (pf247de), which doesn't satisfy what @babel/preset-react and other dependencies request (but they have non-overlapping ranges!).
‚û§ YN0060: ‚îÇ react is listed by your project with version 18.3.1 (p4a9fd3), which doesn't satisfy what react-native and other dependencies request (but they have non-overlapping ranges!).
‚û§ YN0002: ‚îÇ @jest/diff-sequences@workspace:packages/diff-sequences doesn't provide @jest/globals (p03fd70), requested by @fast-check/jest.
‚û§ YN0002: ‚îÇ babel-preset-jest@workspace:packages/babel-preset-jest doesn't provide @babel/core (pa5adb7), requested by babel-preset-current-node-syntax.
‚û§ YN0002: ‚îÇ create-jest@workspace:packages/create-jest doesn't provide @types/node (p9c2ade), requested by jest-config.
‚û§ YN0002: ‚îÇ example-react-testing-library@workspace:examples/react-testing-library doesn't provide @testing-library/dom (p31adb2), requested by @testing-library/react.
‚û§ YN0002: ‚îÇ example-snapshot@workspace:examples/snapshot doesn't provide react-dom (p491d75), requested by @testing-library/react.
‚û§ YN0002: ‚îÇ expect@workspace:packages/expect doesn't provide @jest/globals (p9fb730), requested by @fast-check/jest.
‚û§ YN0002: ‚îÇ jest-cli@workspace:packages/jest-cli [023ef] doesn't provide @types/node (pdec1f7), requested by jest-config.
‚û§ YN0002: ‚îÇ jest-cli@workspace:packages/jest-cli [e9642] doesn't provide @types/node (p725258), requested by jest-config.
‚û§ YN0002: ‚îÇ jest-cli@workspace:packages/jest-cli doesn't provide @types/node (pdd7483), requested by jest-config.
‚û§ YN0002: ‚îÇ jest-config@workspace:packages/jest-config doesn't provide @types/node (p4a73ba), requested by ts-node.
‚û§ YN0002: ‚îÇ jest-website@workspace:website doesn't provide @mdx-js/react (p1a83d4), requested by @docusaurus/core.
‚û§ YN0086: ‚îÇ Some peer dependencies are incorrectly met by your project; run yarn explain peer-requirements <hash> for details, where <hash> is the six-letter p-prefixed code.
‚û§ YN0086: ‚îÇ Some peer dependencies are incorrectly met by dependencies; run yarn explain peer-requirements for details.
‚û§ YN0068: ‚îÇ @react-native/metro-babel-transformer ‚û§ peerDependencies ‚û§ @babel/preset-env: No matching package in the dependency tree; you may not need this rule anymore.
‚û§ YN0000: ‚îî Completed
‚û§ YN0000: ‚îå Fetch step
‚û§ YN0000: ‚îî Completed in 0s 561ms
‚û§ YN0000: ‚îå Link step
‚û§ YN0000: ‚îî Completed in 0s 829ms
‚û§ YN0000: ¬∑ Done with warnings in 2s 874ms
 Bundling packages
 DONE
GLOBALS_CLEANUP=off
PASS packages/jest-environment-node/src/__tests__/node_environment.test.ts
  ‚óè Console

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:24:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:25:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:31:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:43:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:55:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'off'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:76:17)

PASS packages/jest-environment-node/src/__tests__/globals_cleanup_2.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_1.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_3.test.ts

Test Suites: 4 passed, 4 total
Tests:       13 passed, 13 total
Snapshots:   0 total
Time:        1.568 s
Ran all test suites matching packages/jest-environment-node/src/__tests__.
GLOBALS_CLEANUP=soft
PASS packages/jest-environment-node/src/__tests__/node_environment.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_1.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_2.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_3.test.ts

Test Suites: 4 passed, 4 total
Tests:       13 passed, 13 total
Snapshots:   0 total
Time:        1.361 s
Ran all test suites matching packages/jest-environment-node/src/__tests__.
GLOBALS_CLEANUP=on
PASS packages/jest-environment-node/src/__tests__/node_environment.test.ts
  ‚óè Console

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:24:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:25:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:31:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:43:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:55:18)

    console.warn
      [jest-util] garbage collection deletion mode already initialized, ignoring new mode
        Current: 'on'
        Given: 'soft'

      428 |   const currentMode = Reflect.get(globalObject, DELETION_MODE_SYMBOL);
      429 |   if (currentMode && currentMode !== deletionMode) {
    > 430 |     console.warn(_chalk().default.yellow(['[jest-util] garbage collection deletion mode already initialized, ignoring new mode', `  Current: '${currentMode}'`, `  Given: '${deletionMode}'`].join('\n')));
          |             ^
      431 |     return;
      432 |   }
      433 |   Reflect.set(globalObject, DELETION_MODE_SYMBOL, deletionMode);

      at warn (packages/jest-util/build/index.js:430:13)
      at new NodeEnvironment (packages/jest-environment-node/src/index.ts:98:37)
      at Object.<anonymous> (packages/jest-environment-node/src/__tests__/node_environment.test.ts:76:17)

PASS packages/jest-environment-node/src/__tests__/globals_cleanup_1.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_2.test.ts
PASS packages/jest-environment-node/src/__tests__/globals_cleanup_3.test.ts

Test Suites: 4 passed, 4 total
Tests:       13 passed, 13 total
Snapshots:   0 total
Time:        1.401 s
Ran all test suites matching packages/jest-environment-node/src/__tests__.
...........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'soft'[39m
[33m  Given: 'on'[39m
................[SKIP] Does not work on jest-circus
...[SKIP] Does not work on jest-circus
...[SKIP] Does not work on jest-circus
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
....Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
............[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
....................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.......
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
......
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
....
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.737 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

.....
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
....
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
......


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m ([0m[1m[41m7.964 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m9.263 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m11.426 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.737 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m ([0m[1m[41m13.225 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m15.402 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 6 snapshots failed[39m[22m from 4 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m5 failed[39m[22m, [1m[32m116 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m7 failed[39m[22m, [1m[33m8 skipped[39m[22m, [1m[32m1226 passed[39m[22m, 1241 total
[1mSnapshots:   [22m[1m[31m6 failed[39m[22m, [1m[32m284 passed[39m[22m, 290 total
[1mTime:[22m        43.548 s
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (1/3)
...............................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.......[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..[SKIP] Does not work on jest-circus
......[SKIP] Does not work on jest-circus
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
..[SKIP] Does not work on jest-circus
..........Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
...........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
....
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
.......
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.517 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

.
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
..
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
........


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m5.104 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m6.716 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.517 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m6.701 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m ([0m[1m[41m7.367 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 6 snapshots failed[39m[22m from 4 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m5 failed[39m[22m, [1m[32m116 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m7 failed[39m[22m, [1m[33m8 skipped[39m[22m, [1m[32m1226 passed[39m[22m, 1241 total
[1mSnapshots:   [22m[1m[31m6 failed[39m[22m, [1m[32m284 passed[39m[22m, 290 total
[1mTime:[22m        37.585 s, estimated 42 s
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (2/3)
.......................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.[SKIP] Does not work on jest-circus
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..[SKIP] Does not work on jest-circus
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..[SKIP] Does not work on jest-circus
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.................
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
..........Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
.............[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
......
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.529 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

...
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.......


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m5.01 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m6.593 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m6.638 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.529 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m ([0m[1m[41m7.44 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       13 |   [7mexpect(getTruthy()).toBeTruthy()[27m;[49m[39m
    [36m[107m+       1[7m4[27m3 |   [7m      } = event[27m;[49m[39m
    [35m[103m-       14 |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       14[7m4[27m |    [7m     if (currentlyRunningTest)[27m {[49m[39m
    [35m[103m-     [7m [27m[7m    |   ^[27m[49m[39m
    [35m[103m- [7m [27m     [7m16 |[27m     [7mexpect(getTruthy()).toBe('This test should not have run')[27m;[49m[39m
    [36m[107m+     [7m> 145 |[27m     [7m [27m     [7mcurrentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+ [7m      146 |           break[27m;[49m[39m
    [35m[103m-       17 |   [7m});[27m[49m[39m
    [36m[107m+       1[7m4[27m7 |   [7m      } else if (hasStarted) {[27m[49m[39m
    [35m[103m-       18 | [7m}[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 | [7m          state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       14 |     [7mexpect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m- [7m [27m     15 |[49m[39m
    [35m[103m-     [7m> 16 |     test('inner test', () => {[27m[49m[39m
    [35m[103m-          |     ^[49m[39m
    [35m[103m-       17 |       expect(getTruthy()).toBeTruthy();[49m[39m
    [36m[107m+       14[7m3[27m |     [7m    } = event;[27m[49m[39m
    [36m[107m+       144 |         if (currentlyRunningTest) {[49m[39m
    [36m[107m+     [7m>[27m 1[7m4[27m5 |    [7m       currentlyRunningTest.errors.push(new Error(`Tests cannot be nested. Test "${name}" cannot run because it is nested within "${currentlyRunningTest.name}".`));[27m[49m[39m
    [36m[107m+           |                                            ^[49m[39m
    [36m[107m+       146 |           break;[49m[39m
    [36m[107m+       147 |         } else if (hasStarted) {[49m[39m
    [35m[103m-       18 |     [7m});[27m[49m[39m
    [35m[103m- [7m      19 |   }[27m);[49m[39m
    [36m[107m+       1[7m4[27m8 |     [7m      state.unhandledErrors.push(new Error('Cannot add a test after tests have started running. Tests must be defined synchronously.')[27m);[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 6 snapshots failed[39m[22m from 4 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m5 failed[39m[22m, [1m[32m116 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m7 failed[39m[22m, [1m[33m8 skipped[39m[22m, [1m[32m1226 passed[39m[22m, 1241 total
[1mSnapshots:   [22m[1m[31m6 failed[39m[22m, [1m[32m284 passed[39m[22m, 290 total
[1mTime:[22m        [1m[33m37.524 s[39m[22m
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (3/3)
.[SKIP] Does not work on Jasmine
.[SKIP] Does not work on Jasmine
....................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..............................
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
.....Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
..............
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
....
/app/e2e/__tests__/testFailingJasmine.test.ts

[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
..
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.483 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

...
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.......


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m ([0m[1m[41m6.441 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m6.499 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtestFailingJasmine.test.ts[22m
[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m8.034 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.483 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m9.301 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 7 snapshots failed[39m[22m from 5 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m6 failed[39m[22m, [1m[32m115 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m8 failed[39m[22m, [1m[33m9 skipped[39m[22m, [1m[32m1223 passed[39m[22m, 1240 total
[1mSnapshots:   [22m[1m[31m7 failed[39m[22m, [1m[32m284 passed[39m[22m, 291 total
[1mTime:[22m        [1m[33m42.078 s[39m[22m
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (1/3)
........................[SKIP] Does not work on Jasmine
.......[SKIP] Does not work on Jasmine
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
......
/app/e2e/__tests__/testFailingJasmine.test.ts

[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.......[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
....................
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
............Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
..........
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.....
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
.....
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.578 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

.........


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtestFailingJasmine.test.ts[22m
[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m5.272 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m6.532 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m6.605 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.578 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 7 snapshots failed[39m[22m from 5 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m6 failed[39m[22m, [1m[32m115 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m8 failed[39m[22m, [1m[33m9 skipped[39m[22m, [1m[32m1223 passed[39m[22m, 1240 total
[1mSnapshots:   [22m[1m[31m7 failed[39m[22m, [1m[32m284 passed[39m[22m, 291 total
[1mTime:[22m        39.898 s, estimated 40 s
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (2/3)
........................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
........[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.....[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.......
/app/e2e/__tests__/testFailingJasmine.test.ts

[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
..[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.[SKIP] Does not work on Jasmine
....[SKIP] Does not work on Jasmine
...[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
......................[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.
/app/e2e/__tests__/requireMissingExt.test.ts

[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
...........Warning: ReactDOMTestUtils is deprecated and will be removed in a future major release, because it exposes internal implementation details that are highly likely to change between releases. Upgrade to a modern testing library, such as @testing-library/react. See https://react.dev/warnings/react-dom-test-utils for more info.
Warning: ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot
.........
/app/e2e/__tests__/nestedTestDefinitions.test.ts

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
...
/app/e2e/__tests__/expectAsyncMatcher.test.ts

[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[1m[31m ‚Ä∫ 1 snapshot test[39m[22m failed.
.[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
[33m[jest-util] garbage collection deletion mode already initialized, ignoring new mode[39m
[33m  Current: 'on'[39m
[33m  Given: 'soft'[39m
.......
/app/e2e/__tests__/moduleNameMapper.test.ts

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[1m[31m ‚Ä∫ 2 snapshot tests[39m[22m failed.
.
/app/e2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts

[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.503 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m

.........


[1mSummary of all failing tests[22m
[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtestFailingJasmine.test.ts[22m
[1m[31m  [1m‚óè [22m[1mthrows an error about unsupported modifier[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `throws an error about unsupported modifier 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -33,17 +33,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.failing('.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m               [7m  ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m                 [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |    [7m expect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |    [7m [27m[7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentMode.test.js:13:17)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentMode.test.js:8:1)[22m

    [33m@@ -67,17 +67,17 @@[39m

    [2m    ‚óè block with concurrent ‚Ä∫ encountered a declaration exception[22m

    [2m      Jest: `failing` tests are only supported in `jest-circus`.[22m

    [35m[103m-       [7m11 |   });[27m[49m[39m
    [35m[103m-       12 |[49m[39m
    [35m[103m-     > 13 |   it.concurrent.only.failing('.only.failing() should fail', () => {[49m[39m
    [35m[103m- [7m [27m        [7m|[27m              [7m        ^[27m[49m[39m
    [36m[107m+       [7m309 |       promise = Promise.reject(error);[27m[49m[39m
    [36m[107m+       310 |     }[49m[39m
    [36m[107m+     > 311 |     // Avoid triggering the uncaught promise rejection handler in case the test errors before[49m[39m
    [36m[107m+ [7m          |[27m        [7m [27m        [7m^[27m[49m[39m
    [36m[107m+       [7m312 |     // being awaited on.[27m[49m[39m
    [35m[103m-       [7m14[27m |     [7mexpect(10).toBe(10);[27m[49m[39m
    [35m[103m-       15 |   });[49m[39m
    [35m[103m-       16 |[49m[39m
    [36m[107m+       [7m313[27m |     [7m// eslint-disable-next-line @typescript-eslint/no-empty-function[27m[49m[39m
    [36m[107m+       314 |     promise.catch(() => {});[49m[39m

    [2m        at Function.failing (../../packages/jest-jasmine2/build/index.js:311:17)[22m
    [2m        at Suite.failing (__tests__/worksWithConcurrentOnlyMode.test.js:13:22)[22m
    [2m        at Object.describe (__tests__/worksWithConcurrentOnlyMode.test.js:8:1)[22m
    [2m  ‚Üµ[22m
[2m[22m
[2m    [0m [90m 19 |[39m   expect(result[33m.[39mexitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m     [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSortedSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 21 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 22 |[39m })[33m;[39m[22m
[2m     [90m 23 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/testFailingJasmine.test.ts[39m[0m[2m:21:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mrequireMissingExt.test.ts[22m
[1m[31m  [1m‚óè [22m[1mshows a proper error from deep requires[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows a proper error from deep requires 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -13,16 +13,16 @@[39m

    [2m      You might want to include a file extension in your import, or update your 'moduleFileExtensions', which is currently ['js'].[22m

    [2m      See https://jestjs.io/docs/configuration#modulefileextensions-arraystring[22m

    [35m[103m-       [7m 8 | 'use strict[27m';[49m[39m
    [36m[107m+       [7m861 |   _throwModNotFoundError(from, moduleName) {[27m[49m[39m
    [36m[107m+ [7m      862 |     const relativePath = (0, _slash().default)(path().relative(this._options.rootDir, from)) || '.[27m';[49m[39m
    [35m[103m-     [7m   9[27m |[49m[39m
    [35m[103m-     [7m> 10 | require('discord.js'[27m);[49m[39m
    [36m[107m+     [7m> 863[27m |    [7m throw new _ModuleNotFoundError.default(`Cannot find module '${moduleName}' from '${relativePath}'`, moduleName[27m);[49m[39m
    [35m[103m-          | [7m^[27m[49m[39m
    [35m[103m-       11 |[49m[39m
    [35m[103m- [7m      12 | test('dummy', () =>[27m {[49m[39m
    [36m[107m+ [7m [27m         | [7m          ^[27m[49m[39m
    [36m[107m+       864 |   }[49m[39m
    [36m[107m+ [7m      865 |   _getMapModuleName(matches)[27m {[49m[39m
    [35m[103m-       [7m13[27m |   [7mexpect(1).toBe(1)[27m;[49m[39m
    [36m[107m+       [7m866[27m |   [7m [27m[7m return matches ? moduleName => moduleName.replaceAll(/\$(\d+)/g, (_, index) => matches[Number.parseInt(index, 10)] || '') : moduleName => moduleName[27m;[49m[39m

    [2m        at Resolver._throwModNotFoundError (../../packages/jest-resolve/build/index.js:863:11)[22m
    [2m        at Object.<anonymous> (node_modules/discord.js/src/index.js:21:12)[22m
    [2m        at Object.require (__tests__/test.js:10:1)"[22m
[2m[22m
[2m    [0m [90m 20 |[39m   [36mconst[39m {rest} [33m=[39m extractSummary(stderr)[33m;[39m[22m
[2m     [90m 21 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 22 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 23 |[39m })[33m;[39m[22m
[2m     [90m 24 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/requireMissingExt.test.ts[39m[0m[2m:22:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mnestedTestDefinitions.test.ts[22m
[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions outside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions outside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -3,14 +3,14 @@[39m

    [2m    ‚óè outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m13 |   expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [35m[103m-       1[7m4[27m |[49m[39m
    [35m[103m-     [7m> 15 |   test('inner test', () =>[27m {[49m[39m
    [36m[107m+       [7m84[27m1 |[7m [27m    [7m    if (currentSpec !== null)[27m {[49m[39m
    [35m[103m-     [7m  [27m[7m  [27m |   [7m^[27m[49m[39m
    [35m[103m-       [7m16 |     expect(getTruthy()).toBe('This test should not have run');[27m[49m[39m
    [35m[103m-       17 |   });[49m[39m
    [35m[103m- [7m      18 | })[27m;[49m[39m
    [36m[107m+     [7m> 842[27m |         [7m  throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[27m[49m[39m
    [36m[107m+           |                 ^[49m[39m
    [36m[107m+       843 |         }[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestOutsideDescribe.js:15:3)"[22m
[2m[22m
[2m    [0m [90m 27 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 28 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 29 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 30 |[39m })[33m;[39m[22m
[2m     [90m 31 |[39m[22m
[2m     [90m 32 |[39m test([32m'print correct error message with nested test definitions inside describe'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:29:44)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mprint correct error message with nested test definitions inside describe[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `print correct error message with nested test definitions inside describe 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -4,14 +4,14 @@[39m

    [2m    ‚óè in describe ‚Ä∫ outer test[22m

    [2m      Tests cannot be nested. Test "inner test" cannot run because it is nested within "outer test".[22m

    [35m[103m-       [7m14 |     expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       15 |[49m[39m
    [35m[103m-     > 16 |     test('inner test', () => {[49m[39m
    [35m[103m- [7m         |[27m     ^[49m[39m
    [36m[107m+       [7m840 |         // This check throws an error to warn the user about the edge-case.[27m[49m[39m
    [36m[107m+       841 |         if (currentSpec !== null) {[49m[39m
    [36m[107m+     > 842 |           throw new Error(`Tests cannot be nested. Test "${spec.description}" cannot run because it is nested within "${currentSpec.description}".`);[49m[39m
    [36m[107m+ [7m          |           [27m     [7m [27m^[49m[39m
    [35m[103m-       [7m17 |       expect(getTruthy()).toBeTruthy();[27m[49m[39m
    [35m[103m-       18 |     });[49m[39m
    [35m[103m- [7m      19 |   })[27m;[49m[39m
    [36m[107m+       [7m843 |         }[27m[49m[39m
    [36m[107m+       844 |         currentDeclarationSuite.addChild(spec);[49m[39m
    [36m[107m+ [7m      845 |         return spec[27m;[49m[39m

    [2m        at Object.test (__tests__/nestedTestWithinDescribe.js:16:5)"[22m
[2m[22m
[2m    [0m [90m 37 |[39m   [36mconst[39m summary [33m=[39m extractSummary(result[33m.[39mstderr)[33m;[39m[22m
[2m     [90m 38 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 39 |[39m   expect(cleanupRunnerStack(summary[33m.[39mrest))[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                                            [31m[1m^[22m[2m[39m[22m
[2m     [90m 40 |[39m })[33m;[39m[22m
[2m     [90m 41 |[39m[22m
[2m     [90m 42 |[39m (isJestJasmineRun() [33m?[39m test[33m.[39mskip [33m:[39m test)([0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/nestedTestDefinitions.test.ts[39m[0m[2m:39:44)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mexpectAsyncMatcher.test.ts[22m ([0m[1m[41m5.061 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mshows the correct errors in stderr when failing tests[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `shows the correct errors in stderr when failing tests 1`

    [35m[103m- Snapshot  - 14[49m[39m
    [36m[107m+ Received  + 14[49m[39m

    [33m@@ -49,17 +49,17 @@[39m
    [2m      Received:[22m
    [2m        1[22m
    [2m      received.length:[22m
    [2m        1[22m

    [35m[103m-       [7m17[27m |[49m[39m
    [35m[103m-      [7m 18 | it('fail with expected promise values', () =>[27m[49m[39m
    [35m[103m- [7m    > 19 |   expect(Promise.resolve([1])).resolves.toHaveLengthAsync(Promise.resolve(2[27m)));[49m[39m
    [36m[107m+       [7m2138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived[27m)));[49m[39m
    [35m[103m-       [7m  [27m |       [7m         [27m                         [7m^[27m[49m[39m
    [35m[103m-       [7m20 |[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    [7m^[27m[49m[39m
    [35m[103m-       21 | [7mit('fail with expected promise values and not', () =>[27m[49m[39m
    [36m[107m+       21[7m41[27m | [7m  return actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       22 |   [7mexpect(P[27mromise[7m.[27mre[7msolve([1, 2])).resolves.not.toHaveLengthAsync([27m[49m[39m
    [36m[107m+       2[7m14[27m2 |   [7m  outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received p[27mromise[7m [27mre[7mjected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:19:41)[22m

    [2m    ‚óè fail with expected promise values and not[22m

    [33m@@ -68,14 +68,14 @@[39m
    [2m      Received:[22m
    [2m        1,2[22m
    [2m      received.length:[22m
    [2m        2[22m

    [35m[103m-       2[7m0[27m |[49m[39m
    [35m[103m-      [7m 21 | it('fail with expected promise values and not', () =>[27m[49m[39m
    [35m[103m-     > 22 |   expect(Promise.resolve([1, 2])).resolves.not.toHaveLengthAsync([49m[39m
    [35m[103m- [7m  [27m       |       [7m          [27m                               ^[49m[39m
    [36m[107m+       2[7m138[27m |     [7mthrow new JestAssertionError(matcherUtils.matcherErrorMessage(matcherUtils.matcherHint(matcherName, undefined, '', options), `${matcherUtils.RECEIVED_COLOR('received')} value must be a promise or a function returning a promise`, matcherUtils.printWithType('Received', actual, matcherUtils.printReceived)));[27m[49m[39m
    [36m[107m+       [7m2139[27m |   [7m}[27m[49m[39m
    [36m[107m+     [7m> 2140 |   const innerErr = new JestAssertionError();[27m[49m[39m
    [36m[107m+            [7m|[27m                    ^[49m[39m
    [35m[103m-       2[7m3[27m |   [7m  Promise.resolve(2),[27m[49m[39m
    [36m[107m+       2[7m141[27m |   [7mreturn actualWrapper.then(result => makeThrowingMatcher(matcher, isNot, 'resolves', result, innerErr).apply(null, args), error => {[27m[49m[39m
    [35m[103m-       2[7m4[27m |   [7m));[27m[49m[39m
    [35m[103m-       25 |[49m[39m
    [36m[107m+       2[7m142[27m |   [7m [27m[7m outerErr.message = `${matcherUtils.matcherHint(matcherName, undefined, '', options)}\n\n` + 'Received promise rejected instead of resolved\n' + `Rejected to value: ${matcherUtils.printReceived(error)}`;[27m[49m[39m
    [36m[107m+       2143 |     throw outerErr;[49m[39m

    [2m        at Object.toHaveLengthAsync (__tests__/failure.test.js:22:48)"[22m
[2m[22m
[2m    [0m [90m 31 |[39m     [33m.[39mjoin([32m'\n'[39m)[33m;[39m[22m
[2m     [90m 32 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 33 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 34 |[39m })[33m;[39m[22m
[2m     [90m 35 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/expectAsyncMatcher.test.ts[39m[0m[2m:33:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mmoduleNameMapper.test.ts[22m ([0m[1m[41m6.541 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -12,16 +12,16 @@[39m
    [2m          "/\.(css|less)$/": "no-such-module"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 14 |[39m[22m
[2m     [90m 15 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 16 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 17 |[39m })[33m;[39m[22m
[2m     [90m 18 |[39m[22m
[2m     [90m 19 |[39m test([32m'moduleNameMapper wrong array configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:16:16)[22m[2m[22m

[1m[31m  [1m‚óè [22m[1mmoduleNameMapper wrong array configuration[39m[22m

    [2mexpect([22m[36m[107mreceived[49m[39m[2m).[22mtoMatchSnapshot[2m()[22m

    Snapshot name: `moduleNameMapper wrong array configuration 1`

    [35m[103m- Snapshot  - 7[49m[39m
    [36m[107m+ Received  + 7[49m[39m

    [33m@@ -18,16 +18,16 @@[39m
    [2m          ]"[22m
    [2m        },[22m
    [2m        "resolver": undefined[22m
    [2m      }[22m

    [35m[103m-       [7m 8 | 'use strict';[27m[49m[39m
    [35m[103m-        9 |[49m[39m
    [35m[103m-     > 10 | require('./style.css');[49m[39m
    [35m[103m- [7m         |[27m ^[49m[39m
    [36m[107m+       [7m1115 |   .slice(0, -1) + ' '.repeat(4)}]` /// align last bracket correctly as well[27m[49m[39m
    [36m[107m+       1116 |   : mappedModuleName;[49m[39m
    [36m[107m+     > 1117 |   const error = new Error(_chalk().default.red(`${_chalk().default.bold('Configuration error')}:[49m[39m
    [36m[107m+ [7m           |                [27m ^[49m[39m
    [35m[103m-       11 |[49m[39m
    [36m[107m+       11[7m1[27m[7m8[27m |[49m[39m
    [35m[103m-       1[7m2 | module.exports = () => 'test';[27m[49m[39m
    [35m[103m-       13 |[49m[39m
    [36m[107m+       1[7m119 | Could not locate module ${_chalk().default.bold(moduleName)} mapped as:[27m[49m[39m
    [36m[107m+       1120 | ${_chalk().default.bold(mappedAs)}.[49m[39m

    [2m        at createNoMappedModuleFoundError (../../packages/jest-resolve/build/index.js:1117:17)[22m
    [2m        at Object.require (index.js:10:1)[22m
    [2m        at Object.require (__tests__/index.js:10:20)"[22m
[2m[22m
[2m    [0m [90m 22 |[39m[22m
[2m     [90m 23 |[39m   expect(exitCode)[33m.[39mtoBe([35m1[39m)[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 24 |[39m   expect(rest)[33m.[39mtoMatchSnapshot()[33m;[39m[22m
[2m     [90m    |[39m                [31m[1m^[22m[2m[39m[22m
[2m     [90m 25 |[39m })[33m;[39m[22m
[2m     [90m 26 |[39m[22m
[2m     [90m 27 |[39m test([32m'moduleNameMapper correct configuration'[39m[33m,[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.toMatchSnapshot ([22m[2m[0m[36me2e/__tests__/moduleNameMapper.test.ts[39m[0m[2m:24:16)[22m[2m[22m

[0m[7m[1m[31m FAIL [39m[22m[27m[0m [2me2e/__tests__/[22m[1mtoMatchSnapshotWithStringSerializer.test.ts[22m ([0m[1m[41m6.607 s[49m[22m[0m)
[1m[31m  [1m‚óè [22m[1mempty internal ci false[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    Expected substring: [32m"1 snapshot written from 1 test suite."[39m
    Received string:    [31m"FAIL __tests__/empty-internal-ci-false.test.js[39m
    [31m  ‚óè Test suite failed to run¬∑[39m
    [31m    Jest: Couldn't locate all inline snapshots.¬∑[39m
    [31m      1268 |   });[39m
    [31m      1269 |   if (remainingSnapshots.size > 0) {[39m
    [31m    > 1270 |     throw new Error(\"Jest: Couldn't locate all inline snapshots.\");[39m
    [31m           |           ^[39m
    [31m      1271 |   }[39m
    [31m      1272 | };[39m
    [31m      1273 |¬∑[39m
    [31m      at traverseAst (../../packages/jest-snapshot/build/index.js:1270:11)¬∑[39m
    [31mTest Suites: 1 failed, 1 total[39m
    [31mTests:       0 total[39m
    [31mSnapshots:   0 total[39m
    [31mTime:        0.503 s[39m
    [31mRan all test suites matching empty-internal-ci-false.test.js."[39m
[2m[22m
[2m    [0m [90m 81 |[39m     })[33m;[39m[22m
[2m     [90m 82 |[39m     [36mconst[39m {stderr[33m,[39m exitCode} [33m=[39m runJest([33mDIR[39m[33m,[39m [[32m'-w=1'[39m[33m,[39m [32m'--ci=false'[39m[33m,[39m filename])[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 83 |[39m     expect(stderr)[33m.[39mtoMatch([32m'1 snapshot written from 1 test suite.'[39m)[33m;[39m[22m
[2m     [90m    |[39m                    [31m[1m^[22m[2m[39m[22m
[2m     [90m 84 |[39m     expect(exitCode)[33m.[39mtoBe([35m0[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   }[22m
[2m     [90m 86 |[39m[0m[22m
[2m[22m
[2m      [2mat Object.toMatch ([22m[2m[0m[36me2e/__tests__/toMatchSnapshotWithStringSerializer.test.ts[39m[0m[2m:83:20)[22m[2m[22m


[1mSnapshot Summary[22m
[1m[31m ‚Ä∫ 7 snapshots failed[39m[22m from 5 test suites. [2mInspect your code changes or re-run jest with `-u` to update them.[22m

[1mTest Suites: [22m[1m[31m6 failed[39m[22m, [1m[32m115 passed[39m[22m, 121 total
[1mTests:       [22m[1m[31m8 failed[39m[22m, [1m[33m9 skipped[39m[22m, [1m[32m1223 passed[39m[22m, 1240 total
[1mSnapshots:   [22m[1m[31m7 failed[39m[22m, [1m[32m284 passed[39m[22m, 291 total
[1mTime:[22m        [1m[33m40.006 s[39m[22m
[2mRan all test suites[22m[2m in [22m7[2m projects[22m[2m.[22m
Retrying... (3/3)
