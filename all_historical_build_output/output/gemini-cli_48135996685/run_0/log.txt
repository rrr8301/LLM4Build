npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead

> @google/gemini-cli@0.1.21 prepare
> npm run bundle


> @google/gemini-cli@0.1.21 bundle
> npm run generate && node esbuild.config.js && node scripts/copy_bundle_assets.js


> @google/gemini-cli@0.1.21 generate
> node scripts/generate-git-commit-info.js

Assets copied to bundle/

added 899 packages, and audited 904 packages in 11s

271 packages are looking for funding
  run `npm fund` for details

1 low severity vulnerability

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.5.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
npm notice To update run: npm install -g npm@11.5.2
npm notice

> @google/gemini-cli@0.1.21 build
> node scripts/build.js


> @google/gemini-cli@0.1.21 generate
> node scripts/generate-git-commit-info.js


> @google/gemini-cli@0.1.21 build
> node ../../scripts/build_package.js

Successfully copied files.

> @google/gemini-cli-core@0.1.21 build
> node ../../scripts/build_package.js

Successfully copied files.

> @google/gemini-cli-test-utils@0.1.21 build
> node ../../scripts/build_package.js

Successfully copied files.

> gemini-cli-vscode-ide-companion@0.1.19 build
> npm run compile


> gemini-cli-vscode-ide-companion@0.1.19 compile
> npm run check-types && npm run lint && node esbuild.js


> gemini-cli-vscode-ide-companion@0.1.19 check-types
> tsc --noEmit


> gemini-cli-vscode-ide-companion@0.1.19 lint
> eslint src

[watch] build started
[watch] build finished

> @google/gemini-cli@0.1.21 test:ci
> npm run test:ci --workspaces --if-present && npm run test:scripts


> @google/gemini-cli@0.1.21 test:ci
> vitest run --coverage


 RUN  v3.2.4 /usr/src/app/packages/cli
      Coverage enabled with v8

 âœ“ src/ui/themes/color-utils.test.ts (16 tests) 17ms
 âœ“ src/config/settingsSchema.test.ts (13 tests) 36ms
 âœ“ src/utils/settingsUtils.test.ts (68 tests) 49ms
 âœ“ src/ui/utils/computeStats.test.ts (11 tests) 14ms
 âœ“ src/ui/commands/copyCommand.test.ts (11 tests) 27ms
 âœ“ src/ui/commands/restoreCommand.test.ts (13 tests) 88ms
 âœ“ src/utils/installationInfo.test.ts (16 tests) 19ms
 âœ“ src/services/CommandService.test.ts (11 tests) 36ms
 âœ“ src/ui/keyMatchers.test.ts (32 tests) 23ms
 âœ“ src/ui/utils/updateCheck.test.ts (9 tests) 25ms
 âœ“ src/config/extension.test.ts (8 tests) 22ms
 âœ“ src/ui/hooks/usePhraseCycler.test.ts (7 tests) 67ms
 âœ“ src/ui/hooks/useHistoryManager.test.ts (8 tests) 57ms
 âœ“ src/ui/hooks/useInputHistory.test.ts (11 tests) 75ms
 âœ“ src/ui/hooks/useGitBranchName.test.ts (7 tests | 2 skipped) 68ms
 âœ“ src/ui/utils/commandUtils.test.ts (23 tests) 334ms
 âœ“ src/ui/hooks/useSlashCompletion.test.ts (15 tests) 184ms
 âœ“ src/ui/components/shared/MaxSizedBox.test.tsx (21 tests) 211ms
 âœ“ src/ui/components/messages/ToolMessage.test.tsx (11 tests) 140ms
 âœ“ src/ui/components/LoadingIndicator.test.tsx (15 tests) 144ms
 âœ“ src/ui/hooks/useLoadingIndicator.test.ts (5 tests) 68ms
 âœ“ src/ui/commands/compressCommand.test.ts (5 tests) 29ms
 âœ“ src/ui/commands/aboutCommand.test.ts (4 tests) 21ms
 âœ“ src/ui/commands/toolsCommand.test.ts (4 tests) 31ms
 âœ“ src/services/prompt-processors/argumentProcessor.test.ts (6 tests) 13ms
 âœ“ src/ui/hooks/useTimer.test.ts (8 tests) 66ms
 âœ“ src/ui/themes/theme-manager.test.ts (8 tests) 29ms
 âœ“ src/utils/gitUtils.test.ts (12 tests) 44ms
 âœ“ src/ui/hooks/useConsoleMessages.test.ts (7 tests) 91ms
 âœ“ src/ui/themes/theme.test.ts (5 tests) 9ms
 âœ“ src/ui/components/messages/DiffRenderer.test.tsx (13 tests) 629ms
   âœ“ <OverflowProvider><DiffRenderer /></OverflowProvider> > should call colorizeCode with null language for new file with unknown extension  303ms
 âœ“ src/ui/commands/initCommand.test.ts (3 tests) 21ms
 âœ“ src/ui/commands/bugCommand.test.ts (2 tests) 17ms
 âœ“ src/utils/userStartupWarnings.test.ts (5 tests) 19ms
 âœ“ src/ui/commands/docsCommand.test.ts (3 tests) 17ms
 âœ“ src/ui/hooks/useFocus.test.ts (5 tests) 43ms
 âœ“ src/ui/commands/setupGithubCommand.test.ts (1 test) 40ms
 âœ“ src/ui/utils/formatters.test.ts (14 tests) 7ms
 âœ“ src/ui/utils/clipboardUtils.test.ts (6 tests) 11ms
 âœ“ src/ui/commands/statsCommand.test.ts (3 tests) 22ms
 âœ“ src/ui/commands/terminalSetupCommand.test.ts (5 tests) 12ms
 âœ“ src/config/keyBindings.test.ts (3 tests) 15ms
 âœ“ src/ui/utils/markdownUtilities.test.ts (7 tests) 8ms
 âœ“ src/ui/commands/extensionsCommand.test.ts (2 tests) 14ms
 âœ“ src/test-utils/mockCommandContext.test.ts (3 tests) 9ms
 âœ“ src/ui/components/ContextSummaryDisplay.test.tsx (4 tests) 68ms
 âœ“ src/ui/utils/displayUtils.test.ts (5 tests) 8ms
 âœ“ src/ui/commands/quitCommand.test.ts (1 test) 15ms
 âœ“ src/ui/commands/privacyCommand.test.ts (2 tests) 10ms
 âœ“ src/ui/contexts/SessionContext.test.tsx (3 tests) 82ms
 âœ“ src/ui/commands/mcpCommand.test.ts (35 tests) 92ms
 âœ“ src/ui/hooks/useToolScheduler.test.ts (21 tests | 4 skipped) 100ms
 âœ“ src/ui/commands/helpCommand.test.ts (2 tests) 12ms
 âœ“ src/ui/hooks/useReverseSearchCompletion.test.tsx (10 tests) 90ms
 âœ“ src/ui/components/shared/vim-buffer-actions.test.ts (74 tests) 66ms
 âœ“ src/ui/components/ModelStatsDisplay.test.tsx (6 tests) 222ms
 âœ“ src/config/trustedFolders.test.ts (12 tests) 19ms
 âœ“ src/services/prompt-processors/shellProcessor.test.ts (11 tests) 32ms
 âœ“ src/ui/commands/memoryCommand.test.ts (8 tests) 22ms
 âœ“ src/ui/commands/directoryCommand.test.tsx (7 tests) 20ms
 âœ“ src/ui/commands/clearCommand.test.ts (2 tests) 13ms
 âœ“ src/ui/commands/chatCommand.test.ts (17 tests) 53ms
 âœ“ src/ui/commands/themeCommand.test.ts (2 tests) 11ms
 âœ“ src/config/settings.test.ts (46 tests) 49ms
 âœ“ src/ui/hooks/useFolderTrust.test.ts (7 tests) 61ms
 âœ“ src/ui/hooks/useKeypress.test.ts (18 tests) 111ms
 âœ“ src/services/BuiltinCommandLoader.test.ts (4 tests) 16ms
 âœ“ src/ui/hooks/useEditorSettings.test.ts (10 tests) 80ms
 âœ“ src/ui/commands/settingsCommand.test.ts (2 tests) 17ms
 âœ“ src/validateNonInterActiveAuth.test.ts (11 tests) 25ms
 âœ“ src/ui/components/ToolStatsDisplay.test.tsx (5 tests) 148ms
 âœ“ src/commands/mcp/list.test.ts (4 tests) 30ms
 âœ“ src/ui/components/shared/text-buffer.test.ts (103 tests) 382ms
 âœ“ src/utils/handleAutoUpdate.test.ts (10 tests) 21ms
 âœ“ src/services/FileCommandLoader.test.ts (27 tests) 128ms
 âœ“ src/ui/commands/ideCommand.test.ts (8 tests) 41ms
 âœ“ src/nonInteractiveCli.test.ts (6 tests) 27ms
 âœ“ src/ui/hooks/useGeminiStream.test.tsx (32 tests) 519ms
 âœ“ src/ui/hooks/shellCommandProcessor.test.ts (12 tests) 112ms
 âœ“ src/ui/components/StatsDisplay.test.tsx (10 tests) 293ms
 âœ“ src/ui/hooks/atCommandProcessor.test.ts (38 tests) 615ms
 âœ“ src/ui/components/shared/RadioButtonSelect.test.tsx (13 tests) 371ms
 âœ“ src/ui/hooks/useShellHistory.test.ts (7 tests) 617ms
 âœ“ src/ui/hooks/useAutoAcceptIndicator.test.ts (6 tests) 97ms
 âœ“ src/ui/commands/corgiCommand.test.ts (2 tests) 11ms
 âœ“ src/ui/utils/MarkdownDisplay.test.tsx (16 tests) 444ms
 âœ“ src/config/auth.test.ts (8 tests) 11ms
 âœ“ src/ui/components/AuthDialog.test.tsx (10 tests) 615ms
 âœ“ src/ui/hooks/vim.test.ts (87 tests) 729ms
 âœ“ src/ui/commands/authCommand.test.ts (2 tests) 11ms
 âœ“ src/ui/components/Footer.test.tsx (13 tests) 114ms
 âœ“ src/ui/components/Header.test.tsx (4 tests) 97ms
 âœ“ src/ui/commands/editorCommand.test.ts (2 tests) 7ms
 âœ“ src/ui/hooks/useCommandCompletion.test.ts (14 tests) 125ms
 âœ“ src/ui/components/HistoryItemDisplay.test.tsx (7 tests) 117ms
 â†“ src/utils/startupWarnings.test.ts (4 tests | 4 skipped)
 âœ“ src/commands/mcp/add.test.ts (3 tests) 51ms
 âœ“ src/config/config.integration.test.ts (18 tests) 1149ms
   âœ“ Configuration Integration Tests > Approval Mode Integration Tests > should parse --approval-mode=auto_edit correctly through the full argument parsing flow  842ms
 âœ“ src/config/config.test.ts (104 tests) 592ms
 âœ“ src/commands/mcp.test.ts (3 tests) 16ms
 âœ“ src/commands/mcp/remove.test.ts (2 tests) 33ms
 âœ“ src/ui/components/SessionSummaryDisplay.test.tsx (1 test) 97ms
 âœ“ src/utils/cleanup.test.ts (4 tests) 7ms
[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h âœ“ src/gemini.test.tsx (6 tests) 21ms
[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h âœ“ src/ui/components/ShellConfirmationDialog.test.tsx (4 tests) 132ms
[?2004l[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l âœ“ src/ui/components/messages/ToolConfirmationMessage.test.tsx (2 tests) 75ms
[?2004h[?2004l[?2004h[?2004l[?2004h[?2004l âœ“ src/ui/hooks/useAtCompletion.test.ts (13 tests) 1700ms
   âœ“ useAtCompletion > UI State and Loading Behavior > should show a loading indicator and clear old suggestions for subsequent searches that take longer than 200ms  713ms
 âœ“ src/ui/App.test.tsx (34 tests) 810ms
 âœ“ src/ui/components/FolderTrustDialog.test.tsx (2 tests) 138ms
 âœ“ src/ui/components/SettingsDialog.test.tsx (38 tests) 3706ms
   âœ“ SettingsDialog > Complex User Interactions > should handle complete user workflow: navigate, toggle, change scope, exit  481ms
 âœ“ src/ui/hooks/slashCommandProcessor.test.ts (34 tests) 2062ms
 âœ“ src/ui/components/InputPrompt.test.tsx (56 tests) 6278ms

 Test Files  111 passed | 1 skipped (112)
      Tests  1549 passed | 10 skipped (1559)
   Start at  17:10:07
   Duration  17.14s (transform 40.38s, setup 7.84s, collect 338.71s, tests 26.76s, environment 103.97s, prepare 20.51s)

JUNIT report written to /usr/src/app/packages/cli/junit.xml
 % Coverage report from v8

> @google/gemini-cli-core@0.1.21 test:ci
> vitest run --coverage


 RUN  v3.2.4 /usr/src/app/packages/core
      Coverage enabled with v8

 âœ“ src/utils/shell-utils.test.ts (33 tests) 20ms
 âœ“ src/utils/secure-browser-launcher.test.ts (14 tests) 33ms
 âœ“ src/utils/errorReporting.test.ts (6 tests) 42ms
 âœ“ src/utils/editor.test.ts (108 tests) 97ms
 âœ“ src/utils/partUtils.test.ts (23 tests) 17ms
 âœ“ src/utils/paths.test.ts (55 tests) 30ms
 âœ“ src/utils/user_account.test.ts (16 tests) 44ms
 âœ“ src/mcp/oauth-utils.test.ts (16 tests) 24ms
 âœ“ src/core/turn.test.ts (12 tests) 27ms
 âœ“ src/ide/ideContext.test.ts (16 tests) 21ms
 âœ“ src/utils/workspaceContext.test.ts (27 tests) 55ms
 âœ“ src/mcp/oauth-token-storage.test.ts (21 tests) 37ms
 âœ“ src/utils/generateContentResponseUtilities.test.ts (36 tests) 23ms
 âœ“ src/services/gitService.test.ts (14 tests) 67ms
 âœ“ src/tools/mcp-tool.test.ts (32 tests) 36ms
 âœ“ src/code_assist/converter.test.ts (17 tests) 18ms
 âœ“ src/utils/systemEncoding.test.ts (38 tests) 50ms
 âœ“ src/utils/fileUtils.test.ts (40 tests) 133ms
 âœ“ src/utils/environmentContext.test.ts (8 tests) 90ms
 âœ“ src/tools/modifiable-tool.test.ts (11 tests) 82ms
 âœ“ src/core/logger.test.ts (38 tests) 190ms
 âœ“ src/services/fileDiscoveryService.test.ts (13 tests) 90ms
 âœ“ src/utils/memoryImportProcessor.test.ts (27 tests) 103ms
 âœ“ src/mcp/oauth-provider.test.ts (19 tests) 200ms
 âœ“ src/utils/gitIgnoreParser.test.ts (18 tests) 69ms
 âœ“ src/utils/bfsFileSearch.test.ts (11 tests) 104ms
 âœ“ src/core/prompts.test.ts (23 tests) 48ms
 âœ“ src/tools/memoryTool.test.ts (19 tests) 127ms
 âœ“ src/services/shellExecutionService.test.ts (12 tests) 93ms
 âœ“ src/code_assist/server.test.ts (7 tests) 56ms
 âœ“ src/code_assist/setup.test.ts (7 tests) 20ms
(node:5011) MaxListenersExceededWarning: Possible EventTarget memory leak detected. 11 abort listeners added to [AbortSignal]. MaxListeners is 10. Use events.setMaxListeners() to increase limit
(Use `node --trace-warnings ...` to show where the warning was created)
 âœ“ src/tools/diffOptions.test.ts (9 tests) 12ms
 âœ“ src/telemetry/metrics.test.ts (11 tests) 612ms
 âœ“ src/utils/filesearch/crawlCache.test.ts (9 tests) 14ms
 âœ“ src/tools/tools.test.ts (8 tests) 13ms
 âœ“ src/index.test.ts (1 test) 4ms
 âœ“ src/utils/safeJsonStringify.test.ts (8 tests) 9ms
 âœ“ src/utils/filesearch/result-cache.test.ts (3 tests) 10ms
 âœ“ src/ide/detect-ide.test.ts (11 tests) 10ms
 âœ“ src/utils/filesearch/ignore.test.ts (6 tests) 16ms
 âœ“ src/tools/shell.test.ts (18 tests) 155ms
 âœ“ src/tools/grep.test.ts (23 tests) 272ms
 âœ“ src/utils/user_id.test.ts (1 test) 8ms
 âœ“ src/ide/ide-client.test.ts (6 tests) 10ms
 âœ“ src/ide/ide-installer.test.ts (2 tests) 15ms
 âœ“ src/mcp/google-auth-provider.test.ts (8 tests) 31ms
 âœ“ src/tools/read-file.test.ts (24 tests) 279ms
 âœ“ src/utils/filesearch/fileSearch.test.ts (28 tests) 203ms
 âœ“ src/utils/errorParsing.test.ts (21 tests) 15ms
 âœ“ src/code_assist/oauth2.test.ts (10 tests) 71ms
 âœ“ src/telemetry/uiTelemetry.test.ts (17 tests) 18ms
 âœ“ src/core/geminiChat.test.ts (21 tests) 41ms
 âœ“ src/utils/retry.test.ts (13 tests) 65ms
 âœ“ src/core/contentGenerator.test.ts (7 tests) 22ms
 âœ“ src/tools/glob.test.ts (30 tests) 1477ms
 âœ“ src/utils/summarizer.test.ts (8 tests) 42ms
 âœ“ src/utils/getFolderStructure.test.ts (15 tests) 61ms
 âœ“ src/config/config.test.ts (31 tests) 52ms
 âœ“ src/utils/nextSpeakerChecker.test.ts (10 tests) 64ms
 âœ“ src/tools/tool-registry.test.ts (7 tests) 125ms
 âœ“ src/utils/editCorrector.test.ts (40 tests) 71ms
 âœ“ src/tools/web-search.test.ts (8 tests) 107ms
 âœ“ src/tools/mcp-client.test.ts (46 tests) 53ms
 âœ“ src/core/nonInteractiveToolExecutor.test.ts (5 tests) 17ms
 âœ“ src/tools/ls.test.ts (22 tests) 165ms
 âœ“ src/tools/write-file.test.ts (25 tests) 180ms
 âœ“ src/telemetry/loggers.test.ts (13 tests) 62ms
 âœ“ src/core/client.test.ts (45 tests) 293ms
 âœ“ src/utils/memoryDiscovery.test.ts (12 tests) 132ms
 â¯ src/tools/edit.test.ts (40 tests | 1 failed) 228ms
   âœ“ EditTool > applyReplacement > should return newString if isNewFile is true 5ms
   âœ“ EditTool > applyReplacement > should return newString if currentContent is null and oldString is empty (defensive) 1ms
   âœ“ EditTool > applyReplacement > should return empty string if currentContent is null and oldString is not empty (defensive) 1ms
   âœ“ EditTool > applyReplacement > should replace oldString with newString in currentContent 1ms
   âœ“ EditTool > applyReplacement > should return currentContent if oldString is empty and not a new file 1ms
   âœ“ EditTool > validateToolParams > should return null for valid params 46ms
   âœ“ EditTool > validateToolParams > should return error for relative path 3ms
   âœ“ EditTool > validateToolParams > should return error for path outside root 3ms
   âœ“ EditTool > shouldConfirmExecute > should throw an error if params are invalid 4ms
   âœ“ EditTool > shouldConfirmExecute > should request confirmation for valid edit 8ms
   âœ“ EditTool > shouldConfirmExecute > should return false if old_string is not found (ensureCorrectEdit returns 0) 7ms
   âœ“ EditTool > shouldConfirmExecute > should return false if multiple occurrences of old_string are found (ensureCorrectEdit returns > 1) 5ms
   âœ“ EditTool > shouldConfirmExecute > should request confirmation for creating a new file (empty old_string) 6ms
   âœ“ EditTool > shouldConfirmExecute > should use corrected params from ensureCorrectEdit for diff generation 6ms
   âœ“ EditTool > execute > should throw error if params are invalid 6ms
   âœ“ EditTool > execute > should edit an existing file and return diff with fileName 10ms
   âœ“ EditTool > execute > should create a new file if old_string is empty and file does not exist, and return created message 4ms
   âœ“ EditTool > execute > should return error if old_string is not found in file 3ms
   âœ“ EditTool > execute > should return error if multiple occurrences of old_string are found 3ms
   âœ“ EditTool > execute > should successfully replace multiple occurrences when expected_replacements specified 4ms
   âœ“ EditTool > execute > should return error if expected_replacements does not match actual occurrences 4ms
   âœ“ EditTool > execute > should return error if trying to create a file that already exists (empty old_string) 5ms
   âœ“ EditTool > execute > should include modification message when proposed content is modified 5ms
   âœ“ EditTool > execute > should not include modification message when proposed content is not modified 4ms
   âœ“ EditTool > execute > should not include modification message when modified_by_user is not provided 4ms
   âœ“ EditTool > execute > should return error if old_string and new_string are identical 4ms
   âœ“ EditTool > Error Scenarios > should return FILE_NOT_FOUND error 3ms
   âœ“ EditTool > Error Scenarios > should return ATTEMPT_TO_CREATE_EXISTING_FILE error 4ms
   âœ“ EditTool > Error Scenarios > should return NO_OCCURRENCE_FOUND error 3ms
   âœ“ EditTool > Error Scenarios > should return EXPECTED_OCCURRENCE_MISMATCH error 4ms
   âœ“ EditTool > Error Scenarios > should return NO_CHANGE error 4ms
   âœ“ EditTool > Error Scenarios > should throw INVALID_PARAMETERS error for relative path 3ms
   Ã— EditTool > Error Scenarios > should return FILE_WRITE_FAILURE on write error 17ms
     â†’ expected undefined to be 'file_write_failure' // Object.is equality
   âœ“ EditTool > getDescription > should return "No file changes to..." if old_string and new_string are the same 4ms
   âœ“ EditTool > getDescription > should return a snippet of old and new strings if they are different 5ms
   âœ“ EditTool > getDescription > should handle very short strings correctly in the description 6ms
   âœ“ EditTool > getDescription > should truncate long strings in the description 5ms
   âœ“ EditTool > workspace boundary validation > should validate paths are within workspace root 4ms
   âœ“ EditTool > workspace boundary validation > should reject paths outside workspace root 3ms
   âœ“ EditTool > IDE mode > should call ideClient.openDiff and update params on confirmation 7ms
 âœ“ src/telemetry/clearcut-logger/clearcut-logger.test.ts (19 tests) 156ms
 âœ“ src/core/coreToolScheduler.test.ts (17 tests) 103ms
 âœ“ src/tools/read-many-files.test.ts (27 tests) 403ms
 âœ“ src/tools/web-fetch.test.ts (4 tests) 63ms
 âœ“ src/utils/flashFallback.integration.test.ts (4 tests) 323ms
 âœ“ src/telemetry/telemetry.test.ts (2 tests) 20ms
 âœ“ src/config/flashFallback.test.ts (6 tests) 130ms
 âœ“ src/services/loopDetectionService.test.ts (33 tests) 391ms
 âœ“ src/core/subagent.test.ts (19 tests) 160ms

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 1 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  src/tools/edit.test.ts > EditTool > Error Scenarios > should return FILE_WRITE_FAILURE on write error
AssertionError: expected undefined to be 'file_write_failure' // Object.is equality

[32m- Expected:[39m
"file_write_failure"

[31m+ Received:[39m
undefined

 â¯ src/tools/edit.test.ts:713:34
    711|       const invocation = tool.build(params);
    712|       const result = await invocation.execute(new AbortController().siâ€¦
    713|       expect(result.error?.type).toBe(ToolErrorType.FILE_WRITE_FAILUREâ€¦
       |                                  ^
    714|     });
    715|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯


 Test Files  1 failed | 78 passed (79)
      Tests  1 failed | 1489 passed (1490)
   Start at  17:10:26
   Duration  6.57s (transform 37.98s, setup 3.90s, collect 136.10s, tests 8.83s, environment 33ms, prepare 17.67s)

JUNIT report written to /usr/src/app/packages/core/junit.xml
npm error Lifecycle script `test:ci` failed with error:
npm error code 1
npm error path /usr/src/app/packages/core
npm error workspace @google/gemini-cli-core@0.1.21
npm error location /usr/src/app/packages/core
npm error command failed
npm error command sh -c vitest run --coverage


> gemini-cli-vscode-ide-companion@0.1.19 test:ci
> vitest run --coverage


 RUN  v3.2.4 /usr/src/app/packages/vscode-ide-companion
      Coverage enabled with v8

 âœ“ src/open-files-manager.test.ts (17 tests) 33ms
 âœ“ src/extension.test.ts (3 tests) 21ms
 âœ“ src/extension-multi-folder.test.ts (4 tests) 26ms

 Test Files  3 passed (3)
      Tests  24 passed (24)
   Start at  17:10:33
   Duration  3.53s (transform 1.17s, setup 0ms, collect 5.38s, tests 79ms, environment 1ms, prepare 312ms)

 % Coverage report from v8
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
-------------------|---------|----------|---------|---------|-------------------
All files          |   40.61 |    81.35 |   51.28 |   40.61 |
 ...-ide-companion |       0 |        0 |       0 |       0 |
  esbuild.js       |       0 |        0 |       0 |       0 | 1-62
 ...panion/scripts |       0 |        0 |       0 |       0 |
  ...te-notices.js |       0 |        0 |       0 |       0 | 1-105
 ...-companion/src |   47.93 |    85.18 |   52.77 |   47.93 |
  diff-manager.ts  |    23.5 |       80 |      25 |    23.5 | ...37-238,241-266
  extension.ts     |   68.29 |    81.81 |      50 |   68.29 | ...17-121,126-140
  ide-server.ts    |   32.19 |      100 |   57.14 |   32.19 | ...62-277,288-298
  ...es-manager.ts |   94.32 |    85.29 |     100 |   94.32 | ...85,143-144,151
 ...nion/src/utils |   83.33 |    66.66 |     100 |   83.33 |
  logger.ts        |   83.33 |    66.66 |     100 |   83.33 | 15-16
-------------------|---------|----------|---------|---------|-------------------
