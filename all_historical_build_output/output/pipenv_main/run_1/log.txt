To activate this project's virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
Installing dependencies from Pipfile.lock (442429)...
Installing dependencies from Pipfile.lock (442429)...
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.4.0, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: timeout-2.4.0, xdist-3.7.0, cov-4.1.0, flaky-3.8.1
collected 412 items

tests/integration/test_cli.py .......FsssF......s.....                   [  5%]
tests/integration/test_dot_venv.py ......................                [ 11%]
tests/integration/test_import_requirements.py .....                      [ 12%]
tests/integration/test_install_basic.py F......F......F.F..F......FFFF.s [ 20%]
......                                                                   [ 21%]
tests/integration/test_install_categories.py F.FF..                      [ 23%]
tests/integration/test_install_markers.py .F..F...                       [ 25%]
tests/integration/test_install_misc.py F....                             [ 26%]
tests/integration/test_install_nested_setup.py .                         [ 26%]
tests/integration/test_install_paths.py .                                [ 26%]
tests/integration/test_install_twists.py ...s.sF.FF.F..F.                [ 30%]
tests/integration/test_install_uri.py ..F.FF.FFFF                        [ 33%]
tests/integration/test_install_vcs.py ...F.                              [ 34%]
tests/integration/test_lock.py F..F.F.....FFFFF..F.F.F.FFF..             [ 41%]
tests/integration/test_lockfile.py ..                                    [ 41%]
tests/integration/test_pipenv.py .F..                                    [ 42%]
tests/integration/test_project.py .F......                               [ 44%]
tests/integration/test_python_version_mismatch.py ..                     [ 45%]
tests/integration/test_requirements.py ............                      [ 48%]
tests/integration/test_run.py ........                                   [ 50%]
tests/integration/test_sync.py .F.                                       [ 50%]
tests/integration/test_uninstall.py .FFFF..F......                       [ 54%]
tests/integration/test_update.py FF..........                            [ 57%]
tests/integration/test_upgrade.py .....                                  [ 58%]
tests/integration/test_upgrade_cleanup.py .                              [ 58%]
tests/integration/test_windows.py sssss                                  [ 59%]
tests/unit/test_cmdparse.py .......                                      [ 61%]
tests/unit/test_core.py ....                                             [ 62%]
tests/unit/test_dependencies.py ..                                       [ 63%]
tests/unit/test_environments.py .............                            [ 66%]
tests/unit/test_funktools.py ........                                    [ 68%]
tests/unit/test_help.py .                                                [ 68%]
tests/unit/test_utils.py ............................................... [ 79%]
....................ssssss........................s.                     [ 92%]
tests/unit/test_utils_windows_executable.py ss                           [ 92%]
tests/unit/test_vcs.py ......................                            [ 98%]
tests/unit/test_vendor.py .......                                        [100%]

=================================== FAILURES ===================================
__________________________ test_pipenv_graph_reverse ___________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fe52fca0>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    def test_pipenv_graph_reverse(pipenv_instance_private_pypi):
        from pipenv.cli import cli
        from pipenv.vendor.click.testing import CliRunner

        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install tablib==0.13.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install tablib==0.13.0', returncode=1, stdout='Installing tablib==0.13.0...\nInstallatio... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_cli.py:108: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install tablib==0.13.0
Installing tablib==0.13.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-jg1z5lis-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 265ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-jg1z5lis-tests-XScxmpri
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-jg1z5lis-tests-XScxmpri
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading tablib==0.13.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f94e930ebc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f94e930cd30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f94e930e5c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f94e930e260>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f94e930e1d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement tablib==0.13.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for tablib==0.13.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_pipenv_clean _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fdada3e0>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    @pytest.mark.skipif(
        sys.version_info[:2] == (3, 8) and os.name == "nt",
        reason="This test is not working om Windows Python 3. 8",
    )
    def test_pipenv_clean(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open("setup.py", "w") as f:
                f.write('from setuptools import setup; setup(name="empty")')
            c = p.pipenv("install -e .")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e .', returncode=1, stdout='Installing -e ....\nInstallation Succeeded\nInstall... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_cli.py:208: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e .
Installing -e ....
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-5gjhmfak-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 251ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-5gjhmfak-tests-w_c4rOgu
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-5gjhmfak-tests-w_c4rOgu
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e . in  dependencies.
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_basic_install ______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd3d9990>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_basic_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six -v")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six -v', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six -v
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Running command: $
/root/.local/share/virtualenvs/pipenv-1hhm_etp-tests-jbPpEHDG/bin/python
/app/pipenv/vendor/pipdeptree -l --reverse --json-tree
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.network.session:adding trusted host:
'localhost:8080' (from line 2 of
/tmp/pipenv-m4l5mzpp-requirements/pipenv-14xj92z0-constraints.txt)
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('six'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8f681e2680>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8f67df9ba0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8f67dfb190>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8f67dfb040>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8f67dfa710>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('six')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('six'), parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for six
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
six
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-1hhm_etp-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 225ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-1hhm_etp-tests-jbPpEHDG
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-1hhm_etp-tests-jbPpEHDG
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Command output: [
    {
        "key": "pip",
        "package_name": "pip",
        "installed_version": "25.1.1",
        "required_version": "25.1.1",
        "dependencies": []
    },
    {
        "key": "setuptools",
        "package_name": "setuptools",
        "installed_version": "80.3.1",
        "required_version": "80.3.1",
        "dependencies": []
    }
]

Upgrading six in  dependencies.
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_extras_install ______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd0e5930>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.extras
    @pytest.mark.install
    def test_extras_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install requests[socks]")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install requests[socks]', returncode=1, stdout='Installing requests...\nInstallation Suc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:135: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install requests[socks]
Installing requests...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-qazsgyvn-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 221ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-qazsgyvn-tests-Unu3kNmD
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-qazsgyvn-tests-Unu3kNmD
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading requests in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa4c5ca2dd0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa4c5bb5d20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa4c5ca2f80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa4c5ca3490>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa4c5ca1f60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________ test_skip_requirements_when_pipfile ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd2750c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    @pytest.mark.requirements
    def test_skip_requirements_when_pipfile(pipenv_instance_private_pypi):
        """Ensure requirements.txt is NOT imported when

        1. We do `pipenv install [package]`
        2. A Pipfile already exists when we run `pipenv install`.
        """
        with pipenv_instance_private_pypi() as p:
            with open("requirements.txt", "w") as f:
                f.write("requests==2.18.1\n")
            c = p.pipenv("install six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstallin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:276: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-muidzu1l-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 233ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-muidzu1l-tests-Vw8p--bh
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-muidzu1l-tests-Vw8p--bh
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f0a01557370>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f0a01556ef0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f0a01556d70>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f0a01554df0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f0a01557ca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_install_does_not_extrapolate_environ ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fdd316f0>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_install_does_not_extrapolate_environ(pipenv_instance_private_pypi):
        """Ensure environment variables are not expanded in lock file."""
        with temp_environ(), pipenv_instance_private_pypi() as p:
            os.environ["PYPI_URL"] = p.pypi

            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [[source]]
    url = '${PYPI_URL}/simple'
    verify_ssl = true
    name = 'mockpi'
                """
                )

            # Ensure simple install does not extrapolate.
            c = p.pipenv("install -v")
            assert c.returncode == 0
            assert p.pipfile["source"][0]["url"] == "${PYPI_URL}/simple"
            assert p.lockfile["_meta"]["sources"][0]["url"] == "${PYPI_URL}/simple"

            # Ensure package install does not extrapolate.
            c = p.pipenv("install six -v")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six -v', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:324: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six -v
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (eddaee)...
All dependencies are now up-to-date!
Running command: $
/root/.local/share/virtualenvs/pipenv-95sqksn6-tests-B-KxPpwY/bin/python
/app/pipenv/vendor/pipdeptree -l --reverse --json-tree
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('six'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b06063460>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b060620e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b06061a50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b06500a60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b06502380>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('six')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('six'), parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for six
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
six
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Command output: [
    {
        "key": "pip",
        "package_name": "pip",
        "installed_version": "25.1.1",
        "required_version": "25.1.1",
        "dependencies": []
    },
    {
        "key": "setuptools",
        "package_name": "setuptools",
        "installed_version": "80.3.1",
        "required_version": "80.3.1",
        "dependencies": []
    }
]

Upgrading six in  dependencies.
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_system_and_deploy_work __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd275b40>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    @pytest.mark.deploy
    @pytest.mark.system
    def test_system_and_deploy_work(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install urllib3")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install urllib3', returncode=1, stdout='Installing urllib3...\nInstallation Succeeded\nI... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:371: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install urllib3
Installing urllib3...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-_ybkfzzs-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 238ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-_ybkfzzs-tests-hWMkkjP2
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-_ybkfzzs-tests-hWMkkjP2
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading urllib3 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbfda87efb0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbfda87ceb0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbfda87eda0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbfda87eef0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbfda87eb90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement urllib3 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for urllib3

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_install_package_with_dots ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fdd33a30>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_install_package_with_dots(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install backports.html")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install backports.html', returncode=1, stdout='Installing backports.html...\nInstallatio... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:500: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install backports.html
Installing backports.html...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-utm11tlt-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 265ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-utm11tlt-tests-Cjpn92X4
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-utm11tlt-tests-Cjpn92X4
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading backports.html in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f307af6ac20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f307af6ad40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f307af6aa10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f307af6a530>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f307af69de0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement backports.html (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for backports.html

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________________ test_rewrite_outline_table __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd2770d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_rewrite_outline_table(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = false
    name = "testindex"

    [packages]
    six = {}

    [packages.requests]
    version = "*"
    extras = ["socks"]
                """.format(
                    p.index_url, '{version = "*"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install colorama")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install colorama', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:526: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install colorama
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-awxonsng-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 243ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-awxonsng-tests-DWeSIyyb
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-awxonsng-tests-DWeSIyyb
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd33943d000>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd3397882b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd339a38dc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd339a39ba0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd339a38d00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_rewrite_outline_table_ooo ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd274b80>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_rewrite_outline_table_ooo(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = false
    name = "testindex"

    [packages]
    six = {}

    # Out-of-order
    [pipenv]
    allow_prereleases = false

    [packages.requests]
    version = "*"
    extras = ["socks"]
                """.format(
                    p.index_url, '{version = "*"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install colorama")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install colorama', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:561: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install colorama
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-_4qxamzz-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 285ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-_4qxamzz-tests-5WKY9lP6
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-_4qxamzz-tests-5WKY9lP6
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f590863f940>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f590860e050>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f590860e020>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f590860d1e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f590860d3f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________ test_install_dev_use_default_constraints ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd39b0d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.dev
    @pytest.mark.install
    def test_install_dev_use_default_constraints(pipenv_instance_private_pypi):
        # See https://github.com/pypa/pipenv/issues/4371
        # See https://github.com/pypa/pipenv/issues/2987
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install requests==2.14.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install requests==2.14.0', returncode=1, stdout='Installing requests==2.14.0...\nInstall... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:577: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install requests==2.14.0
Installing requests==2.14.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ux6mr9e4-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 224ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ux6mr9e4-tests-fvrRsMMb
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ux6mr9e4-tests-fvrRsMMb
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading requests==2.14.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe80f02f8e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe80f02fe50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe80f02e170>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe80f02fb80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe80f02e080>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests==2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests==2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_basic_category_install __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd1be2c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.categories
    @pytest.mark.install
    def test_basic_category_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six --categories prereq")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories prereq', returncode=1, stdout='Installing six...\nInstallation ... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:12: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories prereq
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-if1bq5rz-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 247ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-if1bq5rz-tests-adtlsOCu
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-if1bq5rz-tests-adtlsOCu
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd98895ea40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd988700940>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9887170d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd988715ea0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd988542140>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_multiple_category_install[prereq other] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd0e6590>, index_url='http://localhost:8080/simple')
categories = 'prereq other'

    @pytest.mark.categories
    @pytest.mark.install
    @pytest.mark.parametrize("categories", ["prereq other", "prereq, other"])
    def test_multiple_category_install(pipenv_instance_private_pypi, categories):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv('install six --categories="prereq other"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories="prereq other"', returncode=1, stdout='Installing six...\nInsta... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories="prereq other"
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-uyp9om0s-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 231ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-uyp9om0s-tests-xTRwi0IE
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-uyp9om0s-tests-xTRwi0IE
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f83f2e4e860>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f83f2dbc940>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f83f2e4d090>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f83f2e4c700>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f83f2e4c3a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________ test_multiple_category_install[prereq, other] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd0e7f10>, index_url='http://localhost:8080/simple')
categories = 'prereq, other'

    @pytest.mark.categories
    @pytest.mark.install
    @pytest.mark.parametrize("categories", ["prereq other", "prereq, other"])
    def test_multiple_category_install(pipenv_instance_private_pypi, categories):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv('install six --categories="prereq other"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories="prereq other"', returncode=1, stdout='Installing six...\nInsta... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories="prereq other"
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-9m8ty9ux-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 205ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-9m8ty9ux-tests-YBV7Q8t9
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-9m8ty9ux-tests-YBV7Q8t9
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f131f0944f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f131f005210>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f131f094d00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f131f097c10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f131f0968f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_platform_python_implementation_marker __________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd39a800>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.markers
    def test_platform_python_implementation_marker(pipenv_instance_private_pypi):
        """Markers should be converted during locking to help users who input this
        incorrectly.
        """
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install depends-on-marked-package")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_markers.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install depends-on-marked-package
Installing depends-on-marked-package...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-9vg8n4jn-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 218ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-9vg8n4jn-tests-p-yHPJ07
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-9vg8n4jn-tests-p-yHPJ07
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading depends-on-marked-package in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f109d95cdc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f109d95d7e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f109d95ee30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f109d95d900>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f109e021450>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement depends-on-marked-package (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for depends-on-marked-package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv install depends-on-marked-package
Installing depends-on-marked-package...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-8prkcuxq-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 229ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-8prkcuxq-tests-Q0ymp-HT
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-8prkcuxq-tests-Q0ymp-HT
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading depends-on-marked-package in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f85635a93f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f85635a9720>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f85635a95d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f85635ab130>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8563c72170>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement depends-on-marked-package (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for depends-on-marked-package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_global_overrides_environment_markers ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd0f8340>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.markers
    @pytest.mark.install
    def test_global_overrides_environment_markers(pipenv_instance_private_pypi):
        """Empty (unconditional) dependency should take precedence.
        If a dependency is specified without environment markers, it should
        override dependencies with environment markers. In this example,
        APScheduler requires funcsigs only on Python 2, but since funcsigs is
        also specified as an unconditional dep, its markers should be empty.
        """
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    apscheduler = "*"
    funcsigs = "*"
                """.strip()
                f.write(contents)

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_markers.py:130: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-qc9pv6n7-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 225ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-qc9pv6n7-tests-46AXuR5V
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-qc9pv6n7-tests-46AXuR5V
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff7d4394d00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff7d3c31000>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff7d4396bc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff7d4319db0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff7d431a830>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement apscheduler (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for apscheduler

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-7a041ue7-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 226ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-7a041ue7-tests-99ARbcoh
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-7a041ue7-tests-99ARbcoh
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2220b30340>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2221025f30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2221024ee0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2220afbac0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2220afb670>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement apscheduler (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for apscheduler

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_install_uri_with_extras _________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd19e170>, index_url='https://pypi.org/simple')

    @pytest.mark.urls
    @pytest.mark.extras
    @pytest.mark.install
    def test_install_uri_with_extras(pipenv_instance_pypi):
        server = DEFAULT_PRIVATE_PYPI_SERVER.replace("/simple", "")
        file_uri = f"{server}/packages/plette/plette-0.2.2-py2.py3-none-any.whl"
        with pipenv_instance_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    plette = {{file = "{file_uri}", extras = ["validation"]}}
    """
                f.write(contents)
            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_misc.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-zbzo1d2v-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 236ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-zbzo1d2v-tests-e3tlVm6M
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-zbzo1d2v-tests-e3tlVm6M
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4c51e85690>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4c51d5b850>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4c51d58f10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4c51d5bc10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4c51d5bee0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 174, in
_new_conn
    conn = connection.create_connection(
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/connection.py", line 95, in
create_connection
    raise err
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/connection.py", line 85, in
create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 716, in
urlopen
    httplib_response = self._make_request(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 416, in
_make_request
    conn.request(method, url, **httplib_request_kw)
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 244, in
request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 205, in
connect
    conn = self._new_conn()
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 186, in
_new_conn
    raise NewConnectionError(
pipenv.patched.pip._vendor.urllib3.exceptions.NewConnectionError:
<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at
0x7f4c51d5b220>: Failed to establish a new connection: [Errno 111] Connection
refused
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  [Previous line repeated 2 more times]
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 802, in
urlopen
    retries = retries.increment(
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/retry.py", line 594, in
increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
pipenv.patched.pip._vendor.urllib3.exceptions.MaxRetryError:
HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url:
/packages/plette/plette-0.2.2-py2.py3-none-any.whl (Caused by
NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnectio
n object at 0x7f4c51d5b220>: Failed to establish a new connection: [Errno 111]
Connection refused'))
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 233, in _make_base_candidate_from_link
    self._link_candidate_cache = LinkCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 310, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 321, in _prepare_distribution
    return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 532, in
prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 603, in
_prepare_linked_requirement
    local_file = unpack_url(
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 174, in
unpack_url
    file = get_http_url(
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 115, in
get_http_url
    from_path, content_type = download(link, temp_dir.path)
  File "/app/pipenv/patched/pip/_internal/network/download.py", line 174, in
__call__
    resp = _http_get_download(self._session, link)
  File "/app/pipenv/patched/pip/_internal/network/download.py", line 149, in
_http_get_download
    resp = session.get(target_url, headers=headers, stream=True)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
  File "/app/pipenv/patched/pip/_internal/network/session.py", line 523, in
request
    return super().request(method, url, *args, **kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 589, in
request
    resp = self.send(prep, **send_kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
pipenv.patched.pip._vendor.requests.exceptions.ConnectionError:
HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url:
/packages/plette/plette-0.2.2-py2.py3-none-any.whl (Caused by
NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnectio
n object at 0x7f4c51d5b220>: Failed to establish a new connection: [Errno 111]
Connection refused'))

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_local_tar_gz_file ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd3dbdf0>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.files
    @pytest.mark.local
    def test_local_tar_gz_file(pipenv_instance_private_pypi, testsroot):
        file_name = "requests-2.19.1.tar.gz"

        with pipenv_instance_private_pypi() as p:
            requests_path = p._pipfile.get_fixture_path(f"{file_name}")

            # This tests for a bug when installing a zipfile
            c = p.pipenv(f"install {requests_path}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install /app/tests/test_artifacts/requests-2.19.1.tar.gz', returncode=1, stdout='Install... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:278: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install /app/tests/test_artifacts/requests-2.19.1.tar.gz
Installing /app/tests/test_artifacts/requests-2.19.1.tar.gz...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-doh59kj0-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 239ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-doh59kj0-tests-kd6uJ4hZ
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-doh59kj0-tests-kd6uJ4hZ
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading /app/tests/test_artifacts/requests-2.19.1.tar.gz in  dependencies.
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_multiple_editable_packages_should_not_race ________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd3d8760>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.run
    @pytest.mark.files
    @pytest.mark.install
    def test_multiple_editable_packages_should_not_race(
        pipenv_instance_private_pypi, testsroot
    ):
        """Test for a race condition that can occur when installing multiple 'editable' packages at
        once, and which causes some of them to not be importable.

        This issue had been fixed for VCS packages already, but not local 'editable' packages.

        So this test locally installs packages from tarballs that have already been committed in
        the local `pypi` dir to avoid using VCS packages.
        """
        pkgs = ["six", "jinja2"]

        with pipenv_instance_private_pypi() as p:
            pipfile_string = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [dev-packages]

    [packages]
            """

            for pkg_name in pkgs:
                source_path = p._pipfile.get_fixture_path(f"git/{pkg_name}/")
                shutil.copytree(source_path, pkg_name)

                pipfile_string += (
                    f'"{pkg_name}" = {{path = "./{pkg_name}", editable = true}}\n'
                )

            with open(p.pipfile_path, "w") as f:
                f.write(pipfile_string.strip())

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:353: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ao6hnadt-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 203ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ao6hnadt-tests-CCX_PfJY
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ao6hnadt-tests-CCX_PfJY
Pipfile.lock not found, creating...
Locking  dependencies...
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: file:///tmp/pipenv-ao6hnadt-tests/six (from -r
/tmp/pipenv-vop4epto-requirements/pipenv-16u5l2vt-constraints.txt (line 3)) does
not appear to be a Python project: neither 'setup.py' nor 'pyproject.toml'
found.

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________ test_outdated_should_compare_postreleases_without_failing ___________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd41aa10>, index_url='http://localhost:8080/simple')

    @pytest.mark.skipif(
        os.name == "nt" and sys.version_info[:2] == (3, 8),
        reason="Seems to work on 3.8 but not via the CI",
    )
    @pytest.mark.outdated
    def test_outdated_should_compare_postreleases_without_failing(
        pipenv_instance_private_pypi,
    ):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install ibm-db-sa-py3==0.3.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install ibm-db-sa-py3==0.3.0', returncode=1, stdout='Installing ibm-db-sa-py3==0.3.0...\... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:369: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install ibm-db-sa-py3==0.3.0
Installing ibm-db-sa-py3==0.3.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-r8wr_zdh-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 248ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-r8wr_zdh-tests-8Q9R-y0M
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-r8wr_zdh-tests-8Q9R-y0M
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading ibm-db-sa-py3==0.3.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f07f9b94d90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f07f9b961a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f07f9b97ca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f07f9b97d60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f07fa378eb0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement ibm-db-sa-py3==0.3.0 (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for ibm-db-sa-py3==0.3.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_install_skip_lock ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd41ec80>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.skip_lock
    @pytest.mark.needs_internet
    def test_install_skip_lock(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = true
    name = "pypi"
    [packages]
    six = {}
                """.format(
                    p.index_url, '{version = "*", index = "pypi"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install --skip-lock")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install --skip-lock', returncode=1, stdout='Installing dependencies from Pipfile...\n', ...ERROR: No matching distribution found for six\nERROR: Couldn't install package: {}\n Package installation failed...\n").returncode

tests/integration/test_install_twists.py:410: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install --skip-lock
Installing dependencies from Pipfile...

Command failed...
----------------------------- Captured stderr call -----------------------------
The flag --skip-lock has been reintroduced (but is not recommended).  Without
the lock resolver it is difficult to manage multiple package indexes, and hash
checking is not provided.  However it can help manage installs with current
deficiencies in locking across platforms.
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-s8kd1mfx-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 226ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-s8kd1mfx-tests-GH7nTVBk
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-s8kd1mfx-tests-GH7nTVBk
Looking in indexes: http://localhost:8080/simple
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe74f5f4f10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe74f5f6740>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe74f5f4340>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe74f5f4130>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fe74f5f6500>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
ERROR: Could not find a version that satisfies the requirement six (from
versions: none)
ERROR: No matching distribution found for six
ERROR: Couldn't install package: {}
 Package installation failed...

_____________________ test_no_duplicate_source_on_install ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd20d0f0>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    def test_no_duplicate_source_on_install(pipenv_instance_private_pypi):
        """Ensure that running pipenv install with an index URL doesn't create duplicate [[source]] sections."""
        with pipenv_instance_private_pypi() as p:
            # Create initial Pipfile with a source
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
                """.strip()
                f.write(contents)

            # Install a package with a custom index
            c = p.pipenv(f"install six --index {p.index_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --index http://localhost:8080/simple', returncode=1, stdout='Installing six.... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:502: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --index http://localhost:8080/simple
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (3cbc06)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ew1bkz8q-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 228ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ew1bkz8q-tests-X69whryp
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ew1bkz8q-tests-X69whryp
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(ebffa69a1fa192d1cef7cb42ad79231ca976565c5ce371a70160b3048d3cbc06)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7efc869c9de0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7efc86b53c40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7efc86c18a60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7efc86c18bb0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7efc86c1a380>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_file_urls_work ______________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd577b50>, index_url='https://pypi.org/simple')

    @pytest.mark.urls
    @pytest.mark.files
    def test_file_urls_work(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            whl = Path(
                Path(__file__).resolve().parent.parent
                / "pypi"
                / "six"
                / "six-1.11.0-py2.py3-none-any.whl"
            )

            try:
                whl = whl.resolve()
            except OSError:
                whl = whl.absolute()
            wheel_url = whl.as_uri()
            c = p.pipenv(f'install "{wheel_url}"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install "file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl"', returncode=1, std... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:70: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install "file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl"
Installing file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl...
Installation Succeeded
Installing dependencies from Pipfile.lock (91492b)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-28r8v0qu-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 217ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-28r8v0qu-tests-kp-Oggv1
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-28r8v0qu-tests-kp-Oggv1
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(94ec0de252e24e5093d96f3e04e17e9824c4777320d90a21de8f1d3dc191492b)!
Upgrading file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl in
dependencies.
WARNING:pipenv.patched.pip._internal.req.constructors:Requirement
'../../app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl' looks like a
filename, but the file does not exist
WARNING:pipenv.patched.pip._internal.req.constructors:Requirement
'../../app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl' looks like a
filename, but the file does not exist
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 233, in _make_base_candidate_from_link
    self._link_candidate_cache = LinkCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 310, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 321, in _prepare_distribution
    return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 532, in
prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 637, in
_prepare_linked_requirement
    hash = hash_file(local_file.path)[0].hexdigest()
  File "/app/pipenv/patched/pip/_internal/utils/misc.py", line 622, in hash_file
    with open(path, "rb") as f:
FileNotFoundError: [Errno 2] No such file or directory:
'/app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl'

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_install_git_tag _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd574df0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_git_tag(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install git+https://github.com/benjaminp/six.git@1.11.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install git+https://github.com/benjaminp/six.git@1.11.0', returncode=1, stdout='Installi... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:99: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install git+https://github.com/benjaminp/six.git@1.11.0
Installing git+https://github.com/benjaminp/six.git@1.11.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-mwwnnsad-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-mwwnnsad-tests-qClzq6Ud
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-mwwnnsad-tests-qClzq6Ud
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
INFO:pipenv.patched.pip._internal.vcs.git:Cloning https://github.com/benjaminp/six.git (to revision 1.11.0) to /tmp/tmpkpoxmjez
INFO:pip.subprocessor:Running command git clone --filter=blob:none https://github.com/benjaminp/six.git /tmp/tmpkpoxmjez
INFO:pip.subprocessor:Cloning into '/tmp/tmpkpoxmjez'...
INFO:pip.subprocessor:Running command git checkout -q 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Resolved https://github.com/benjaminp/six.git to commit 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Cloning https://github.com/benjaminp/six.git (to revision 1.11.0) to /tmp/tmptqrwq38v
INFO:pip.subprocessor:Running command git clone --filter=blob:none https://github.com/benjaminp/six.git /tmp/tmptqrwq38v
INFO:pip.subprocessor:Cloning into '/tmp/tmptqrwq38v'...
INFO:pip.subprocessor:Running command git checkout -q 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Resolved https://github.com/benjaminp/six.git to commit 15e31431af97e5e64b80af0a3f598d382bcdd49a
Upgrading git+https://github.com/benjaminp/six.git@1.11.0 in  dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-2svllxc7/six_d12aa76096d940ad9c38737e7b31217b
INFO:pip.subprocessor:Running command git checkout -q
15e31431af97e5e64b80af0a3f598d382bcdd49a
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_install_named_index_alias ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd1c44f0>, index_url='http://localhost:8080/simple')

    @pytest.mark.urls
    @pytest.mark.index
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_named_index_alias(pipenv_instance_private_pypi):
        """Test that pipenv can install packages from different named index sources.

        This test verifies that the --index parameter works correctly with named aliases
        by setting up two different named sources and installing packages from each.
        """
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "secondary"

    [packages]
    six = "*"

    [dev-packages]
                """.strip()
                f.write(contents)

            # Test installing from the first named index
            c = p.pipenv("install click --index secondary")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install click --index secondary', returncode=1, stdout='Building requirements...\nResolv... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:142: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install click --index secondary
Building requirements...
Resolving dependencies...
Success!
Installing click...
Installation Succeeded
Installing dependencies from Pipfile.lock (451942)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-pes8n2ef-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-pes8n2ef-tests-6Rju-bRc
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-pes8n2ef-tests-6Rju-bRc
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(06c998ed3e851e0fc0d6f930b0ec71bae475eea6ad118384a4c449f619451942)!
Upgrading click in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f328211a5f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f328237e140>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f3281aae290>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f3281aad780>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f3281aacf10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement click (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for click

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_install_local_vcs_not_in_lockfile ____________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd0fb5e0>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_local_vcs_not_in_lockfile(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            # six_path = os.path.join(p.path, "six")
            six_path = p._pipfile.get_fixture_path("git/six/")
            c = subprocess_run(["git", "clone", six_path, "./six"])
>           assert c.returncode == 0
E           assert 128 == 0
E            +  where 128 = CompletedProcess(args=['git', 'clone', PosixPath('/app/tests/test_artifacts/git/six'), './six'], returncode=128, stdout='', stderr="fatal: repository '/app/tests/test_artifacts/git/six' does not exist\n").returncode

tests/integration/test_install_uri.py:197: AssertionError
______________________________ test_get_vcs_refs _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd7f6590>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_get_vcs_refs(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six', returncode=1, stdout... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:212: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six
Installing -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-wt4o1gt6-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 254ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-wt4o1gt6-tests-nVZ577qp
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-wt4o1gt6-tests-nVZ577qp
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six in
dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-fpv2v45f/six_97f3b19d656f439f840447bc6a9695ec
INFO:pip.subprocessor:Running command git checkout -q
5efb522b0647f7467248273ec1b893d06b984a59
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_vcs_entry_supersedes_non_vcs _______________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd5778b0>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_vcs_entry_supersedes_non_vcs(pipenv_instance_pypi):
        """See issue #2181 -- non-editable VCS dep was specified, but not showing up
        in the lockfile -- due to not running pip install before locking and not locking
        the resolution graph of non-editable vcs dependencies.
        """
        with pipenv_instance_pypi() as p:
            jinja2_uri = p._pipfile.get_fixture_path("git/jinja2").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    f"""
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
    Flask = "*"
    Jinja2 = {{ref = "2.11.0", git = "{jinja2_uri}"}}
                """.strip()
                )
            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:257: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-s50fzpsb-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 226ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-s50fzpsb-tests-aDqc4Zuo
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-s50fzpsb-tests-aDqc4Zuo
Pipfile.lock not found, creating...
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-s50fzpsb-tests-aDqc4Zuo/src/jinja2
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/jinja2' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-s50fzpsb-tests-aDqc4Zuo/src/jinja2 exited
with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-s50fzpsb-tests-aDqc4Zuo/src/jinja2 exited
with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________________ test_vcs_can_use_markers ___________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcedbee0>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_vcs_can_use_markers(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            path = p._pipfile.get_fixture_path("git/six/")
            p._pipfile.install(
                "six",
                {
                    "git": f"{path.as_uri()}",
                    "ref": "1.11.0",
                    "markers": "sys_platform == 'linux'",
                },
            )
            assert "six" in p.pipfile["packages"]
            c = p.pipenv("install -v")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -v', returncode=1, stdout='Building requirements...\nResolving dependencies...\n... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_install_uri.py:288: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -v
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.operations.prepare:Obtaining six from
git+file:/app/tests/test_artifacts/git/six@1.11.0#egg=six (from -r
/tmp/pipenv-962xptgw-requirements/pipenv-9r6y9lsd-constraints.txt (line 2))
INFO:pipenv.patched.pip._internal.vcs.git:Cloning
file:///app/tests/test_artifacts/git/six (to revision 1.11.0) to
/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ/src/six
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ/src/six
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/six' does not appear
to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ/src/six exited
with 128
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 212, in _make_base_candidate_from_link
    self._editable_candidate_cache = EditableCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 335, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 345, in _prepare_distribution
    return self._factory.preparer.prepare_editable_requirement(self._ireq)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 699, in
prepare_editable_requirement
    req.update_editable()
  File "/app/pipenv/patched/pip/_internal/req/req_install.py", line 697, in
update_editable
    vcs_backend.obtain(self.source_dir, url=hidden_url, verbosity=0)
  File "/app/pipenv/patched/pip/_internal/vcs/versioncontrol.py", line 502, in
obtain
    self.fetch_new(dest, url, rev_options, verbosity=verbosity)
  File "/app/pipenv/patched/pip/_internal/vcs/git.py", line 286, in fetch_new
    self.run_command(
  File "/app/pipenv/patched/pip/_internal/vcs/git.py", line 87, in run_command
    return super().run_command(*args, **kwargs)
  File "/app/pipenv/patched/pip/_internal/vcs/versioncontrol.py", line 631, in
run_command
    return call_subprocess(
  File "/app/pipenv/patched/pip/_internal/utils/subprocess.py", line 209, in
call_subprocess
    raise error
pipenv.patched.pip._internal.exceptions.InstallationSubprocessError: git clone
--filter=blob:none --quiet file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ/src/six exited
with 128
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ/src/six exited
with 128
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-1fypsn42-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 226ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-1fypsn42-tests-aJVZO_QJ
Pipfile.lock not found, creating...
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________ test_install_vcs_ref_by_commit_hash ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd41aa40>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_vcs_ref_by_commit_hash(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a59#egg=six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b98... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_vcs.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a59#egg=six
Installing -e
git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a5
9#egg=six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ad_b8995-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 234ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ad_b8995-tests-YpDpp4Jf
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ad_b8995-tests-YpDpp4Jf
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e
git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a5
9#egg=six in  dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-pd3r6xfj/six_2d268bd29df74af4b0996f1b8bd18091
INFO:pip.subprocessor:Running command git rev-parse -q --verify
'sha^5efb522b0647f7467248273ec1b893d06b984a59'
INFO:pip.subprocessor:Running command git fetch -q
https://github.com/benjaminp/six.git 5efb522b0647f7467248273ec1b893d06b984a59
INFO:pip.subprocessor:Running command git checkout -q
5efb522b0647f7467248273ec1b893d06b984a59
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_lock_handle_eggs _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf66440>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.requirements
    def test_lock_handle_eggs(pipenv_instance_private_pypi):
        """Ensure locking works with packages providing egg formats."""
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                f.write(
                    f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    RandomWords = "*"
                """
                )
            c = p.pipenv("lock --verbose")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --verbose', returncode=1, stdout='Building requirements...\nResolving dependencies.... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_lock.py:28: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --verbose
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.network.session:adding trusted host:
'localhost:8080' (from line 2 of
/tmp/pipenv-8g9t5agw-requirements/pipenv-00p0f_u3-constraints.txt)
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('RandomWords'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd1151b2110>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd1151b0df0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd114f55630>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd114f555a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd114f57400>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement RandomWords (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('RandomWords')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('RandomWords'),
parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for RandomWords
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
RandomWords
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-rdz8uj5u-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 223ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-rdz8uj5u-tests-RpAgoHpZ
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-rdz8uj5u-tests-RpAgoHpZ
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_lock_includes_hashes_for_all_platforms __________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd41e230>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_includes_hashes_for_all_platforms(pipenv_instance_private_pypi):
        """Locking should include hashes for *all* platforms, not just the
        platform we're running lock on."""

        # releases = pytest_pypi.app.packages['yarl'].releases

        releases = {
            "yarl-1.3.0-cp35-cp35m-manylinux1_x86_64.whl": "3890ab952d508523ef4881457c4099056546593fa05e93da84c7250516e632eb",
            "yarl-1.3.0-cp35-cp35m-win_amd64.whl": "b25de84a8c20540531526dfbb0e2d2b648c13fd5dd126728c496d7c3fea33310",
            "yarl-1.3.0-cp36-cp36m-manylinux1_x86_64.whl": "5badb97dd0abf26623a9982cd448ff12cb39b8e4c94032ccdedf22ce01a64842",
            "yarl-1.3.0-cp36-cp36m-win_amd64.whl": "c6e341f5a6562af74ba55205dbd56d248daf1b5748ec48a0200ba227bb9e33f4",
            "yarl-1.3.0-cp37-cp37m-win_amd64.whl": "73f447d11b530d860ca1e6b582f947688286ad16ca42256413083d13f260b7a0",
            "yarl-1.3.0.tar.gz": "024ecdc12bc02b321bc66b41327f930d1c2c543fa9a561b39861da9388ba7aa9",
        }

        def get_hash(release_name):
            # Convert a specific filename to a hash like what would show up in a Pipfile.lock.
            # For example:
            # 'yarl-1.3.0-cp35-cp35m-manylinux1_x86_64.whl' -> 'sha256:3890ab952d508523ef4881457c4099056546593fa05e93da84c7250516e632eb'
            return f"sha256:{releases[release_name]}"

        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    yarl = "==1.3.0"
                """.strip()
                f.write(contents)

            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:141: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-j3b2fvqa-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 225ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-j3b2fvqa-tests-5P3ZmxoM
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-j3b2fvqa-tests-5P3ZmxoM
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7367c4c100>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f73680ed180>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f73680ee1d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7367c10f70>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7367c12710>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement yarl==1.3.0 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for yarl==1.3.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________________ test_complex_lock_with_vcs_deps ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf66cb0>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.complex
    @pytest.mark.needs_internet
    def test_complex_lock_with_vcs_deps(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            dateutil_uri = p._pipfile.get_fixture_path("git/dateutil").as_uri()
            with open(p.pipfile_path, "w") as f:
                contents = (
                    """
    [packages]
    click = "==6.7"

    [dev-packages]
    requests = {git = "%s"}
                """.strip()
                    % requests_uri
                )
                f.write(contents)

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nSuc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:188: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Success!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ak77jyi1-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 268ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ak77jyi1-tests-tf0i07BR
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ak77jyi1-tests-tf0i07BR
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ak77jyi1-tests-tf0i07BR/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ak77jyi1-tests-tf0i07BR/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ak77jyi1-tests-tf0i07BR/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________________ test_lock_updated_source ___________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd41f460>, index_url='http://localhost:8080/simple')

    @pytest.mark.index
    @pytest.mark.install
    def test_lock_updated_source(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{url}/${{MY_ENV_VAR}}"
    name = "localpypi"
    verify_ssl = false

    [packages]
    requests = "==2.14.0"
                """.strip().format(
                    url=p.pypi
                )
                f.write(contents)

            with temp_environ():
                os.environ["MY_ENV_VAR"] = "simple"
                c = p.pipenv("lock")
>               assert c.returncode == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:344: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-8govln_o-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 262ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-8govln_o-tests-wgNBMEMr
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-8govln_o-tests-wgNBMEMr
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc158f75240>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc158f75150>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc158f763e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc158f74af0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc158f74f70>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests==2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests==2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_lock_editable_vcs_without_install ____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd20c7c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/six").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    six = {git = "%s", editable = true}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:381: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-j0zdb40x-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 267ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-j0zdb40x-tests-gbUVfoN7
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-j0zdb40x-tests-gbUVfoN7
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-j0zdb40x-tests-gbUVfoN7/src/six
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/six' does not appear
to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-j0zdb40x-tests-gbUVfoN7/src/six exited
with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-j0zdb40x-tests-gbUVfoN7/src/six exited
with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_lock_editable_vcs_with_ref_in_git ____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd1bd870>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_ref_in_git(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s@883caaf", editable = true}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:400: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-kwbq044p-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-kwbq044p-tests-HLkkXE2R
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-kwbq044p-tests-HLkkXE2R
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-kwbq044p-tests-HLkkXE2R/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-kwbq044p-tests-HLkkXE2R/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-kwbq044p-tests-HLkkXE2R/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________ test_lock_editable_vcs_with_extras_without_install ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf8e0b0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.extras
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_extras_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s", editable = true, extras = ["socks"]}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:424: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-8e69q9f3-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 243ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-8e69q9f3-tests-1b8O3nBI
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-8e69q9f3-tests-1b8O3nBI
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-8e69q9f3-tests-1b8O3nBI/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-8e69q9f3-tests-1b8O3nBI/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-8e69q9f3-tests-1b8O3nBI/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________ test_lock_editable_vcs_with_markers_without_install ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc5f5f60>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_markers_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s", editable = true, markers = "python_version >= '2.6'"}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:447: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-31am18y0-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 223ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-31am18y0-tests-NvC1DOzA
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-31am18y0-tests-NvC1DOzA
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-31am18y0-tests-NvC1DOzA/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-31am18y0-tests-NvC1DOzA/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-31am18y0-tests-NvC1DOzA/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_vcs_lock_respects_top_level_pins _____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf8f700>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    def test_vcs_lock_respects_top_level_pins(pipenv_instance_private_pypi):
        """Test that locking VCS dependencies respects top level packages pinned in Pipfiles"""

        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            p._pipfile.add(
                "requests", {"editable": True, "git": f"{requests_uri}", "ref": "v2.18.4"}
            )
            p._pipfile.add("urllib3", "==1.21.1")
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:488: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-20afz628-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-20afz628-tests-I5bT6mWb
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-20afz628-tests-I5bT6mWb
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-20afz628-tests-I5bT6mWb/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-20afz628-tests-I5bT6mWb/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-20afz628-tests-I5bT6mWb/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_lock_nested_direct_url __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf8f3d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_nested_direct_url(pipenv_instance_private_pypi):
        """
        The dependency 'test_package' has a declared dependency on
        a PEP508 style VCS URL. This ensures that we capture the dependency
        here along with its own dependencies.
        """
        with pipenv_instance_private_pypi(pipfile=False) as p:
            contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = true
    name = "local"

    [packages]
    test_package = "*"
                    """.strip()
            with open(p.pipfile_path, "w") as f:
                f.write(contents)
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:542: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-39l2nzsf-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 239ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-39l2nzsf-tests-Pvxw3uX1
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-39l2nzsf-tests-Pvxw3uX1
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7a33291090>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7a33291e40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7a33292800>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7a332929e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7a33292470>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement test_package (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for test_package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________ test_lock_package_with_compatible_release_specifier ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fcf8e320>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.install
    def test_lock_package_with_compatible_release_specifier(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six~=1.11")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six~=1.11', returncode=1, stdout='Installing six~=1.11...\nInstallation Succeede... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:579: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six~=1.11
Installing six~=1.11...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-4kh0fiuv-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 230ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-4kh0fiuv-tests-YfZCCbFB
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-4kh0fiuv-tests-YfZCCbFB
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six~=1.11 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbd49e14df0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbd49e16b90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbd49e15480>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbd4a60e170>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbd4a1a90c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six~=1.11 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six~=1.11

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_pipenv_respects_package_index_restrictions ________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc5f41f0>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.lock
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_pipenv_respects_package_index_restrictions(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [[source]]
    url = "{url}"
    verify_ssl = true
    name = "local"

    [packages]
    requests = {requirement}
                    """.strip().format(
                    url=p.index_url, requirement='{version="*", index="local"}'
                )
                f.write(contents)

            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:625: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-f15z157g-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 211ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-f15z157g-tests-9coVOd56
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-f15z157g-tests-9coVOd56
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f22e225b220>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f22e22595d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f22e24b6980>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f22e1eba2f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f22e1eb9d50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-mr13e9ch-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 232ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-mr13e9ch-tests-hBWW5sWG
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-mr13e9ch-tests-hBWW5sWG
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f68a1a62920>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f68a1a63820>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f68a2163070>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f68a1a62b00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f68a1c57160>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_dev_lock_use_default_packages_as_constraint _______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc5fe290>, index_url='http://localhost:8080/simple')

    @pytest.mark.dev
    @pytest.mark.lock
    @pytest.mark.install
    def test_dev_lock_use_default_packages_as_constraint(pipenv_instance_private_pypi):
        # See https://github.com/pypa/pipenv/issues/4371
        # See https://github.com/pypa/pipenv/issues/2987
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    requests = "<=2.14.0"

    [dev-packages]
    requests = "*"
                    """.strip()
                f.write(contents)

            c = p.pipenv("lock --dev")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --dev', returncode=1, stdout='Building requirements...\nResolving dependencies...\n... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:666: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --dev
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-gj_376f4-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-gj_376f4-tests-I2w4Fm7g
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-gj_376f4-tests-I2w4Fm7g
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4fcf087190>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4fcf086ef0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4fcf087e50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4fcf084ca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4fcf0878b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests<=2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests<=2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_lock_specific_named_category _______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd39a8f0>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_specific_named_category(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi(pipfile=False) as p:
            contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = true
    name = "test"

    [packages]
    requests = "*"

    [prereq]
    six = "*"
            """.strip()
            with open(p.pipfile_path, "w") as f:
                f.write(contents)
            c = p.pipenv("lock --categories prereq")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --categories prereq', returncode=1, stdout='Building requirements...\nResolving dep... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:697: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --categories prereq
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-olh_gngh-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 224ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-olh_gngh-tests-kWhuDwC9
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-olh_gngh-tests-kWhuDwC9
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f57cb77f2e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f57cbd7ebc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f57cbab35e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f57cb77f100>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f57cb77dae0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_update_locks _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd574ca0>, index_url='http://localhost:8080/simple')

    @pytest.mark.update
    @pytest.mark.lock
    def test_update_locks(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install jdcal==1.3")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install jdcal==1.3', returncode=1, stdout='Installing jdcal==1.3...\nInstallation Succee... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_pipenv.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install jdcal==1.3
Installing jdcal==1.3...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ja3d516u-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 233ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ja3d516u-tests-YdUVRSeY
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ja3d516u-tests-YdUVRSeY
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading jdcal==1.3 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84e0cae6b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84e0cadf30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84e0cae020>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84e0caf280>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84e0cafa00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement jdcal==1.3 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for jdcal==1.3

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_get_source[True] _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc5fec20>, index_url='http://localhost:8080/simple')
lock_first = True

    @pytest.mark.project
    @pytest.mark.sources
    @pytest.mark.parametrize("lock_first", [True, False])
    def test_get_source(pipenv_instance_private_pypi, lock_first):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
    pytz = "*"
    six = {{version = "*", index = "pypi"}}

    [dev-packages]
                """.strip()
                f.write(contents)

            if lock_first:
                # force source to be cached
                c = p.pipenv("lock")
>               assert c.returncode == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_project.py:64: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-7tx9lxm3-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 258ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-7tx9lxm3-tests-WyAxywEL
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-7tx9lxm3-tests-WyAxywEL
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd85ea19ff0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd85ea19030>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd85ea184f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd85ea196f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd85ea1a9e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement pytz (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for pytz

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_mirror_lock_sync _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd1c5180>, index_url='http://localhost:8080/simple')

    @pytest.mark.sync
    @pytest.mark.lock
    def test_mirror_lock_sync(pipenv_instance_private_pypi):
        with temp_environ(), pipenv_instance_private_pypi() as p:
            mirror_url = p.index_url
            assert "pypi.org" not in mirror_url
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [[source]]
    name = "pypi"
    url = "https://pypi.org/simple"
    verify_ssl = true

    [packages]
    six = "==1.12.0"
                """.strip()
                )
            c = p.pipenv(f"lock --pypi-mirror {mirror_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --pypi-mirror http://localhost:8080/simple', returncode=1, stdout='Building require... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_sync.py:41: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --pypi-mirror http://localhost:8080/simple
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-12b6f6t9-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 286ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-12b6f6t9-tests-9xE7Wy9C
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-12b6f6t9-tests-9xE7Wy9C
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd97b4160e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd97b7e2ce0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd97bc80ac0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd97bc80610>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd97bc80f40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six==1.12.0 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six==1.12.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_uninstall_django _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc68c3d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.uninstall
    @pytest.mark.skipif(
        sys.version_info >= (3, 12), reason="Package does not work with Python 3.12"
    )
    def test_uninstall_django(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install Django")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install Django', returncode=1, stdout='Installing Django...\nInstallation Succeeded\nIns... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:31: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install Django
Installing Django...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-jrxcaavm-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 227ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-jrxcaavm-tests-eDtBqs5T
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-jrxcaavm-tests-eDtBqs5T
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading Django in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2aad4579d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2aad457cd0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2aad456da0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2aad455960>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2aad455f00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement django (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for django

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_mirror_uninstall _____________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc68c280>, index_url='https://pypi.org/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    @pytest.mark.skipif(
        sys.version_info >= (3, 12), reason="Package does not work with Python 3.12"
    )
    def test_mirror_uninstall(pipenv_instance_pypi):
        with temp_environ(), pipenv_instance_pypi() as p:
            mirror_url = DEFAULT_PRIVATE_PYPI_SERVER
            assert "pypi.org" not in mirror_url

            c = p.pipenv(f"install Django --pypi-mirror {mirror_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install Django --pypi-mirror http://localhost:8080/simple', returncode=1, stdout='Instal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:60: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install Django --pypi-mirror http://localhost:8080/simple
Installing Django...
Installation Succeeded
Installing dependencies from Pipfile.lock (91492b)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-4w2_825x-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 200ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-4w2_825x-tests-8VeaaFHa
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-4w2_825x-tests-8VeaaFHa
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(94ec0de252e24e5093d96f3e04e17e9824c4777320d90a21de8f1d3dc191492b)!
Upgrading Django in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f37d22a56c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f37d22a62c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f37d296a110>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f37d2915810>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f37d22a5810>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement django (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for django

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_uninstall_all_local_files ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc666cb0>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.files
    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_all_local_files(pipenv_instance_private_pypi, testsroot):
        with pipenv_instance_private_pypi() as p:
            file_uri = p._pipfile.get_fixture_path(
                "tablib/tablib-0.12.1.tar.gz", fixtures="pypi"
            ).as_uri()
            c = p.pipenv(f"install {file_uri}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz', returncode=1, stdout='Insta...or \'rb\')\nFileNotFoundError: [Errno 2] No such file or directory: \'/app/tests/pypi/tablib/tablib-0.12.1.tar.gz\'\n').returncode

tests/integration/test_uninstall.py:97: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz
Installing file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz...

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-_0eztju4-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 228ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-_0eztju4-tests-sumlpMzY
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-_0eztju4-tests-sumlpMzY
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pipenv", line 8, in <module>
    sys.exit(cli())
  File "/app/pipenv/vendor/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/app/pipenv/cli/options.py", line 51, in main
    return super().main(*args, **kwargs, windows_expand_args=False)
  File "/app/pipenv/vendor/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/app/pipenv/vendor/click/core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/app/pipenv/vendor/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/app/pipenv/vendor/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/app/pipenv/vendor/click/decorators.py", line 92, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/app/pipenv/vendor/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/app/pipenv/cli/command.py", line 208, in install
    do_install(
  File "/app/pipenv/routines/install.py", line 318, in do_install
    new_packages, _ = handle_new_packages(
  File "/app/pipenv/routines/install.py", line 85, in handle_new_packages
    added, cat, normalized_name = project.add_package_to_pipfile(
  File "/app/pipenv/project.py", line 1240, in add_package_to_pipfile
    name, normalized_name, entry = self.generate_package_pipfile_entry(
  File "/app/pipenv/project.py", line 1174, in generate_package_pipfile_entry
    req_name = determine_package_name(package)
  File "/app/pipenv/utils/dependencies.py", line 838, in determine_package_name
    req_name = find_package_name_from_tarball(package.link.file_path)
  File "/app/pipenv/utils/dependencies.py", line 646, in find_package_name_from_tarball
    with tarfile.open(tarball_filepath, "r") as tar_ref:
  File "/usr/lib/python3.10/tarfile.py", line 1829, in open
    return func(name, "r", fileobj, **kwargs)
  File "/usr/lib/python3.10/tarfile.py", line 1895, in gzopen
    fileobj = GzipFile(name, mode + "b", compresslevel, fileobj)
  File "/usr/lib/python3.10/gzip.py", line 174, in __init__
    fileobj = self.myfileobj = builtins.open(filename, mode or 'rb')
FileNotFoundError: [Errno 2] No such file or directory: '/app/tests/pypi/tablib/tablib-0.12.1.tar.gz'

____________________________ test_uninstall_all_dev ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc68e260>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_all_dev(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    name = "pypi"
    url = "{p.index_url}"
    verify_ssl = true

    [packages]
    tablib = "*"

    [dev-packages]
    jinja2 = "==2.11.1"
    six = "==1.12.0"
            """
                f.write(contents)

            c = p.pipenv("install -v --dev")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -v --dev', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_uninstall.py:127: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -v --dev
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('tablib'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f409a091150>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f409a0916f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f409a092470>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f409a093250>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f409a093400>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement tablib (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('tablib')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('tablib'),
parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for tablib
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
tablib
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-oi26_5xk-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 235ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-oi26_5xk-tests-onnZwwrZ
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-oi26_5xk-tests-onnZwwrZ
Pipfile.lock not found, creating...
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_uninstall_missing_parameters _______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fd7f7a30>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_missing_parameters(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstallin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:203: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Warning: the environment variable LANG is not set!
We recommend setting this in ~/.profile (or equivalent) for proper expected
behavior.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-vfccwmjs-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-vfccwmjs-tests-kdX-usDz
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.1.1, setuptools==80.3.1
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-vfccwmjs-tests-kdX-usDz
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2fbbe4ba00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2fbbe4b2b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2fbbe4a4d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2fbbe4ad40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2fbbe4af20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_update_outdated_with_outdated_package[] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc601d80>, index_url='http://localhost:8080/simple')
cmd_option = ''

    @pytest.mark.parametrize("cmd_option", ["", "--dev"])
    @pytest.mark.basic
    @pytest.mark.update
    @pytest.mark.skipif(
        "os.name == 'nt' and sys.version_info[:2] == (3, 8)",
        reason="Seems to work on 3.8 but not via the CI",
    )
    def test_update_outdated_with_outdated_package(pipenv_instance_private_pypi, cmd_option):
        with pipenv_instance_private_pypi() as p:
            package_name = "six"
            p.pipenv(f"install {cmd_option} {package_name}==1.11")
            c = p.pipenv(f"update {package_name} {cmd_option} --outdated")
>           assert f"Package '{package_name}' out-of-date:" in c.stdout
E           assert "Package 'six' out-of-date:" in 'All packages are up to date!\n'
E            +  where 'All packages are up to date!\n' = CompletedProcess(args='pipenv update six  --outdated', returncode=0, stdout='All packages are up to date!\n', stderr="...on object at 0x7f64e779d120>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/\n").stdout

tests/integration/test_update.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv update six  --outdated
All packages are up to date!

----------------------------- Captured stderr call -----------------------------
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779e7d0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779e560>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779e350>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779e140>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779df30>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779d990>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779d750>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779d540>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779d330>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f64e779d120>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/

______________ test_update_outdated_with_outdated_package[--dev] _______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7fd0fc601ed0>, index_url='http://localhost:8080/simple')
cmd_option = '--dev'

    @pytest.mark.parametrize("cmd_option", ["", "--dev"])
    @pytest.mark.basic
    @pytest.mark.update
    @pytest.mark.skipif(
        "os.name == 'nt' and sys.version_info[:2] == (3, 8)",
        reason="Seems to work on 3.8 but not via the CI",
    )
    def test_update_outdated_with_outdated_package(pipenv_instance_private_pypi, cmd_option):
        with pipenv_instance_private_pypi() as p:
            package_name = "six"
            p.pipenv(f"install {cmd_option} {package_name}==1.11")
            c = p.pipenv(f"update {package_name} {cmd_option} --outdated")
>           assert f"Package '{package_name}' out-of-date:" in c.stdout
E           assert "Package 'six' out-of-date:" in 'All packages are up to date!\n'
E            +  where 'All packages are up to date!\n' = CompletedProcess(args='pipenv update six --dev --outdated', returncode=0, stdout='All packages are up to date!\n', std...on object at 0x7fec3e27d900>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/\n").stdout

tests/integration/test_update.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv update six --dev --outdated
All packages are up to date!

----------------------------- Captured stderr call -----------------------------
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27efb0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27ed40>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27eb30>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27e920>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27e710>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27e170>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27df30>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27dd20>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27db10>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fec3e27d900>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/

=============================== warnings summary ===============================
../root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/config/__init__.py:1474
  /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: plugins

    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

tests/integration/conftest.py:47
  /app/tests/integration/conftest.py:47: RuntimeWarning: Failed connecting to internet: http://httpbin.org/ip
    warnings.warn(

tests/integration/test_import_requirements.py::test_auth_with_pw_redacted
tests/integration/test_import_requirements.py::test_auth_with_pw_redacted
  /app/pipenv/patched/pip/_vendor/pkg_resources/__init__.py:3116: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('sphinxcontrib')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
===Flaky Test Report===

test_platform_python_implementation_marker failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_install_markers.py:49>]
test_platform_python_implementation_marker failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_install_markers.py:49>]
test_specific_package_environment_markers passed 1 out of the required 1 times. Success!
test_top_level_overrides_environment_markers passed 1 out of the required 1 times. Success!
test_global_overrides_environment_markers failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_install_markers.py:130>]
test_global_overrides_environment_markers failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_install_markers.py:130>]
test_resolver_unique_markers passed 1 out of the required 1 times. Success!
test_environment_variable_value_does_not_change_hash passed 1 out of the required 1 times. Success!
test_complex_deps_lock_and_install_properly passed 1 out of the required 1 times. Success!
test_pipenv_respects_package_index_restrictions failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_lock.py:625>]
test_pipenv_respects_package_index_restrictions failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1670>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:156>, <TracebackEntry /app/tests/integration/test_lock.py:625>]

===End Flaky Test Report===
=========================== short test summary info ============================
SKIPPED [1] tests/integration/test_cli.py:153: This test will be revisited with the safety changes
SKIPPED [2] tests/integration/test_cli.py:184: This test will be revisited with the safety changes
SKIPPED [1] tests/integration/test_cli.py:272: This test clears the cache that other tests may be using.
SKIPPED [1] tests/integration/test_install_basic.py:610: pip 23.3 now vendors in truststore and so test assumptions invalid
SKIPPED [1] tests/integration/test_install_twists.py:185: This test modifies os.environment which has side effects on other tests
SKIPPED [1] tests/integration/test_install_twists.py:223: unconditional skip
SKIPPED [1] tests/integration/test_windows.py:13: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:39: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:54: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:69: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:86: only relevant on windows
SKIPPED [6] tests/unit/test_utils.py:345: Windows file paths tested
SKIPPED [1] tests/unit/test_utils.py:552: Windows test only
SKIPPED [1] tests/unit/test_utils_windows_executable.py:15: Windows test only
SKIPPED [1] tests/unit/test_utils_windows_executable.py:30: Windows test only
FAILED tests/integration/test_cli.py::test_pipenv_graph_reverse - AssertionEr...
FAILED tests/integration/test_cli.py::test_pipenv_clean - AssertionError: ass...
FAILED tests/integration/test_install_basic.py::test_basic_install - Assertio...
FAILED tests/integration/test_install_basic.py::test_extras_install - Asserti...
FAILED tests/integration/test_install_basic.py::test_skip_requirements_when_pipfile
FAILED tests/integration/test_install_basic.py::test_install_does_not_extrapolate_environ
FAILED tests/integration/test_install_basic.py::test_system_and_deploy_work
FAILED tests/integration/test_install_basic.py::test_install_package_with_dots
FAILED tests/integration/test_install_basic.py::test_rewrite_outline_table - ...
FAILED tests/integration/test_install_basic.py::test_rewrite_outline_table_ooo
FAILED tests/integration/test_install_basic.py::test_install_dev_use_default_constraints
FAILED tests/integration/test_install_categories.py::test_basic_category_install
FAILED tests/integration/test_install_categories.py::test_multiple_category_install[prereq other]
FAILED tests/integration/test_install_categories.py::test_multiple_category_install[prereq, other]
FAILED tests/integration/test_install_markers.py::test_platform_python_implementation_marker
FAILED tests/integration/test_install_markers.py::test_global_overrides_environment_markers
FAILED tests/integration/test_install_misc.py::test_install_uri_with_extras
FAILED tests/integration/test_install_twists.py::test_local_tar_gz_file - Ass...
FAILED tests/integration/test_install_twists.py::test_multiple_editable_packages_should_not_race
FAILED tests/integration/test_install_twists.py::test_outdated_should_compare_postreleases_without_failing
FAILED tests/integration/test_install_twists.py::test_install_skip_lock - ass...
FAILED tests/integration/test_install_twists.py::test_no_duplicate_source_on_install
FAILED tests/integration/test_install_uri.py::test_file_urls_work - assert 1 ...
FAILED tests/integration/test_install_uri.py::test_install_git_tag - Assertio...
FAILED tests/integration/test_install_uri.py::test_install_named_index_alias
FAILED tests/integration/test_install_uri.py::test_install_local_vcs_not_in_lockfile
FAILED tests/integration/test_install_uri.py::test_get_vcs_refs - AssertionEr...
FAILED tests/integration/test_install_uri.py::test_vcs_entry_supersedes_non_vcs
FAILED tests/integration/test_install_uri.py::test_vcs_can_use_markers - asse...
FAILED tests/integration/test_install_vcs.py::test_install_vcs_ref_by_commit_hash
FAILED tests/integration/test_lock.py::test_lock_handle_eggs - assert 1 == 0
FAILED tests/integration/test_lock.py::test_lock_includes_hashes_for_all_platforms
FAILED tests/integration/test_lock.py::test_complex_lock_with_vcs_deps - Asse...
FAILED tests/integration/test_lock.py::test_lock_updated_source - AssertionEr...
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_without_install
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_ref_in_git
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_extras_without_install
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_markers_without_install
FAILED tests/integration/test_lock.py::test_vcs_lock_respects_top_level_pins
FAILED tests/integration/test_lock.py::test_lock_nested_direct_url - Assertio...
FAILED tests/integration/test_lock.py::test_lock_package_with_compatible_release_specifier
FAILED tests/integration/test_lock.py::test_pipenv_respects_package_index_restrictions
FAILED tests/integration/test_lock.py::test_dev_lock_use_default_packages_as_constraint
FAILED tests/integration/test_lock.py::test_lock_specific_named_category - As...
FAILED tests/integration/test_pipenv.py::test_update_locks - AssertionError: ...
FAILED tests/integration/test_project.py::test_get_source[True] - AssertionEr...
FAILED tests/integration/test_sync.py::test_mirror_lock_sync - AssertionError...
FAILED tests/integration/test_uninstall.py::test_uninstall_django - Assertion...
FAILED tests/integration/test_uninstall.py::test_mirror_uninstall - Assertion...
FAILED tests/integration/test_uninstall.py::test_uninstall_all_local_files - ...
FAILED tests/integration/test_uninstall.py::test_uninstall_all_dev - assert 1...
FAILED tests/integration/test_uninstall.py::test_uninstall_missing_parameters
FAILED tests/integration/test_update.py::test_update_outdated_with_outdated_package[]
FAILED tests/integration/test_update.py::test_update_outdated_with_outdated_package[--dev]
===== 54 failed, 337 passed, 21 skipped, 4 warnings in 2250.93s (0:37:30) ======
