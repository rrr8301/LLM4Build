info: syncing channel updates for 'stable-x86_64-unknown-linux-gnu'

  stable-x86_64-unknown-linux-gnu unchanged - rustc 1.89.0 (29483883e 2025-08-04)

info: checking for self-update
info: syncing channel updates for 'beta-x86_64-unknown-linux-gnu'
info: latest update on 2025-08-30, rust version 1.90.0-beta.7 (fb918cec0 2025-08-29)
info: downloading component 'cargo'
info: downloading component 'clippy'
info: downloading component 'rust-docs'
info: downloading component 'rust-std'
info: downloading component 'rustc'
info: downloading component 'rustfmt'
info: installing component 'cargo'
info: installing component 'clippy'
info: installing component 'rust-docs'
info: installing component 'rust-std'
info: installing component 'rustc'
info: installing component 'rustfmt'

  beta-x86_64-unknown-linux-gnu installed - rustc 1.90.0-beta.7 (fb918cec0 2025-08-29)

info: checking for self-update
info: syncing channel updates for 'nightly-x86_64-unknown-linux-gnu'
info: latest update on 2025-09-08, rust version 1.91.0-nightly (12eb345e5 2025-09-07)
info: downloading component 'cargo'
info: downloading component 'clippy'
info: downloading component 'rust-docs'
info: downloading component 'rust-std'
info: downloading component 'rustc'
info: downloading component 'rustfmt'
info: installing component 'cargo'
info: installing component 'clippy'
info: installing component 'rust-docs'
info: installing component 'rust-std'
info: installing component 'rustc'
info: installing component 'rustfmt'

  nightly-x86_64-unknown-linux-gnu installed - rustc 1.91.0-nightly (12eb345e5 2025-09-07)

info: checking for self-update
Running tests on Rust stable
info: using existing install for 'stable-x86_64-unknown-linux-gnu'

info: default toolchain set to 'stable-x86_64-unknown-linux-gnu'
  stable-x86_64-unknown-linux-gnu unchanged - rustc 1.89.0 (29483883e 2025-08-04)

    Updating crates.io index
     Locking 88 packages to latest compatible versions
 Downloading crates ...
  Downloaded equivalent v1.0.2
  Downloaded async-stream v0.3.6
  Downloaded cfg-if v1.0.3
  Downloaded env_logger v0.8.4
  Downloaded byteorder v1.5.0
  Downloaded autocfg v1.5.0
  Downloaded bytes v1.10.1
  Downloaded async-stream-impl v0.3.6
  Downloaded sync_wrapper v1.0.2
  Downloaded fnv v1.0.7
  Downloaded tokio-test v0.4.4
  Downloaded thread_local v1.1.9
  Downloaded slab v0.4.11
  Downloaded ppv-lite86 v0.2.21
  Downloaded tokio-macros v2.5.0
  Downloaded pin-utils v0.1.0
  Downloaded futures-task v0.3.31
  Downloaded lazy_static v1.5.0
  Downloaded futures-io v0.3.31
  Downloaded futures-executor v0.3.31
  Downloaded futures-core v0.3.31
  Downloaded rand_chacha v0.9.0
  Downloaded itoa v1.0.15
  Downloaded rand_core v0.6.4
  Downloaded pin-project-lite v0.2.16
  Downloaded futures-sink v0.3.31
  Downloaded futures-channel v0.3.31
  Downloaded futures-macro v0.3.31
  Downloaded tokio-stream v0.1.17
  Downloaded rand_core v0.9.3
  Downloaded quickcheck v1.0.3
  Downloaded num-traits v0.2.19
  Downloaded unicode-ident v1.0.18
  Downloaded proc-macro2 v1.0.101
  Downloaded futures v0.3.31
  Downloaded tracing-core v0.1.34
  Downloaded sharded-slab v0.1.7
  Downloaded getrandom v0.3.3
  Downloaded once_cell v1.21.3
  Downloaded rand v0.8.5
  Downloaded tracing v0.1.41
  Downloaded rand v0.9.2
  Downloaded http v1.3.1
  Downloaded indexmap v2.11.0
  Downloaded tokio-util v0.7.16
  Downloaded hashbrown v0.15.5
  Downloaded regex v1.11.2
  Downloaded futures-util v0.3.31
  Downloaded tracing-subscriber v0.3.20
  Downloaded aho-corasick v1.1.3
  Downloaded zerocopy v0.8.27
  Downloaded memchr v2.7.5
  Downloaded syn v2.0.106
  Downloaded nu-ansi-term v0.50.1
  Downloaded log v0.4.28
  Downloaded hdrhistogram v7.5.4
  Downloaded regex-syntax v0.8.6
  Downloaded quote v1.0.40
  Downloaded getrandom v0.2.16
  Downloaded regex-automata v0.4.10
  Downloaded libc v0.2.175
  Downloaded tokio v1.47.1
   Compiling proc-macro2 v1.0.101
   Compiling unicode-ident v1.0.18
   Compiling pin-project-lite v0.2.16
   Compiling futures-core v0.3.31
   Compiling memchr v2.7.5
   Compiling bytes v1.10.1
   Compiling futures-sink v0.3.31
   Compiling cfg-if v1.0.3
   Compiling libc v0.2.175
   Compiling tower-layer v0.3.3 (/app/tower-layer)
   Compiling futures-task v0.3.31
   Compiling pin-utils v0.1.0
   Compiling slab v0.4.11
   Compiling futures-io v0.3.31
   Compiling tower-service v0.3.3 (/app/tower-service)
   Compiling autocfg v1.5.0
   Compiling log v0.4.28
   Compiling once_cell v1.21.3
   Compiling getrandom v0.3.3
   Compiling zerocopy v0.8.27
   Compiling regex-syntax v0.8.6
   Compiling hashbrown v0.15.5
   Compiling equivalent v1.0.2
   Compiling byteorder v1.5.0
   Compiling itoa v1.0.15
   Compiling fnv v1.0.7
   Compiling sync_wrapper v1.0.2
   Compiling lazy_static v1.5.0
   Compiling nu-ansi-term v0.50.1
   Compiling thread_local v1.1.9
   Compiling futures-channel v0.3.31
   Compiling sharded-slab v0.1.7
   Compiling tracing-core v0.1.34
   Compiling num-traits v0.2.19
   Compiling aho-corasick v1.1.3
   Compiling tracing v0.1.41
   Compiling indexmap v2.11.0
   Compiling http v1.3.1
   Compiling tracing-subscriber v0.3.20
   Compiling quote v1.0.40
   Compiling syn v2.0.106
   Compiling getrandom v0.2.16
   Compiling rand_core v0.6.4
   Compiling rand_core v0.9.3
   Compiling hdrhistogram v7.5.4
   Compiling rand v0.8.5
   Compiling regex-automata v0.4.10
   Compiling ppv-lite86 v0.2.21
   Compiling rand_chacha v0.9.0
   Compiling rand v0.9.2
   Compiling regex v1.11.2
   Compiling env_logger v0.8.4
   Compiling tokio-macros v2.5.0
   Compiling futures-macro v0.3.31
   Compiling async-stream-impl v0.3.6
   Compiling quickcheck v1.0.3
   Compiling tokio v1.47.1
   Compiling async-stream v0.3.6
   Compiling futures-util v0.3.31
   Compiling tokio-stream v0.1.17
   Compiling tokio-util v0.7.16
   Compiling tokio-test v0.4.4
   Compiling tower-test v0.4.1 (/app/tower-test)
   Compiling futures-executor v0.3.31
   Compiling tower v0.5.2 (/app/tower)
   Compiling futures v0.3.31
    Finished `test` profile [unoptimized + debuginfo] target(s) in 15.73s
     Running unittests src/lib.rs (target/debug/deps/tower-10f84f4762fc7e09)

running 23 tests
test load::peak_ewma::tests::nanos ... ok
test balance::p2c::test::empty ... ok
test load::peak_ewma::tests::default_decay ... ok
test load::peak_ewma::tests::compound_decay ... ok
test balance::p2c::test::single_endpoint ... ok
test load::pending_requests::tests::default ... ok
test balance::p2c::test::two_endpoints_with_equal_load ... ok
test load::pending_requests::tests::with_completion ... ok
test make::make_service::shared::tests::as_make_service ... ok
test make::make_service::shared::tests::as_make_service_into_service ... ok
test retry::budget::tps_budget::tests::tps_empty ... ok
test retry::budget::tps_budget::tests::tps_reserve ... ok
test retry::budget::tps_budget::tests::tps_leaky ... ok
test util::boxed::sync::is_sync ... ok
test retry::backoff::tests::backoff_base_first ... ok
test retry::budget::tps_budget::tests::tps_slots ... ok
test retry::backoff::tests::backoff_base ... ok
test util::future_service::tests::pending_service_debug_impl ... ok
test util::rng::tests::next_f64 ... ok
test util::rng::tests::sample_inplace_boundaries ... ok
test util::rng::tests::next_range ... ok
test util::rng::tests::sample_floyd2 ... ok
test retry::backoff::tests::backoff_jitter ... ok

test result: ok. 23 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s

     Running tests/balance/main.rs (target/debug/deps/balance-c9a8e0f20f086ecc)

running 1 test
test stress ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 7.24s

     Running tests/buffer/main.rs (target/debug/deps/buffer-6a0fc5ce46bfbc1c)

running 11 tests
test poll_ready_when_worker_is_dropped_early ... ok
test doesnt_leak_permits ... ok
test propagates_trace_spans ... ok
test wakes_pending_waiters_on_close ... ok
test wakes_pending_waiters_on_failure ... ok
test waits_for_channel_capacity ... ok
test response_future_when_worker_is_dropped_early ... ok
test req_and_res ... ok
test when_inner_fails ... ok
test clears_canceled_requests ... ok
test when_inner_is_not_ready ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.20s

     Running tests/builder.rs (target/debug/deps/builder-fccb395d9524dabd)

running 1 test
test builder_service ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/hedge/main.rs (target/debug/deps/hedge-17416b5092599a92)

running 5 tests
test request_not_clonable ... ok
test completes_before_hedge ... ok
test hedge_hedge_completes_first ... ok
test hedge_orig_completes_first ... ok
test request_not_retyable ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/limit/main.rs (target/debug/deps/limit-d7f4e295644a8b6a)

running 10 tests
test concurrency::basic_service_limit_functionality_with_poll_ready ... ok
test concurrency::basic_service_limit_functionality_without_poll_ready ... ok
test concurrency::multi_waiters ... ok
test concurrency::response_future_drop_releases_capacity ... ok
test concurrency::request_without_capacity ... ok
test concurrency::reserve_capacity_without_sending_request ... ok
test concurrency::response_error_releases_capacity ... ok
test rate::reaching_capacity ... ok
test concurrency::service_drop_frees_capacity ... ok
test rate::remaining_gets_reset ... ok

test result: ok. 10 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/load_shed/main.rs (target/debug/deps/load_shed-e29d9d14a63accf5)

running 2 tests
test when_ready ... ok
test when_not_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/ready_cache/main.rs (target/debug/deps/ready_cache-f2770debd4beb195)

running 9 tests
test error_after_promote ... ok
test evict_ready_then_error ... ok
test evict_pending_then_error ... ok
test duplicate_key_by_index ... ok
test poll_ready_inner_failure ... ok
test poll_ready_not_ready ... ok
test poll_ready_promotes_inner ... ok
test push_then_evict ... ok
test cancelation_observed ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/retry/main.rs (target/debug/deps/retry-6d7b5f52e9219100)

running 6 tests
test retry_cannot_clone_request ... ok
test retry_error_inspection ... ok
test retry_errors ... ok
test retry_limit ... ok
test retry_mutating_policy ... ok
test success_with_cannot_clone ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/spawn_ready/main.rs (target/debug/deps/spawn_ready-925ad6a518284e13)

running 4 tests
test abort_on_drop ... ok
test when_inner_fails ... ok
test when_inner_is_not_ready ... ok
test propagates_trace_spans ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/steer/main.rs (target/debug/deps/steer-a9d388dbacb7e16b)

running 2 tests
test pick_correctly ... ok
test pending_all_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/support.rs (target/debug/deps/support-7bbc76bc0e7b640b)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/util/main.rs (target/debug/deps/util-718ee7b60ccfb696)

running 7 tests
test call_all::ordered ... ok
test call_all::poll_ready_error ... ok
test call_all::pending ... ok
test call_all::unordered ... ok
test service_fn::simple ... ok
test oneshot::service_driven_to_readiness ... ok
test call_all::stream_does_not_block_service ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_layer-6c55f849fc266f28)

running 1 test
test layer_fn::tests::layer_fn_has_useful_debug_impl ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_service-b129fe1d2f72052c)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_test-e785ae021e3c9026)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/mock.rs (target/debug/deps/mock-66d02e47a4d7acf6)

running 2 tests
test single_request_ready ... ok
test backpressure - should panic ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests tower

running 49 tests
test tower/src/util/boxed_clone_sync.rs - util::boxed_clone_sync::BoxCloneSyncService (line 17) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_clone (line 555) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service (line 627) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::option_layer (line 140) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 89) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 30) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 72) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 51) ... ok
test tower/src/balance/mod.rs - balance (line 18) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 502) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service_clone (line 589) ... ok
test tower/src/util/boxed/layer.rs - util::boxed::layer::BoxLayer (line 21) ... ok
test tower/src/util/future_service.rs - util::future_service::FutureService<F,S>::new (line 71) ... ok
test tower/src/load/mod.rs - load (line 34) ... ok
test tower/src/buffer/mod.rs - buffer (line 13) ... ok
test tower/src/discover/mod.rs - discover (line 14) ... ok
test tower/src/retry/budget/mod.rs - retry::budget (line 29) ... ok
test tower/src/util/future_service.rs - util::future_service::future_service (line 15) ... ok
test tower/src/retry/policy.rs - retry::policy::Policy (line 7) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_err (line 259) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::as_service (line 92) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::into_service (line 53) ... ok
test tower/src/util/boxed/sync.rs - util::boxed::sync::BoxService (line 30) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter (line 613) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter_async (line 686) ... ok
test tower/src/util/mod.rs - util::ServiceExt::and_then (line 123) ... ok
test tower/src/util/mod.rs - util::option_layer (line 1049) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed (line 957) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed_clone (line 1003) ... ok
test tower/src/util/mod.rs - util::ServiceExt::then (line 794) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 341) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_request (line 553) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_future (line 880) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 313) ... ok
test tower/src/make/make_service/shared.rs - make::make_service::shared::Shared (line 11) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 349) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_response (line 192) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 482) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 412) ... ok
test tower/src/util/boxed/layer_clone.rs - util::boxed::layer_clone::BoxCloneServiceLayer (line 24) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone (line 739) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed (line 681) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone_sync (line 802) ... ok
test tower/src/util/boxed_clone.rs - util::boxed_clone::BoxCloneService (line 20) ... ok
test tower/src/steer/mod.rs - steer (line 10) ... ok
test tower/src/util/boxed/layer_clone_sync.rs - util::boxed::layer_clone_sync::BoxCloneSyncServiceLayer (line 25) ... ok
test tower/src/util/service_fn.rs - util::service_fn::service_fn (line 12) ... ok
test tower/src/util/call_all/ordered.rs - util::call_all::ordered::CallAll (line 20) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 514) ... ok

test result: ok. 49 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.78s

   Doc-tests tower_layer

running 6 tests
test tower-layer/src/identity.rs - identity::Identity::new (line 29) ... FAILED
test tower-layer/src/stack.rs - stack::Stack<Inner,Outer>::new (line 31) ... ok
test tower-layer/src/lib.rs - Layer (line 47) ... ok
test tower-layer/src/stack.rs - stack::Stack (line 8) ... ok
test tower-layer/src/identity.rs - identity::Identity (line 13) ... ok
test tower-layer/src/layer_fn.rs - layer_fn::layer_fn (line 18) ... ok

failures:

---- tower-layer/src/identity.rs - identity::Identity::new (line 29) stdout ----
error[E0433]: failed to resolve: use of unresolved module or unlinked crate `tokio_test`
 --> tower-layer/src/identity.rs:31:1
  |
5 | tokio_test::block_on(async {
  | ^^^^^^^^^^ use of unresolved module or unlinked crate `tokio_test`
  |
  = help: if you wanted to use a crate named `tokio_test`, use `cargo add tokio_test` to add it to your `Cargo.toml`

error: aborting due to 1 previous error

For more information about this error, try `rustc --explain E0433`.
Couldn't compile the test.

failures:
    tower-layer/src/identity.rs - identity::Identity::new (line 29)

test result: FAILED. 5 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.27s

error: doctest failed, to rerun pass `-p tower-layer --doc`
Running tests on Rust beta
info: using existing install for 'beta-x86_64-unknown-linux-gnu'

info: default toolchain set to 'beta-x86_64-unknown-linux-gnu'
  beta-x86_64-unknown-linux-gnu unchanged - rustc 1.90.0-beta.7 (fb918cec0 2025-08-29)

   Compiling proc-macro2 v1.0.101
   Compiling unicode-ident v1.0.18
   Compiling pin-project-lite v0.2.16
   Compiling futures-core v0.3.31
   Compiling memchr v2.7.5
   Compiling bytes v1.10.1
   Compiling cfg-if v1.0.3
   Compiling futures-sink v0.3.31
   Compiling libc v0.2.175
   Compiling tower-layer v0.3.3 (/app/tower-layer)
   Compiling futures-task v0.3.31
   Compiling slab v0.4.11
   Compiling futures-io v0.3.31
   Compiling pin-utils v0.1.0
   Compiling tower-service v0.3.3 (/app/tower-service)
   Compiling autocfg v1.5.0
   Compiling once_cell v1.21.3
   Compiling log v0.4.28
   Compiling zerocopy v0.8.27
   Compiling getrandom v0.3.3
   Compiling regex-syntax v0.8.6
   Compiling equivalent v1.0.2
   Compiling byteorder v1.5.0
   Compiling hashbrown v0.15.5
   Compiling fnv v1.0.7
   Compiling itoa v1.0.15
   Compiling sync_wrapper v1.0.2
   Compiling lazy_static v1.5.0
   Compiling nu-ansi-term v0.50.1
   Compiling thread_local v1.1.9
   Compiling sharded-slab v0.1.7
   Compiling futures-channel v0.3.31
   Compiling tracing-core v0.1.34
   Compiling num-traits v0.2.19
   Compiling aho-corasick v1.1.3
   Compiling tracing v0.1.41
   Compiling http v1.3.1
   Compiling tracing-subscriber v0.3.20
   Compiling indexmap v2.11.0
   Compiling quote v1.0.40
   Compiling syn v2.0.106
   Compiling getrandom v0.2.16
   Compiling rand_core v0.6.4
   Compiling rand_core v0.9.3
   Compiling rand v0.8.5
   Compiling hdrhistogram v7.5.4
   Compiling regex-automata v0.4.10
   Compiling ppv-lite86 v0.2.21
   Compiling rand_chacha v0.9.0
   Compiling rand v0.9.2
   Compiling regex v1.11.2
   Compiling tokio-macros v2.5.0
   Compiling futures-macro v0.3.31
   Compiling async-stream-impl v0.3.6
   Compiling env_logger v0.8.4
   Compiling quickcheck v1.0.3
   Compiling async-stream v0.3.6
   Compiling tokio v1.47.1
   Compiling futures-util v0.3.31
   Compiling tokio-stream v0.1.17
   Compiling tokio-util v0.7.16
   Compiling tokio-test v0.4.4
   Compiling tower-test v0.4.1 (/app/tower-test)
   Compiling futures-executor v0.3.31
   Compiling tower v0.5.2 (/app/tower)
   Compiling futures v0.3.31
    Finished `test` profile [unoptimized + debuginfo] target(s) in 12.19s
     Running unittests src/lib.rs (target/debug/deps/tower-809f57caaee22772)

running 23 tests
test load::peak_ewma::tests::nanos ... ok
test balance::p2c::test::empty ... ok
test load::peak_ewma::tests::default_decay ... ok
test load::peak_ewma::tests::compound_decay ... ok
test balance::p2c::test::single_endpoint ... ok
test balance::p2c::test::two_endpoints_with_equal_load ... ok
test load::pending_requests::tests::default ... ok
test make::make_service::shared::tests::as_make_service ... ok
test load::pending_requests::tests::with_completion ... ok
test retry::budget::tps_budget::tests::tps_empty ... ok
test make::make_service::shared::tests::as_make_service_into_service ... ok
test retry::backoff::tests::backoff_base_first ... ok
test util::boxed::sync::is_sync ... ok
test retry::budget::tps_budget::tests::tps_reserve ... ok
test retry::backoff::tests::backoff_base ... ok
test retry::budget::tps_budget::tests::tps_slots ... ok
test util::future_service::tests::pending_service_debug_impl ... ok
test retry::budget::tps_budget::tests::tps_leaky ... ok
test util::rng::tests::sample_inplace_boundaries ... ok
test util::rng::tests::next_f64 ... ok
test util::rng::tests::next_range ... ok
test retry::backoff::tests::backoff_jitter ... ok
test util::rng::tests::sample_floyd2 ... ok

test result: ok. 23 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s

     Running tests/balance/main.rs (target/debug/deps/balance-95baf12341fb1efb)

running 1 test
test stress ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 7.29s

     Running tests/buffer/main.rs (target/debug/deps/buffer-1fc1d973cd74f98c)

running 11 tests
test poll_ready_when_worker_is_dropped_early ... ok
test doesnt_leak_permits ... ok
test propagates_trace_spans ... ok
test wakes_pending_waiters_on_close ... ok
test wakes_pending_waiters_on_failure ... ok
test waits_for_channel_capacity ... ok
test req_and_res ... ok
test response_future_when_worker_is_dropped_early ... ok
test when_inner_fails ... ok
test clears_canceled_requests ... ok
test when_inner_is_not_ready ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.20s


running 1 test
test builder_service ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/builder.rs (target/debug/deps/builder-fa666ef66a89100d)
     Running tests/hedge/main.rs (target/debug/deps/hedge-c302292ec762680a)

running 5 tests
test completes_before_hedge ... ok
test hedge_orig_completes_first ... ok
test request_not_retyable ... ok
test request_not_clonable ... ok
test hedge_hedge_completes_first ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/limit/main.rs (target/debug/deps/limit-16eff21248e9f917)

running 10 tests
test concurrency::reserve_capacity_without_sending_request ... ok
test concurrency::multi_waiters ... ok
test concurrency::basic_service_limit_functionality_with_poll_ready ... ok
test concurrency::request_without_capacity ... ok
test concurrency::response_future_drop_releases_capacity ... ok
test concurrency::response_error_releases_capacity ... ok
test concurrency::service_drop_frees_capacity ... ok
test concurrency::basic_service_limit_functionality_without_poll_ready ... ok
test rate::remaining_gets_reset ... ok
test rate::reaching_capacity ... ok

test result: ok. 10 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

     Running tests/load_shed/main.rs (target/debug/deps/load_shed-2c7e7f0b42ea4280)

running 2 tests
test when_ready ... ok
test when_not_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/ready_cache/main.rs (target/debug/deps/ready_cache-9d8ef6c92afa7e2a)

running 9 tests
test evict_pending_then_error ... ok
test error_after_promote ... ok
test duplicate_key_by_index ... ok
test evict_ready_then_error ... ok
test poll_ready_inner_failure ... ok
test poll_ready_not_ready ... ok
test poll_ready_promotes_inner ... ok
test push_then_evict ... ok
test cancelation_observed ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/retry/main.rs (target/debug/deps/retry-4925a9a36b502006)

running 6 tests
test retry_cannot_clone_request ... ok
test retry_error_inspection ... ok
test retry_limit ... ok
test success_with_cannot_clone ... ok
test retry_errors ... ok
test retry_mutating_policy ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/spawn_ready/main.rs (target/debug/deps/spawn_ready-b2e2c245944d8180)

running 4 tests
test abort_on_drop ... ok
test when_inner_fails ... ok
test when_inner_is_not_ready ... ok
test propagates_trace_spans ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/steer/main.rs (target/debug/deps/steer-b7b58260c94bdffd)

running 2 tests
test pick_correctly ... ok
test pending_all_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/support.rs (target/debug/deps/support-ae2f4d591a2e4d22)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/util/main.rs (target/debug/deps/util-bbe1f0e082770871)

running 7 tests
test call_all::ordered ... ok
test oneshot::service_driven_to_readiness ... ok
test call_all::poll_ready_error ... ok
test call_all::unordered ... ok
test service_fn::simple ... ok
test call_all::pending ... ok
test call_all::stream_does_not_block_service ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_layer-ef83f67bf5685529)

running 1 test
test layer_fn::tests::layer_fn_has_useful_debug_impl ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_service-e7a8ec68ce55aba6)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_test-a33bc2495576aa64)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/mock.rs (target/debug/deps/mock-5bd3321117fbe7d0)

running 2 tests
test single_request_ready ... ok
test backpressure - should panic ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests tower

running 49 tests
test tower/src/util/boxed_clone_sync.rs - util::boxed_clone_sync::BoxCloneSyncService (line 17) ... ok
test tower/src/util/boxed/layer.rs - util::boxed::layer::BoxLayer (line 21) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 30) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 502) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 51) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 72) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service (line 627) ... ok
test tower/src/retry/policy.rs - retry::policy::Policy (line 7) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::option_layer (line 140) ... ok
test tower/src/retry/budget/mod.rs - retry::budget (line 29) ... ok
test tower/src/discover/mod.rs - discover (line 14) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 89) ... ok
test tower/src/util/future_service.rs - util::future_service::future_service (line 15) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service_clone (line 589) ... ok
test tower/src/balance/mod.rs - balance (line 18) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_clone (line 555) ... ok
test tower/src/buffer/mod.rs - buffer (line 13) ... ok
test tower/src/load/mod.rs - load (line 34) ... ok
test tower/src/util/future_service.rs - util::future_service::FutureService<F,S>::new (line 71) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::into_service (line 53) ... ok
test tower/src/util/boxed/sync.rs - util::boxed::sync::BoxService (line 30) ... ok
test tower/src/util/mod.rs - util::ServiceExt::and_then (line 123) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed (line 957) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::as_service (line 92) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed_clone (line 1003) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter_async (line 686) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_err (line 259) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter (line 613) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed (line 681) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone (line 739) ... ok
test tower/src/make/make_service/shared.rs - make::make_service::shared::Shared (line 11) ... ok
test tower/src/util/boxed_clone.rs - util::boxed_clone::BoxCloneService (line 20) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone_sync (line 802) ... ok
test tower/src/util/mod.rs - util::option_layer (line 1049) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_request (line 553) ... ok
test tower/src/util/boxed/layer_clone_sync.rs - util::boxed::layer_clone_sync::BoxCloneSyncServiceLayer (line 25) ... ok
test tower/src/util/boxed/layer_clone.rs - util::boxed::layer_clone::BoxCloneServiceLayer (line 24) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 482) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_future (line 880) ... ok
test tower/src/util/mod.rs - util::ServiceExt::then (line 794) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_response (line 192) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 313) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 412) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 341) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 349) ... ok
test tower/src/steer/mod.rs - steer (line 10) ... ok
test tower/src/util/call_all/ordered.rs - util::call_all::ordered::CallAll (line 20) ... ok
test tower/src/util/service_fn.rs - util::service_fn::service_fn (line 12) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 514) ... ok

test result: ok. 49 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.91s

   Doc-tests tower_layer

running 6 tests
test tower-layer/src/identity.rs - identity::Identity::new (line 29) ... FAILED
test tower-layer/src/stack.rs - stack::Stack<Inner,Outer>::new (line 31) ... ok
test tower-layer/src/lib.rs - Layer (line 47) ... ok
test tower-layer/src/identity.rs - identity::Identity (line 13) ... ok
test tower-layer/src/stack.rs - stack::Stack (line 8) ... ok
test tower-layer/src/layer_fn.rs - layer_fn::layer_fn (line 18) ... ok

failures:

---- tower-layer/src/identity.rs - identity::Identity::new (line 29) stdout ----
error[E0433]: failed to resolve: use of unresolved module or unlinked crate `tokio_test`
 --> tower-layer/src/identity.rs:31:1
  |
5 | tokio_test::block_on(async {
  | ^^^^^^^^^^ use of unresolved module or unlinked crate `tokio_test`
  |
  = help: if you wanted to use a crate named `tokio_test`, use `cargo add tokio_test` to add it to your `Cargo.toml`

error: aborting due to 1 previous error

For more information about this error, try `rustc --explain E0433`.
Couldn't compile the test.

failures:
    tower-layer/src/identity.rs - identity::Identity::new (line 29)

test result: FAILED. 5 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.20s

error: doctest failed, to rerun pass `-p tower-layer --doc`
Running tests on Rust nightly
info: using existing install for 'nightly-x86_64-unknown-linux-gnu'
info: default toolchain set to 'nightly-x86_64-unknown-linux-gnu'

  nightly-x86_64-unknown-linux-gnu unchanged - rustc 1.91.0-nightly (12eb345e5 2025-09-07)

   Compiling proc-macro2 v1.0.101
   Compiling unicode-ident v1.0.18
   Compiling pin-project-lite v0.2.16
   Compiling futures-core v0.3.31
   Compiling memchr v2.7.5
   Compiling bytes v1.10.1
   Compiling futures-sink v0.3.31
   Compiling cfg-if v1.0.3
   Compiling libc v0.2.175
   Compiling tower-layer v0.3.3 (/app/tower-layer)
   Compiling futures-task v0.3.31
   Compiling tower-service v0.3.3 (/app/tower-service)
   Compiling slab v0.4.11
   Compiling pin-utils v0.1.0
   Compiling futures-io v0.3.31
   Compiling autocfg v1.5.0
   Compiling log v0.4.28
   Compiling once_cell v1.21.3
   Compiling zerocopy v0.8.27
   Compiling getrandom v0.3.3
   Compiling regex-syntax v0.8.6
   Compiling hashbrown v0.15.5
   Compiling byteorder v1.5.0
   Compiling equivalent v1.0.2
   Compiling sync_wrapper v1.0.2
   Compiling fnv v1.0.7
   Compiling itoa v1.0.15
   Compiling lazy_static v1.5.0
   Compiling nu-ansi-term v0.50.1
   Compiling thread_local v1.1.9
   Compiling sharded-slab v0.1.7
   Compiling futures-channel v0.3.31
   Compiling tracing-core v0.1.34
   Compiling num-traits v0.2.19
   Compiling aho-corasick v1.1.3
   Compiling tracing v0.1.41
   Compiling http v1.3.1
   Compiling indexmap v2.11.0
   Compiling tracing-subscriber v0.3.20
   Compiling quote v1.0.40
   Compiling syn v2.0.106
   Compiling getrandom v0.2.16
   Compiling rand_core v0.6.4
   Compiling rand_core v0.9.3
   Compiling hdrhistogram v7.5.4
   Compiling rand v0.8.5
   Compiling regex-automata v0.4.10
   Compiling ppv-lite86 v0.2.21
   Compiling rand_chacha v0.9.0
   Compiling rand v0.9.2
   Compiling regex v1.11.2
   Compiling tokio-macros v2.5.0
   Compiling futures-macro v0.3.31
   Compiling async-stream-impl v0.3.6
   Compiling env_logger v0.8.4
   Compiling quickcheck v1.0.3
   Compiling async-stream v0.3.6
   Compiling tokio v1.47.1
   Compiling futures-util v0.3.31
   Compiling tokio-stream v0.1.17
   Compiling tokio-util v0.7.16
   Compiling tokio-test v0.4.4
   Compiling tower-test v0.4.1 (/app/tower-test)
   Compiling futures-executor v0.3.31
   Compiling tower v0.5.2 (/app/tower)
   Compiling futures v0.3.31
    Finished `test` profile [unoptimized + debuginfo] target(s) in 11.93s
     Running unittests src/lib.rs (target/debug/deps/tower-8d61b3fadb9eb7f6)

running 23 tests
test balance::p2c::test::empty ... ok
test load::peak_ewma::tests::nanos ... ok
test load::peak_ewma::tests::default_decay ... ok
test load::peak_ewma::tests::compound_decay ... ok
test balance::p2c::test::single_endpoint ... ok
test load::pending_requests::tests::default ... ok
test balance::p2c::test::two_endpoints_with_equal_load ... ok
test make::make_service::shared::tests::as_make_service ... ok
test make::make_service::shared::tests::as_make_service_into_service ... ok
test load::pending_requests::tests::with_completion ... ok
test retry::budget::tps_budget::tests::tps_empty ... ok
test retry::budget::tps_budget::tests::tps_leaky ... ok
test retry::backoff::tests::backoff_base_first ... ok
test util::boxed::sync::is_sync ... ok
test retry::budget::tps_budget::tests::tps_reserve ... ok
test retry::backoff::tests::backoff_base ... ok
test retry::budget::tps_budget::tests::tps_slots ... ok
test util::future_service::tests::pending_service_debug_impl ... ok
test util::rng::tests::sample_inplace_boundaries ... ok
test util::rng::tests::next_f64 ... ok
test util::rng::tests::next_range ... ok
test util::rng::tests::sample_floyd2 ... ok
test retry::backoff::tests::backoff_jitter ... ok

test result: ok. 23 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.04s

     Running tests/balance/main.rs (target/debug/deps/balance-f17fa48389b26df0)

running 1 test
test stress ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 7.23s

     Running tests/buffer/main.rs (target/debug/deps/buffer-c50fd9001c456eb0)

running 11 tests
test poll_ready_when_worker_is_dropped_early ... ok
test doesnt_leak_permits ... ok
test propagates_trace_spans ... ok
test wakes_pending_waiters_on_close ... ok
test wakes_pending_waiters_on_failure ... ok
test waits_for_channel_capacity ... ok
test req_and_res ... ok
test response_future_when_worker_is_dropped_early ... ok
test when_inner_fails ... ok
test clears_canceled_requests ... ok
test when_inner_is_not_ready ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.20s

     Running tests/builder.rs (target/debug/deps/builder-29fe74eda590b13c)

running 1 test
test builder_service ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/hedge/main.rs (target/debug/deps/hedge-9737a1e5be3a5cd9)

running 5 tests
test request_not_retyable ... ok
test completes_before_hedge ... ok
test hedge_hedge_completes_first ... ok
test request_not_clonable ... ok
test hedge_orig_completes_first ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/limit/main.rs (target/debug/deps/limit-7839c5f58f499757)

running 10 tests
test concurrency::reserve_capacity_without_sending_request ... ok
test concurrency::basic_service_limit_functionality_with_poll_ready ... ok
test concurrency::multi_waiters ... ok
test concurrency::request_without_capacity ... ok
test concurrency::basic_service_limit_functionality_without_poll_ready ... ok
test concurrency::response_error_releases_capacity ... ok
test concurrency::response_future_drop_releases_capacity ... ok
test concurrency::service_drop_frees_capacity ... ok
test rate::remaining_gets_reset ... ok
test rate::reaching_capacity ... ok

test result: ok. 10 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/load_shed/main.rs (target/debug/deps/load_shed-0d23cc549635f8d4)

running 2 tests
test when_ready ... ok
test when_not_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/ready_cache/main.rs (target/debug/deps/ready_cache-07c2b3145973d873)

running 9 tests
test duplicate_key_by_index ... ok
test evict_ready_then_error ... ok
test evict_pending_then_error ... ok
test error_after_promote ... ok
test poll_ready_inner_failure ... ok
test poll_ready_not_ready ... ok
test poll_ready_promotes_inner ... ok
test push_then_evict ... ok
test cancelation_observed ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/retry/main.rs (target/debug/deps/retry-497fc4a3770f2afe)

running 6 tests
test retry_cannot_clone_request ... ok
test retry_error_inspection ... ok
test retry_errors ... ok
test retry_limit ... ok
test success_with_cannot_clone ... ok
test retry_mutating_policy ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/spawn_ready/main.rs (target/debug/deps/spawn_ready-c3128c0fd5a9c3c1)

running 4 tests
test abort_on_drop ... ok
test when_inner_fails ... ok
test when_inner_is_not_ready ... ok
test propagates_trace_spans ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/steer/main.rs (target/debug/deps/steer-8655720dbda057c6)

running 2 tests
test pending_all_ready ... ok
test pick_correctly ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/support.rs (target/debug/deps/support-9f7e827a64873410)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/util/main.rs (target/debug/deps/util-fa51519f4b818704)

running 7 tests
test call_all::ordered ... ok
test call_all::pending ... ok
test call_all::poll_ready_error ... ok
test oneshot::service_driven_to_readiness ... ok
test call_all::unordered ... ok
test service_fn::simple ... ok
test call_all::stream_does_not_block_service ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_layer-68e5601e76f85f17)

running 1 test
test layer_fn::tests::layer_fn_has_useful_debug_impl ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_service-86ad5052a309a831)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_test-3768642bcc0c9f9c)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/mock.rs (target/debug/deps/mock-239a9a087f1f6701)

running 2 tests
test single_request_ready ... ok
test backpressure - should panic ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests tower

running 49 tests
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service (line 627) ... ok
test tower/src/load/mod.rs - load (line 34) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::option_layer (line 140) ... ok
test tower/src/util/boxed_clone_sync.rs - util::boxed_clone_sync::BoxCloneSyncService (line 17) ... ok
test tower/src/retry/policy.rs - retry::policy::Policy (line 7) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_clone (line 555) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service_clone (line 589) ... ok
test tower/src/util/future_service.rs - util::future_service::FutureService<F,S>::new (line 71) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::into_service (line 53) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 30) ... ok
test tower/src/buffer/mod.rs - buffer (line 13) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 51) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 502) ... ok
test tower/src/discover/mod.rs - discover (line 14) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 72) ... ok
test tower/src/util/boxed/layer.rs - util::boxed::layer::BoxLayer (line 21) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::as_service (line 92) ... ok
test tower/src/retry/budget/mod.rs - retry::budget (line 29) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 89) ... ok
test tower/src/util/boxed/sync.rs - util::boxed::sync::BoxService (line 30) ... ok
test tower/src/balance/mod.rs - balance (line 18) ... ok
test tower/src/util/future_service.rs - util::future_service::future_service (line 15) ... ok
test tower/src/util/mod.rs - util::ServiceExt::and_then (line 123) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed (line 957) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_err (line 259) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed (line 681) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone (line 739) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed_clone (line 1003) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter (line 613) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter_async (line 686) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone_sync (line 802) ... ok
test tower/src/util/mod.rs - util::option_layer (line 1049) ... ok
test tower/src/util/boxed/layer_clone_sync.rs - util::boxed::layer_clone_sync::BoxCloneSyncServiceLayer (line 25) ... ok
test tower/src/util/mod.rs - util::ServiceExt::then (line 794) ... ok
test tower/src/make/make_service/shared.rs - make::make_service::shared::Shared (line 11) ... ok
test tower/src/util/boxed_clone.rs - util::boxed_clone::BoxCloneService (line 20) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_response (line 192) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_request (line 553) ... ok
test tower/src/util/boxed/layer_clone.rs - util::boxed::layer_clone::BoxCloneServiceLayer (line 24) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 349) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 412) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 482) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_future (line 880) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 341) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 313) ... ok
test tower/src/steer/mod.rs - steer (line 10) ... ok
test tower/src/util/call_all/ordered.rs - util::call_all::ordered::CallAll (line 20) ... ok
test tower/src/util/service_fn.rs - util::service_fn::service_fn (line 12) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 514) ... ok

test result: ok. 49 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.88s

   Doc-tests tower_layer

running 6 tests
test tower-layer/src/identity.rs - identity::Identity::new (line 29) ... FAILED
test tower-layer/src/identity.rs - identity::Identity (line 13) ... ok
test tower-layer/src/lib.rs - Layer (line 47) ... ok
test tower-layer/src/stack.rs - stack::Stack<Inner,Outer>::new (line 31) ... ok
test tower-layer/src/stack.rs - stack::Stack (line 8) ... ok
test tower-layer/src/layer_fn.rs - layer_fn::layer_fn (line 18) ... ok

failures:

---- tower-layer/src/identity.rs - identity::Identity::new (line 29) stdout ----
error[E0433]: failed to resolve: use of unresolved module or unlinked crate `tokio_test`
 --> tower-layer/src/identity.rs:31:1
  |
5 | tokio_test::block_on(async {
  | ^^^^^^^^^^ use of unresolved module or unlinked crate `tokio_test`
  |
  = help: if you wanted to use a crate named `tokio_test`, use `cargo add tokio_test` to add it to your `Cargo.toml`

error: aborting due to 1 previous error

For more information about this error, try `rustc --explain E0433`.
Couldn't compile the test.

failures:
    tower-layer/src/identity.rs - identity::Identity::new (line 29)

test result: FAILED. 5 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.21s

error: doctest failed, to rerun pass `-p tower-layer --doc`
