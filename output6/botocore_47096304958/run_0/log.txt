Ignoring setuptools: markers 'python_version >= "3.12"' don't match your environment
Ignoring packaging: markers 'python_version >= "3.12"' don't match your environment
Requirement already satisfied: wheel==0.43.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 1)) (0.43.0)
Requirement already satisfied: behave==1.2.5 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 2)) (1.2.5)
Requirement already satisfied: jsonschema==4.23.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 3)) (4.23.0)
Requirement already satisfied: coverage==7.2.7 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 4)) (7.2.7)
Requirement already satisfied: pytest==8.1.1 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 9)) (8.1.1)
Requirement already satisfied: pytest-cov==5.0.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 10)) (5.0.0)
Requirement already satisfied: pytest-xdist==3.5.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 11)) (3.5.0)
Requirement already satisfied: atomicwrites>=1.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 12)) (1.4.1)
Requirement already satisfied: colorama>0.3.0 in ./.venv/lib/python3.11/site-packages (from -r /app/requirements-dev.txt (line 13)) (0.4.6)
Requirement already satisfied: parse>=1.6.3 in ./.venv/lib/python3.11/site-packages (from behave==1.2.5->-r /app/requirements-dev.txt (line 2)) (1.20.2)
Requirement already satisfied: parse-type>=0.3.4 in ./.venv/lib/python3.11/site-packages (from behave==1.2.5->-r /app/requirements-dev.txt (line 2)) (0.6.4)
Requirement already satisfied: six in ./.venv/lib/python3.11/site-packages (from behave==1.2.5->-r /app/requirements-dev.txt (line 2)) (1.17.0)
Requirement already satisfied: attrs>=22.2.0 in ./.venv/lib/python3.11/site-packages (from jsonschema==4.23.0->-r /app/requirements-dev.txt (line 3)) (25.3.0)
Requirement already satisfied: jsonschema-specifications>=2023.03.6 in ./.venv/lib/python3.11/site-packages (from jsonschema==4.23.0->-r /app/requirements-dev.txt (line 3)) (2025.4.1)
Requirement already satisfied: referencing>=0.28.4 in ./.venv/lib/python3.11/site-packages (from jsonschema==4.23.0->-r /app/requirements-dev.txt (line 3)) (0.36.2)
Requirement already satisfied: rpds-py>=0.7.1 in ./.venv/lib/python3.11/site-packages (from jsonschema==4.23.0->-r /app/requirements-dev.txt (line 3)) (0.25.1)
Requirement already satisfied: iniconfig in ./.venv/lib/python3.11/site-packages (from pytest==8.1.1->-r /app/requirements-dev.txt (line 9)) (2.1.0)
Requirement already satisfied: packaging in ./.venv/lib/python3.11/site-packages (from pytest==8.1.1->-r /app/requirements-dev.txt (line 9)) (25.0)
Requirement already satisfied: pluggy<2.0,>=1.4 in ./.venv/lib/python3.11/site-packages (from pytest==8.1.1->-r /app/requirements-dev.txt (line 9)) (1.6.0)
Requirement already satisfied: execnet>=1.1 in ./.venv/lib/python3.11/site-packages (from pytest-xdist==3.5.0->-r /app/requirements-dev.txt (line 11)) (2.1.1)
Requirement already satisfied: typing-extensions>=4.4.0 in ./.venv/lib/python3.11/site-packages (from referencing>=0.28.4->jsonschema==4.23.0->-r /app/requirements-dev.txt (line 3)) (4.13.2)
============================= test session starts ==============================
platform linux -- Python 3.11.0rc1, pytest-8.1.1, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
plugins: xdist-3.5.0, cov-5.0.0
created: 4/4 workers
4 workers [58935 items]

........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  0%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  1%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  2%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  3%]
........................................................................ [  4%]
......................................................................... [  4%]
........................................................................ [  4%]
........................................................................ [  4%]
........................................................................ [  4%]
........................................................................ [  4%]
........................................................................ [  4%]
........................................................................ [  4%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  5%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  6%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  7%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  8%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [  9%]
........................................................................ [ 10%]
........................................................................ [ 10%]
........................................................................ [ 10%]
........................................................................ [ 10%]
........................................................................ [ 10%]
......................................................................... [ 10%]
.......................................................................... [ 10%]
........................................................................ [ 10%]
......................................................................... [ 11%]
........................................................................ [ 11%]
........................................................................ [ 11%]
........................................................................ [ 11%]
........................................................................ [ 11%]
......................................................................... [ 11%]
........................................................................ [ 11%]
........................................................................ [ 11%]
........................................................................ [ 11%]
........................................................................ [ 12%]
........................................................................ [ 12%]
.......................................................................... [ 12%]
........................................................................ [ 12%]
......................................................................... [ 12%]
........................................................................ [ 12%]
........................................................................ [ 12%]
........................................................................ [ 12%]
........................................................................ [ 13%]
........................................................................ [ 13%]
........................................................................ [ 13%]
........................................................................ [ 13%]
........................................................................ [ 13%]
.......................................................................... [ 13%]
.......................................................................... [ 13%]
........................................................................ [ 13%]
........................................................................... [ 14%]
........................................................................ [ 14%]
......................................................................... [ 14%]
........................................................................ [ 14%]
........................................................................ [ 14%]
.......................................................................... [ 14%]
........................................................................ [ 14%]
........................................................................ [ 14%]
......................................................................... [ 15%]
........................................................................ [ 15%]
........................................................................ [ 15%]
.......................................................................... [ 15%]
........................................................................ [ 15%]
........................................................................ [ 15%]
.......................................................................... [ 15%]
......................................................................... [ 15%]
........................................................................ [ 16%]
........................................................................ [ 16%]
........................................................................ [ 16%]
......................................................................... [ 16%]
........................................................................ [ 16%]
.......................................................................... [ 16%]
......................................................................... [ 16%]
........................................................................ [ 16%]
......................................................................... [ 17%]
........................................................................ [ 17%]
........................................................................ [ 17%]
......................................................................... [ 17%]
........................................................................ [ 17%]
.......................................................................... [ 17%]
......................................................................... [ 17%]
........................................................................ [ 17%]
.......................................................................... [ 18%]
.......................................................................... [ 18%]
........................................................................ [ 18%]
......................................................................... [ 18%]
......................................................................... [ 18%]
........................................................................ [ 18%]
........................................................................ [ 18%]
.......................................................................... [ 18%]
........................................................................ [ 19%]
........................................................................ [ 19%]
.......................................................................... [ 19%]
........................................................................ [ 19%]
.......................................................................... [ 19%]
........................................................................ [ 19%]
........................................................................ [ 19%]
......................................................................... [ 19%]
........................................................................ [ 19%]
........................................................................ [ 20%]
......................................................................... [ 20%]
......................................................................... [ 20%]
......................................................................... [ 20%]
.......................................................................... [ 20%]
......................................................................... [ 20%]
........................................................................ [ 20%]
.......................................................................... [ 20%]
......................................................................... [ 21%]
......................................................................... [ 21%]
.......................................................................... [ 21%]
........................................................................ [ 21%]
.......................................................................... [ 21%]
.......................................................................... [ 21%]
.......................................................................... [ 21%]
........................................................................ [ 21%]
......................................................................... [ 22%]
........................................................................ [ 22%]
......................................................................... [ 22%]
......................................................................... [ 22%]
......................................................................... [ 22%]
.......................................................................... [ 22%]
.......................................................................... [ 22%]
........................................................................ [ 22%]
........................................................................ [ 23%]
........................................................................ [ 23%]
......................................................................... [ 23%]
........................................................................ [ 23%]
........................................................................ [ 23%]
........................................................................ [ 23%]
........................................................................ [ 23%]
........................................................................ [ 23%]
......................................................................... [ 24%]
......................................................................... [ 24%]
........................................................................ [ 24%]
........................................................................ [ 24%]
........................................................................ [ 24%]
......................................................................... [ 24%]
........................................................................ [ 24%]
........................................................................ [ 24%]
.......................................................................... [ 25%]
........................................................................ [ 25%]
........................................................................ [ 25%]
........................................................................ [ 25%]
........................................................................ [ 25%]
......................................................................... [ 25%]
........................................................................ [ 25%]
........................................................................ [ 25%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 26%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 27%]
........................................................................ [ 28%]
........................................................................ [ 28%]
........................................................................ [ 28%]
........................................................................ [ 28%]
........................................................................ [ 28%]
........................................................................ [ 28%]
......................................................................... [ 28%]
........................................................................ [ 28%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 29%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 30%]
........................................................................ [ 31%]
........................................................................ [ 31%]
........................................................................ [ 31%]
........................................................................ [ 31%]
........................................................................ [ 31%]
........................................................................ [ 31%]
......................................................................... [ 31%]
......................................................................... [ 31%]
........................................................................ [ 32%]
......................................................................... [ 32%]
........................................................................ [ 32%]
........................................................................ [ 32%]
........................................................................ [ 32%]
........................................................................ [ 32%]
........................................................................ [ 32%]
......................................................................... [ 32%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 33%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 34%]
........................................................................ [ 35%]
......................................................................... [ 35%]
........................................................................ [ 35%]
........................................................................ [ 35%]
........................................................................ [ 35%]
........................................................................ [ 35%]
........................................................................ [ 35%]
........................................................................ [ 35%]
........................................................................ [ 36%]
......................................................................... [ 36%]
........................................................................ [ 36%]
......................................................................... [ 36%]
........................................................................ [ 36%]
......................................................................... [ 36%]
........................................................................ [ 36%]
......................................................................... [ 36%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 37%]
........................................................................ [ 38%]
........................................................................ [ 38%]
......................................................................... [ 38%]
........................................................................ [ 38%]
........................................................................ [ 38%]
........................................................................ [ 38%]
........................................................................ [ 38%]
........................................................................ [ 38%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 39%]
........................................................................ [ 40%]
......................................................................... [ 40%]
........................................................................ [ 40%]
........................................................................ [ 40%]
......................................................................... [ 40%]
........................................................................ [ 40%]
........................................................................ [ 40%]
........................................................................ [ 40%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 41%]
........................................................................ [ 42%]
......................................................................... [ 42%]
........................................................................ [ 42%]
........................................................................ [ 42%]
........................................................................ [ 42%]
........................................................................ [ 42%]
........................................................................ [ 42%]
........................................................................ [ 42%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 43%]
........................................................................ [ 44%]
........................................................................ [ 44%]
........................................................................ [ 44%]
........................................................................ [ 44%]
......................................................................... [ 44%]
........................................................................ [ 44%]
........................................................................ [ 44%]
........................................................................ [ 44%]
........................................................................ [ 44%]
........................................................................ [ 45%]
........................................................................ [ 45%]
........................................................................ [ 45%]
........................................................................ [ 45%]
........................................................................ [ 45%]
........................................................................ [ 45%]
......................................................................... [ 45%]
........................................................................ [ 45%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 46%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 47%]
........................................................................ [ 48%]
........................................................................ [ 48%]
......................................................................... [ 48%]
........................................................................ [ 48%]
........................................................................ [ 48%]
........................................................................ [ 48%]
........................................................................ [ 48%]
........................................................................ [ 48%]
........................................................................ [ 49%]
........................................................................ [ 49%]
........................................................................ [ 49%]
......................................................................... [ 49%]
........................................................................ [ 49%]
........................................................................ [ 49%]
........................................................................ [ 49%]
......................................................................... [ 49%]
........................................................................ [ 50%]
........................................................................ [ 50%]
........................................................................ [ 50%]
........................................................................ [ 50%]
........................................................................ [ 50%]
........................................................................ [ 50%]
......................................................................... [ 50%]
........................................................................ [ 50%]
........................................................................ [ 50%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 51%]
........................................................................ [ 52%]
........................................................................ [ 52%]
........................................................................ [ 52%]
........................................................................ [ 52%]
........................................................................ [ 52%]
........................................................................ [ 52%]
........................................................................ [ 52%]
......................................................................... [ 52%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 53%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 54%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 55%]
........................................................................ [ 56%]
........................................................................ [ 56%]
........................................................................ [ 56%]
........................................................................ [ 56%]
........................................................................ [ 56%]
......................................................................... [ 56%]
........................................................................ [ 56%]
........................................................................ [ 56%]
......................................................................... [ 56%]
......................................................................... [ 57%]
......................................................................... [ 57%]
........................................................................ [ 57%]
......................................................................... [ 57%]
........................................................................ [ 57%]
........................................................................ [ 57%]
........................................................................ [ 57%]
........................................................................ [ 57%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 58%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 59%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 60%]
........................................................................ [ 61%]
........................................................................ [ 61%]
......................................................................... [ 61%]
........................................................................ [ 61%]
......................................................................... [ 61%]
........................................................................ [ 61%]
........................................................................ [ 61%]
........................................................................ [ 61%]
........................................................................ [ 61%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 62%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 63%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 64%]
........................................................................ [ 65%]
........................................................................ [ 65%]
........................................................................ [ 65%]
........................................................................ [ 65%]
........................................................................ [ 65%]
........................................................................ [ 65%]
........................................................................ [ 65%]
......................................................................... [ 65%]
.......................................................................... [ 66%]
........................................................................ [ 66%]
.......................................................................... [ 66%]
......................................................................... [ 66%]
........................................................................ [ 66%]
.......................................................................... [ 66%]
........................................................................ [ 66%]
........................................................................ [ 66%]
........................................................................ [ 67%]
........................................................................ [ 67%]
........................................................................ [ 67%]
........................................................................ [ 67%]
........................................................................ [ 67%]
........................................................................ [ 67%]
........................................................................ [ 67%]
......................................................................... [ 67%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
........................................................................ [ 68%]
......................................................................... [ 68%]
........................................................................ [ 69%]
........................................................................ [ 69%]
......................................................................... [ 69%]
......................................................................... [ 69%]
........................................................................ [ 69%]
........................................................................ [ 69%]
........................................................................ [ 69%]
......................................................................... [ 69%]
........................................................................ [ 70%]
........................................................................ [ 70%]
........................................................................ [ 70%]
......................................................................... [ 70%]
........................................................................ [ 70%]
........................................................................ [ 70%]
........................................................................ [ 70%]
........................................................................ [ 70%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 71%]
........................................................................ [ 72%]
........................................................................ [ 72%]
........................................................................ [ 72%]
........................................................................ [ 72%]
......................................................................... [ 72%]
........................................................................ [ 72%]
........................................................................ [ 72%]
........................................................................ [ 72%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 73%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 74%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 75%]
........................................................................ [ 76%]
........................................................................ [ 76%]
........................................................................ [ 76%]
........................................................................ [ 76%]
........................................................................ [ 76%]
........................................................................ [ 76%]
........................................................................ [ 76%]
.................................................s...................... [ 76%]
...................................s.................................... [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 77%]
........................................................................ [ 78%]
........................................................................ [ 78%]
........................................................................ [ 78%]
...s.................................................................... [ 78%]
........................................................................ [ 78%]
........................................................................ [ 78%]
........................................................................ [ 78%]
........................................................................ [ 78%]
........................................................................ [ 79%]
........................................................................ [ 79%]
........................................................................ [ 79%]
........................................................................ [ 79%]
........................................................................ [ 79%]
.............................................................s.s..s.ss.. [ 79%]
......................................................................... [ 79%]
........................................................................ [ 79%]
........................................................................ [ 79%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 80%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 81%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 82%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 83%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 84%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 85%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 86%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 87%]
........................................................................ [ 88%]
........................................................................ [ 88%]
........................................................................ [ 88%]
......................................................................... [ 88%]
........................................................................ [ 88%]
........................................................................ [ 88%]
........................................................................ [ 88%]
........................................................................ [ 88%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 89%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 90%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 91%]
........................................................................ [ 92%]
..............................................s......................... [ 92%]
..................ssssssss.s............................................ [ 92%]
.....F.................................................................. [ 92%]
...F...........................F........................................ [ 92%]
......................................................................... [ 92%]
........................................................................ [ 92%]
........................................................................ [ 92%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 93%]
........................................................................ [ 94%]
........................................................................ [ 94%]
........................................................................ [ 94%]
...................................s.................................... [ 94%]
......................................................................... [ 94%]
........................................................................ [ 94%]
........................................................................ [ 94%]
........................................................................ [ 94%]
......................................................................... [ 95%]
......................................................................... [ 95%]
........................................................................ [ 95%]
........................................................................ [ 95%]
........................................................................ [ 95%]
....................ss.................................................. [ 95%]
........................................................................ [ 95%]
........................................................................ [ 95%]
........................................................................ [ 95%]
........................................................................ [ 96%]
........................................................................ [ 96%]
........................................................................ [ 96%]
........................................................................ [ 96%]
........................................................................ [ 96%]
........................................................................ [ 96%]
.....................F.F..F..F..F.F..F.F...F.F.F..F.F...F.F..F.......... [ 96%]
.F..F..F..........FF..F......F...F..F................................... [ 96%]
........................................................................ [ 97%]
..................F.........F........................................... [ 97%]
........................................................................ [ 97%]
..................................sss..sss..................F........... [ 97%]
......................F..................F.............................. [ 97%]
............F..F.F..F...F.F..F.F..F.F.F.....FFF....FFFssssssssssssssssss [ 97%]
ssssssssssssss.......................................................... [ 97%]
........................................................................ [ 97%]
........................................................................ [ 98%]
........................................................................ [ 98%]
........................................................................ [ 98%]
............F.......................F................................... [ 98%]
.F..FF.FFFFFF..FFF.F.FFF.FF.FF.FF.FF.FFF.F.FFFF..sss.sss..ssss..ss..ssss [ 98%]
sssssssssssss...............s..........................s................ [ 98%]
........................................................................ [ 98%]
.........................................................F.............. [ 98%]
........................................................................ [ 99%]
..........F............................................................. [ 99%]
.......................................................s.s........ssss.. [ 99%]
..........s.ssss........................................................ [ 99%]
........................................................................ [ 99%]
.........................................................F.............. [ 99%]
........................................................................ [ 99%]
.................FF..s.................................................. [ 99%]
...F..........F.......................................                   [100%]
=================================== FAILURES ===================================
______________ TestAccesspointArn.test_outpost_arn_presigned_url _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url>

    def test_outpost_arn_presigned_url(self):
        outpost_arn = (
            'arn:aws:s3-outposts:us-west-2:123456789012:outpost/'
            'op-01234567890123456/accesspoint/myaccesspoint'
        )
        expected_url = (
            'myaccesspoint-123456789012.op-01234567890123456.'
            's3-outposts.us-west-2.amazonaws.com'
        )
        expected_credentials = (
            '20210827%2Fus-west-2%2Fs3-outposts%2Faws4_request'
        )
        expected_signature = (
            'a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09'
        )
        config = Config(signature_version='s3v4')
        presigned_url = self._get_presigned_url(
            outpost_arn, 'us-west-2', config=config
        )
>       self._assert_presigned_url(
            presigned_url,
            expected_url,
            expected_signature,
            expected_credentials,
        )

functional/test_s3.py:838:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url>
presigned_url = 'https://myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-west-2.amazonaws.com/obj?X-Amz-Algorithm=AWS4-...-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=0541b512727380838e1ccef8fbe09010d7799ec11c919d83426611774dd654c8'
expected_url = 'myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-west-2.amazonaws.com'
expected_signature = 'a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09'
expected_credentials = '20210827%2Fus-west-2%2Fs3-outposts%2Faws4_request'

    def _assert_presigned_url(
        self,
        presigned_url,
        expected_url,
        expected_signature,
        expected_credentials,
    ):
        url_parts = urlsplit(presigned_url)
        assert url_parts.netloc == expected_url
        query_strs = url_parts.query.split('&')
        query_parts = dict(part.split('=') for part in query_strs)
>       assert expected_signature == query_parts['X-Amz-Signature']
E       AssertionError: assert 'a944fbe2bfba...58ac13f327e09' == '0541b5127273...611774dd654c8'
E
E         - 0541b512727380838e1ccef8fbe09010d7799ec11c919d83426611774dd654c8
E         + a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09

functional/test_s3.py:1258: AssertionError
______ TestAccesspointArn.test_outpost_arn_presigned_url_cross_region_arn ______
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url_cross_region_arn>

    def test_outpost_arn_presigned_url_cross_region_arn(self):
        outpost_arn = (
            'arn:aws:s3-outposts:us-east-1:123456789012:outpost/'
            'op-01234567890123456/accesspoint/myaccesspoint'
        )
        expected_url = (
            'myaccesspoint-123456789012.op-01234567890123456.'
            's3-outposts.us-east-1.amazonaws.com'
        )
        expected_credentials = (
            '20210827%2Fus-east-1%2Fs3-outposts%2Faws4_request'
        )
        expected_signature = (
            '7f93df0b81f80e590d95442d579bd6cf749a35ff4bbdc6373fa669b89c7fce4e'
        )
        config = Config(
            signature_version='s3v4',
            s3={
                'use_arn_region': True,
            },
        )
        presigned_url = self._get_presigned_url(
            outpost_arn, 'us-west-2', config=config
        )
>       self._assert_presigned_url(
            presigned_url,
            expected_url,
            expected_signature,
            expected_credentials,
        )

functional/test_s3.py:900:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url_cross_region_arn>
presigned_url = 'https://myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-east-1.amazonaws.com/obj?X-Amz-Algorithm=AWS4-...-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=76af5b0f011b7a8de3307e5b14fe32b391f15740d37ea4244296cd8312a3b5c9'
expected_url = 'myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-east-1.amazonaws.com'
expected_signature = '7f93df0b81f80e590d95442d579bd6cf749a35ff4bbdc6373fa669b89c7fce4e'
expected_credentials = '20210827%2Fus-east-1%2Fs3-outposts%2Faws4_request'

    def _assert_presigned_url(
        self,
        presigned_url,
        expected_url,
        expected_signature,
        expected_credentials,
    ):
        url_parts = urlsplit(presigned_url)
        assert url_parts.netloc == expected_url
        query_strs = url_parts.query.split('&')
        query_parts = dict(part.split('=') for part in query_strs)
>       assert expected_signature == query_parts['X-Amz-Signature']
E       AssertionError: assert '7f93df0b81f8...669b89c7fce4e' == '76af5b0f011b...6cd8312a3b5c9'
E
E         - 76af5b0f011b7a8de3307e5b14fe32b391f15740d37ea4244296cd8312a3b5c9
E         + 7f93df0b81f80e590d95442d579bd6cf749a35ff4bbdc6373fa669b89c7fce4e

functional/test_s3.py:1258: AssertionError
____ TestAccesspointArn.test_outpost_arn_presigned_url_with_use_arn_region _____
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url_with_use_arn_region>

    def test_outpost_arn_presigned_url_with_use_arn_region(self):
        outpost_arn = (
            'arn:aws:s3-outposts:us-west-2:123456789012:outpost/'
            'op-01234567890123456/accesspoint/myaccesspoint'
        )
        expected_url = (
            'myaccesspoint-123456789012.op-01234567890123456.'
            's3-outposts.us-west-2.amazonaws.com'
        )
        expected_credentials = (
            '20210827%2Fus-west-2%2Fs3-outposts%2Faws4_request'
        )
        expected_signature = (
            'a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09'
        )
        config = Config(
            signature_version='s3v4',
            s3={
                'use_arn_region': True,
            },
        )
        presigned_url = self._get_presigned_url(
            outpost_arn, 'us-west-2', config=config
        )
>       self._assert_presigned_url(
            presigned_url,
            expected_url,
            expected_signature,
            expected_credentials,
        )

functional/test_s3.py:869:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <tests.functional.test_s3.TestAccesspointArn testMethod=test_outpost_arn_presigned_url_with_use_arn_region>
presigned_url = 'https://myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-west-2.amazonaws.com/obj?X-Amz-Algorithm=AWS4-...-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=510e06fe70dbe52109b81073e51f4af2cdd16b37b7f1da5a021a778b6fa1b796'
expected_url = 'myaccesspoint-123456789012.op-01234567890123456.s3-outposts.us-west-2.amazonaws.com'
expected_signature = 'a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09'
expected_credentials = '20210827%2Fus-west-2%2Fs3-outposts%2Faws4_request'

    def _assert_presigned_url(
        self,
        presigned_url,
        expected_url,
        expected_signature,
        expected_credentials,
    ):
        url_parts = urlsplit(presigned_url)
        assert url_parts.netloc == expected_url
        query_strs = url_parts.query.split('&')
        query_parts = dict(part.split('=') for part in query_strs)
>       assert expected_signature == query_parts['X-Amz-Signature']
E       AssertionError: assert 'a944fbe2bfba...58ac13f327e09' == '510e06fe70db...a778b6fa1b796'
E
E         - 510e06fe70dbe52109b81073e51f4af2cdd16b37b7f1da5a021a778b6fa1b796
E         + a944fbe2bfbae429f922746546d1c6f890649c88ba7826bd1d258ac13f327e09

functional/test_s3.py:1258: AssertionError
________________ TestS3SigV4Auth.test_blocklist_expect_headers _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_expect_headers>

    def test_blocklist_expect_headers(self):
>       self._test_blocklist_header('expect', '100-continue')

unit/auth/test_signers.py:390:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42702910>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42701710>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket/foo

host:s3.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________________ TestS3SigV4Auth.test_blocklist_trace_id ____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_trace_id>

    def test_blocklist_trace_id(self):
>       self._test_blocklist_header(
            'x-amzn-trace-id', 'Root=foo;Parent=bar;Sampleid=1'
        )

unit/auth/test_signers.py:393:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a4268f9d0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a4268f190>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket/foo

host:s3.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________ TestS3SigV4Auth.test_blocklist_transfer_encoding_header ____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_transfer_encoding_header>

    def test_blocklist_transfer_encoding_header(self):
>       self._test_blocklist_header('transfer-encoding', 'chunked')

unit/auth/test_signers.py:401:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a425e3a50>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a425e3d90>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket/foo

host:s3.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
_______________ TestS3SigV4Auth.test_blocklist_user_agent_header _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_user_agent_header>

    def test_blocklist_user_agent_header(self):
>       self._test_blocklist_header('user-agent', 'botocore/1.4.11')

unit/auth/test_signers.py:398:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42932850>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42932a10>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket/foo

host:s3.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________ TestS3SigV4Auth.test_does_not_use_sha256_if_checksum_set ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_checksum_set>

    def test_does_not_use_sha256_if_checksum_set(self):
        self.request.context['has_streaming_input'] = True
        self.request.context['checksum'] = {
            'request_algorithm': {
                'in': 'header',
                'name': 'x-amz-checksum-sha256',
                'algorithm': 'sha256',
            }
        }
        self.request.headers.add_header('X-Amz-Checksum-sha256', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:454:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42616150>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42695f50>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:s3.eu-central-1.amazonaws.com
x-amz-checksum-sha256:foo
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:
x-amz-security-token:baz

host;x-amz-checksum-sha256;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
______ TestS3SigV4Auth.test_does_not_use_sha256_if_config_value_is_false _______
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_config_value_is_false>

    def test_does_not_use_sha256_if_config_value_is_false(self):
        self.client_config.s3['payload_signing_enabled'] = False
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:411:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42946c10>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42947a10>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:
x-amz-security-token:baz

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
________ TestS3SigV4Auth.test_does_not_use_sha256_if_context_config_set ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_context_config_set>

    def test_does_not_use_sha256_if_context_config_set(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:461:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a41cb2510>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a426a4110>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

content-md5:foo
host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:
x-amz-security-token:baz

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
_____________ TestS3SigV4Auth.test_does_not_use_sha256_if_md5_set ______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_md5_set>

    def test_does_not_use_sha256_if_md5_set(self):
        self.request.context['has_streaming_input'] = True
        self.request.headers.add_header('Content-MD5', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:440:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42a243d0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42a24650>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

content-md5:foo
host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:
x-amz-security-token:baz

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
________________ TestS3SigV4Auth.test_resign_with_content_hash _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_resign_with_content_hash>

    def test_resign_with_content_hash(self):
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:336:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a427155d0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a424dcf50>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
______________ TestS3SigV4Auth.test_sha256_if_context_set_on_http ______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_sha256_if_context_set_on_http>

    def test_sha256_if_context_set_on_http(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'http://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:469:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42a54390>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a4276f650>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket

content-md5:foo
host:s3.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
____________ TestS3SigV4Auth.test_sha256_if_context_set_without_md5 ____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_sha256_if_context_set_without_md5>

    def test_sha256_if_context_set_without_md5(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.url = 'https://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:476:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a428cf390>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a4281a450>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket

host:s3.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
_______________ TestS3SigV4Auth.test_signature_is_not_normalized _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_signature_is_not_normalized>

    def test_signature_is_not_normalized(self):
        request = AWSRequest()
        request.url = 'https://s3.amazonaws.com/bucket/foo/./bar/../bar'
        request.method = 'GET'
        credentials = botocore.credentials.Credentials(
            'access_key', 'secret_key'
        )
        auth = self.AuthClass(credentials, 's3', 'us-east-1')
>       auth.add_auth(request)

unit/auth/test_signers.py:352:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a4298e010>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42637bd0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/bucket/foo/./bar/../bar

host:s3.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:

host;x-amz-content-sha256;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________ TestS3SigV4Auth.test_uses_sha256_if_config_value_is_true ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_config_value_is_true>

    def test_uses_sha256_if_config_value_is_true(self):
        self.client_config.s3['payload_signing_enabled'] = True
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:405:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a429d41d0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42881a10>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
________________ TestS3SigV4Auth.test_uses_sha256_if_md5_unset _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_md5_unset>

    def test_uses_sha256_if_md5_unset(self):
        self.request.context['has_streaming_input'] = True
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:417:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42a10dd0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42b48310>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:s3.eu-central-1.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
________________ TestS3SigV4Auth.test_uses_sha256_if_not_https _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_not_https>

    def test_uses_sha256_if_not_https(self):
        self.request.context['has_streaming_input'] = True
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'http://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:425:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a42b20d90>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a429f02d0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket

content-md5:foo
host:s3.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
___________ TestS3SigV4Auth.test_uses_sha256_if_not_streaming_upload ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_not_streaming_upload>

    def test_uses_sha256_if_not_streaming_upload(self):
        self.request.context['has_streaming_input'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'https://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:433:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7f6a429ca810>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a429ca690>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/bucket

content-md5:foo
host:s3.amazonaws.com
x-amz-content-sha256:dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
x-amz-date:
x-amz-security-token:baz

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
dbd318c1c462aee872f41109a4dfd3048871a03dedd0fe0e757ced57dad6f2d7
_____________________ TestSigV4.test_thread_safe_timestamp _____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4 testMethod=test_thread_safe_timestamp>

    def test_thread_safe_timestamp(self):
        request = AWSRequest()
        request.url = (
            'https://search-testdomain1-j67dwxlet67gf7ghwfmik2c67i.us-west-2.'
            'cloudsearch.amazonaws.com/'
            '2013-01-01/search?format=sdk&pretty=true&'
            'q.options=%7B%22defaultOperator%22%3A%20%22and%22%2C%20%22'
            'fields%22%3A%5B%22directors%5E10%22%5D%7D&q=George%20Lucas'
        )
        request.method = 'GET'
        auth = self.create_signer('cloudsearchdomain', 'us-west-2')
        with mock.patch.object(
            botocore.auth.datetime,
            'datetime',
            mock.Mock(wraps=datetime.datetime),
        ) as mock_datetime:
            original_utcnow = datetime.datetime(2014, 1, 1, 0, 0)

            mock_datetime.utcnow.return_value = original_utcnow
            # Go through the add_auth process once. This will attach
            # a timestamp to the request at the beginning of auth.
            auth.add_auth(request)
>           self.assertEqual(request.context['timestamp'], '20140101T000000Z')
E           AssertionError: '20250908T081654Z' != '20140101T000000Z'
E           - 20250908T081654Z
E           + 20140101T000000Z

unit/auth/test_signers.py:533: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/2013-01-01/search
format=sdk&pretty=true&q=George%20Lucas&q.options=%7B%22defaultOperator%22%3A%20%22and%22%2C%20%22fields%22%3A%5B%22directors%5E10%22%5D%7D
host:search-testdomain1-j67dwxlet67gf7ghwfmik2c67i.us-west-2.cloudsearch.amazonaws.com
x-amz-date:20250908T081654Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081654Z
20250908/us-west-2/cloudsearchdomain/aws4_request
dde72178c1a615cb61b7a28f186a288e6a1aa6d3c4a0c48a569dd42c16ab4aa5
DEBUG    botocore.auth:auth.py:434 Signature:
99da72dfd8dcd6f4b3a82851d3b7f4c9ce8cc6be0d59605ae978e05f97b0973f
________________ TestSigV4Resign.test_resign_request_with_date _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Resign testMethod=test_resign_request_with_date>

    def test_resign_request_with_date(self):
        self.request.headers['Date'] = 'Thu, 17 Nov 2005 18:49:58 GMT'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:661:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4Auth object at 0x7f6a42aefcd0>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42aedf90>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

date:Tue, 01 Feb 0001 01:01:01 <MagicMock name='datetime.utcfromtimestamp().strftime()' id='140094360710864'>
host:ec2.amazonaws.com
x-amz-security-token:baz

date;host;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________________ TestSigV4Resign.test_sigv4_without_date ____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Resign testMethod=test_sigv4_without_date>

    def test_sigv4_without_date(self):
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:670:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4Auth object at 0x7f6a426d2e90>
request = <botocore.awsrequest.AWSRequest object at 0x7f6a42acb910>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
PUT
/

host:ec2.amazonaws.com
x-amz-date:
x-amz-security-token:baz

host;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
___________________ TestSigV4Presign.test_presign_no_params ____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_no_params>

    def test_presign_no_params(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://ec2.us-east-1.amazonaws.com/'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
>       self.assertEqual(
            query_string,
            {
                'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
                'X-Amz-Credential': (
                    'access_key/20140101/myregion/myservice/aws4_request'
                ),
                'X-Amz-Date': '20140101T000000Z',
                'X-Amz-Expires': '60',
                'X-Amz-Signature': (
                    'c70e0bcdb4cd3ee324f71c78195445b878'
                    '8315af0800bbbdbbb6d05a616fb84c'
                ),
                'X-Amz-SignedHeaders': 'host',
            },
        )
E       AssertionError: {'X-A[64 chars]ey/20250908/myregion/myservice/aws4_request', [169 chars]8a0'} != {'X-A[64 chars]ey/20140101/myregion/myservice/aws4_request', [169 chars]ost'}
E         {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081654Z',
E       +  'X-Amz-Date': '20140101T000000Z',
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': '60af1982ecd5644b572a745cfc40783b8ad368524298eb9871068dd63528c8a0',
E       +  'X-Amz-Signature': 'c70e0bcdb4cd3ee324f71c78195445b8788315af0800bbbdbbb6d05a616fb84c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:816: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fmyregion%2Fmyservice%2Faws4_request&X-Amz-Date=20250908T081654Z&X-Amz-Expires=60&X-Amz-SignedHeaders=host
host:ec2.us-east-1.amazonaws.com

host
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081654Z
20250908/myregion/myservice/aws4_request
5fa14d4ad6aac9d7e62504435e7b5a1f9f04fce0f6cffeebd67502026cfe5e21
DEBUG    botocore.auth:auth.py:434 Signature:
60af1982ecd5644b572a745cfc40783b8ad368524298eb9871068dd63528c8a0
____________ TestSigV4Presign.test_presign_where_body_is_json_bytes ____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_where_body_is_json_bytes>

    def test_presign_where_body_is_json_bytes(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://myservice.us-east-1.amazonaws.com/'
        request.data = b'{"Param": "value"}'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        expected_query_string = {
            'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
            'X-Amz-Credential': (
                'access_key/20140101/myregion/myservice/aws4_request'
            ),
            'X-Amz-Expires': '60',
            'X-Amz-Date': '20140101T000000Z',
            'X-Amz-Signature': (
                '8e1d372d168d532313ce6df8f64a7dc51d'
                'e6f312a9cfba6e5b345d8a771e839c'
            ),
            'X-Amz-SignedHeaders': 'host',
            'Param': 'value',
        }
>       self.assertEqual(query_string, expected_query_string)
E       AssertionError: {'Param': 'value', 'X-Amz-Algorithm': 'AWS4[259 chars]4ac'} != {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256', 'X-[259 chars]lue'}
E         {'Param': 'value',
E          'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081654Z',
E       +  'X-Amz-Date': '20140101T000000Z',
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': 'e0877ba8f1babd53aa4386bbcc5d371f51a9ce26a62015cfba63f7dd0ca384ac',
E       +  'X-Amz-Signature': '8e1d372d168d532313ce6df8f64a7dc51de6f312a9cfba6e5b345d8a771e839c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:961: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
Param=value&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fmyregion%2Fmyservice%2Faws4_request&X-Amz-Date=20250908T081654Z&X-Amz-Expires=60&X-Amz-SignedHeaders=host
host:myservice.us-east-1.amazonaws.com

host
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081654Z
20250908/myregion/myservice/aws4_request
cbd23aacc74e16c7b132ee9a56e2368ed407a3e5ab28369e9f4c12664478dd0a
DEBUG    botocore.auth:auth.py:434 Signature:
e0877ba8f1babd53aa4386bbcc5d371f51a9ce26a62015cfba63f7dd0ca384ac
___________ TestSigV4Presign.test_presign_where_body_is_json_string ____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_where_body_is_json_string>

    def test_presign_where_body_is_json_string(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://myservice.us-east-1.amazonaws.com/'
        request.data = '{"Param": "value"}'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        expected_query_string = {
            'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
            'X-Amz-Credential': (
                'access_key/20140101/myregion/myservice/aws4_request'
            ),
            'X-Amz-Expires': '60',
            'X-Amz-Date': '20140101T000000Z',
            'X-Amz-Signature': (
                '8e1d372d168d532313ce6df8f64a7dc51d'
                'e6f312a9cfba6e5b345d8a771e839c'
            ),
            'X-Amz-SignedHeaders': 'host',
            'Param': 'value',
        }
>       self.assertEqual(query_string, expected_query_string)
E       AssertionError: {'Param': 'value', 'X-Amz-Algorithm': 'AWS4[259 chars]4ac'} != {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256', 'X-[259 chars]lue'}
E         {'Param': 'value',
E          'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081654Z',
E       +  'X-Amz-Date': '20140101T000000Z',
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': 'e0877ba8f1babd53aa4386bbcc5d371f51a9ce26a62015cfba63f7dd0ca384ac',
E       +  'X-Amz-Signature': '8e1d372d168d532313ce6df8f64a7dc51de6f312a9cfba6e5b345d8a771e839c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:984: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
Param=value&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fmyregion%2Fmyservice%2Faws4_request&X-Amz-Date=20250908T081654Z&X-Amz-Expires=60&X-Amz-SignedHeaders=host
host:myservice.us-east-1.amazonaws.com

host
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081654Z
20250908/myregion/myservice/aws4_request
cbd23aacc74e16c7b132ee9a56e2368ed407a3e5ab28369e9f4c12664478dd0a
DEBUG    botocore.auth:auth.py:434 Signature:
e0877ba8f1babd53aa4386bbcc5d371f51a9ce26a62015cfba63f7dd0ca384ac
____________________ TestSigV4Presign.test_s3_sigv4_presign ____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_s3_sigv4_presign>

    def test_s3_sigv4_presign(self):
        auth = botocore.auth.S3SigV4QueryAuth(
            self.credentials, self.service_name, self.region_name, expires=60
        )
        request = AWSRequest()
        request.method = 'GET'
        request.url = (
            'https://s3.us-west-2.amazonaws.com/mybucket/keyname/.bar'
        )
        auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        # We use a different payload:
        self.assertEqual(auth.payload(request), 'UNSIGNED-PAYLOAD')
        # which will result in a different X-Amz-Signature:
>       self.assertEqual(
            query_string,
            {
                'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
                'X-Amz-Credential': (
                    'access_key/20140101/myregion/myservice/aws4_request'
                ),
                'X-Amz-Date': '20140101T000000Z',
                'X-Amz-Expires': '60',
                'X-Amz-Signature': (
                    'ac1b8b9e47e8685c5c963d75e35e8741d55251'
                    'cd955239cc1efad4dc7201db66'
                ),
                'X-Amz-SignedHeaders': 'host',
            },
        )
E       AssertionError: {'X-A[64 chars]ey/20250908/myregion/myservice/aws4_request', [169 chars]18c'} != {'X-A[64 chars]ey/20140101/myregion/myservice/aws4_request', [169 chars]ost'}
E         {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081654Z',
E       +  'X-Amz-Date': '20140101T000000Z',
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': '90fb280b3c0f2dc3b8f922fc53afef2d7070c5ab0abc4ad99a0a69858ea3f18c',
E       +  'X-Amz-Signature': 'ac1b8b9e47e8685c5c963d75e35e8741d55251cd955239cc1efad4dc7201db66',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:909: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/mybucket/keyname/.bar
X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fmyregion%2Fmyservice%2Faws4_request&X-Amz-Date=20250908T081654Z&X-Amz-Expires=60&X-Amz-SignedHeaders=host
host:s3.us-west-2.amazonaws.com

host
UNSIGNED-PAYLOAD
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081654Z
20250908/myregion/myservice/aws4_request
91db9d22397488e84ed23e953da791c1b096220aff0e2ab4006fe8a75337ddeb
DEBUG    botocore.auth:auth.py:434 Signature:
90fb280b3c0f2dc3b8f922fc53afef2d7070c5ab0abc4ad99a0a69858ea3f18c
_________________ TestS3SigV4Post.test_empty_fields_and_policy _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Post testMethod=test_empty_fields_and_policy>

    def test_empty_fields_and_policy(self):
        self.request = AWSRequest()
        self.request.url = f'https://s3.amazonaws.com/{self.bucket}'
        self.request.method = 'POST'
        self.auth.add_auth(self.request)

        result_fields = self.request.context['s3-presign-post-fields']
        self.assertEqual(result_fields['x-amz-algorithm'], 'AWS4-HMAC-SHA256')
>       self.assertEqual(
            result_fields['x-amz-credential'],
            'access_key/20140101/myregion/myservice/aws4_request',
        )
E       AssertionError: 'access_key/20250908/myregion/myservice/aws4_request' != 'access_key/20140101/myregion/myservice/aws4_request'
E       - access_key/20250908/myregion/myservice/aws4_request
E       ?              ^^ ^ ^
E       + access_key/20140101/myregion/myservice/aws4_request
E       ?              ^^ ^ ^

unit/auth/test_signers.py:1162: AssertionError
______________________ TestS3SigV4Post.test_presign_post _______________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Post testMethod=test_presign_post>

    def test_presign_post(self):
        self.auth.add_auth(self.request)
        result_fields = self.request.context['s3-presign-post-fields']
        self.assertEqual(result_fields['x-amz-algorithm'], 'AWS4-HMAC-SHA256')
>       self.assertEqual(
            result_fields['x-amz-credential'],
            'access_key/20140101/myregion/myservice/aws4_request',
        )
E       AssertionError: 'access_key/20250908/myregion/myservice/aws4_request' != 'access_key/20140101/myregion/myservice/aws4_request'
E       - access_key/20250908/myregion/myservice/aws4_request
E       ?              ^^ ^ ^
E       + access_key/20140101/myregion/myservice/aws4_request
E       ?              ^^ ^ ^

unit/auth/test_signers.py:1118: AssertionError
________________ TestS3SigV4Auth.test_blocklist_expect_headers _________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_expect_headers>

    def test_blocklist_expect_headers(self):
>       self._test_blocklist_header('expect', '100-continue')

unit/auth/test_signers.py:390:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc32b9d4f90>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31d9d0ed0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________________ TestS3SigV4Auth.test_blocklist_trace_id ____________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_trace_id>

    def test_blocklist_trace_id(self):
>       self._test_blocklist_header(
            'x-amzn-trace-id', 'Root=foo;Parent=bar;Sampleid=1'
        )

unit/auth/test_signers.py:393:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc31937e9d0>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32e534ad0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________ TestS3SigV4Auth.test_blocklist_transfer_encoding_header ____________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_transfer_encoding_header>

    def test_blocklist_transfer_encoding_header(self):
>       self._test_blocklist_header('transfer-encoding', 'chunked')

unit/auth/test_signers.py:401:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc318a5c990>
request = <botocore.awsrequest.AWSRequest object at 0x7fc318a5c5d0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
_______________ TestS3SigV4Auth.test_blocklist_user_agent_header _______________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_blocklist_user_agent_header>

    def test_blocklist_user_agent_header(self):
>       self._test_blocklist_header('user-agent', 'botocore/1.4.11')

unit/auth/test_signers.py:398:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_signers.py:386: in _test_blocklist_header
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc3193a1310>
request = <botocore.awsrequest.AWSRequest object at 0x7fc3193a0fd0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________ TestS3SigV4Auth.test_does_not_use_sha256_if_checksum_set ___________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_checksum_set>

    def test_does_not_use_sha256_if_checksum_set(self):
        self.request.context['has_streaming_input'] = True
        self.request.context['checksum'] = {
            'request_algorithm': {
                'in': 'header',
                'name': 'x-amz-checksum-sha256',
                'algorithm': 'sha256',
            }
        }
        self.request.headers.add_header('X-Amz-Checksum-sha256', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:454:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc31b8f2510>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31b8f22d0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
______ TestS3SigV4Auth.test_does_not_use_sha256_if_config_value_is_false _______
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_config_value_is_false>

    def test_does_not_use_sha256_if_config_value_is_false(self):
        self.client_config.s3['payload_signing_enabled'] = False
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:411:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc32b8c4410>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32b9d7e50>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
________ TestS3SigV4Auth.test_does_not_use_sha256_if_context_config_set ________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_context_config_set>

    def test_does_not_use_sha256_if_context_config_set(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:461:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc321133e10>
request = <botocore.awsrequest.AWSRequest object at 0x7fc3211319d0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
_____________ TestS3SigV4Auth.test_does_not_use_sha256_if_md5_set ______________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_does_not_use_sha256_if_md5_set>

    def test_does_not_use_sha256_if_md5_set(self):
        self.request.context['has_streaming_input'] = True
        self.request.headers.add_header('Content-MD5', 'foo')
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:440:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc31b903d90>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31b9037d0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
________________ TestS3SigV4Auth.test_resign_with_content_hash _________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_resign_with_content_hash>

    def test_resign_with_content_hash(self):
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:336:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc3211fab50>
request = <botocore.awsrequest.AWSRequest object at 0x7fc319398910>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
______________ TestS3SigV4Auth.test_sha256_if_context_set_on_http ______________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_sha256_if_context_set_on_http>

    def test_sha256_if_context_set_on_http(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'http://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:469:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc31aebc210>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31dde6a90>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
____________ TestS3SigV4Auth.test_sha256_if_context_set_without_md5 ____________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_sha256_if_context_set_without_md5>

    def test_sha256_if_context_set_without_md5(self):
        self.request.context['payload_signing_enabled'] = False
        self.request.url = 'https://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:476:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc32a0ce850>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32a0cebd0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
_______________ TestS3SigV4Auth.test_signature_is_not_normalized _______________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_signature_is_not_normalized>

    def test_signature_is_not_normalized(self):
        request = AWSRequest()
        request.url = 'https://s3.amazonaws.com/bucket/foo/./bar/../bar'
        request.method = 'GET'
        credentials = botocore.credentials.Credentials(
            'access_key', 'secret_key'
        )
        auth = self.AuthClass(credentials, 's3', 'us-east-1')
>       auth.add_auth(request)

unit/auth/test_signers.py:352:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc327fa73d0>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31ae95350>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________ TestS3SigV4Auth.test_uses_sha256_if_config_value_is_true ___________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_config_value_is_true>

    def test_uses_sha256_if_config_value_is_true(self):
        self.client_config.s3['payload_signing_enabled'] = True
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:405:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc32da5cc10>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32da5c350>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
________________ TestS3SigV4Auth.test_uses_sha256_if_md5_unset _________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_md5_unset>

    def test_uses_sha256_if_md5_unset(self):
        self.request.context['has_streaming_input'] = True
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:417:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc322336810>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31b8bc650>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
________________ TestS3SigV4Auth.test_uses_sha256_if_not_https _________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_not_https>

    def test_uses_sha256_if_not_https(self):
        self.request.context['has_streaming_input'] = True
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'http://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:425:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc3201631d0>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32b97a550>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________ TestS3SigV4Auth.test_uses_sha256_if_not_streaming_upload ___________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestS3SigV4Auth testMethod=test_uses_sha256_if_not_streaming_upload>

    def test_uses_sha256_if_not_streaming_upload(self):
        self.request.context['has_streaming_input'] = False
        self.request.headers.add_header('Content-MD5', 'foo')
        self.request.url = 'https://s3.amazonaws.com/bucket'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:433:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fc3255e08d0>
request = <botocore.awsrequest.AWSRequest object at 0x7fc31ae94ed0>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________________ TestSigV4Presign.test_presign_no_params ____________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_no_params>

    def test_presign_no_params(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://ec2.us-east-1.amazonaws.com/'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
>       self.assertEqual(
            query_string,
            {
                'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
                'X-Amz-Credential': (
                    'access_key/20140101/myregion/myservice/aws4_request'
                ),
                'X-Amz-Date': '20140101T000000Z',
                'X-Amz-Expires': '60',
                'X-Amz-Signature': (
                    'c70e0bcdb4cd3ee324f71c78195445b878'
                    '8315af0800bbbdbbb6d05a616fb84c'
                ),
                'X-Amz-SignedHeaders': 'host',
            },
        )
E       AssertionError: {'X-A[64 chars]ey/20250908/myregion/myservice/aws4_request', [169 chars]6bd'} != {'X-A[64 chars]ey/20140101/myregion/myservice/aws4_request', [169 chars]ost'}
E         {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081702Z',
E       ?                   ^^ ^ ^  --- ^
E
E       +  'X-Amz-Date': '20140101T000000Z',
E       ?                   ^^ ^ ^   ^^^^
E
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': '2d0409d0188281b984e9128946218238b5fc5c2e423e2dd7f5d06c8ade3f56bd',
E       +  'X-Amz-Signature': 'c70e0bcdb4cd3ee324f71c78195445b8788315af0800bbbdbbb6d05a616fb84c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:816: AssertionError
____________ TestSigV4Presign.test_presign_where_body_is_json_bytes ____________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_where_body_is_json_bytes>

    def test_presign_where_body_is_json_bytes(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://myservice.us-east-1.amazonaws.com/'
        request.data = b'{"Param": "value"}'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        expected_query_string = {
            'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
            'X-Amz-Credential': (
                'access_key/20140101/myregion/myservice/aws4_request'
            ),
            'X-Amz-Expires': '60',
            'X-Amz-Date': '20140101T000000Z',
            'X-Amz-Signature': (
                '8e1d372d168d532313ce6df8f64a7dc51d'
                'e6f312a9cfba6e5b345d8a771e839c'
            ),
            'X-Amz-SignedHeaders': 'host',
            'Param': 'value',
        }
>       self.assertEqual(query_string, expected_query_string)
E       AssertionError: {'Param': 'value', 'X-Amz-Algorithm': 'AWS4[259 chars]75f'} != {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256', 'X-[259 chars]lue'}
E         {'Param': 'value',
E          'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081702Z',
E       ?                   ^^ ^ ^  --- ^
E
E       +  'X-Amz-Date': '20140101T000000Z',
E       ?                   ^^ ^ ^   ^^^^
E
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': 'bf5057219be5f50f2f7ed5bf69cc0d5da3dd537df078a3622eafcfefd415c75f',
E       +  'X-Amz-Signature': '8e1d372d168d532313ce6df8f64a7dc51de6f312a9cfba6e5b345d8a771e839c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:961: AssertionError
___________ TestSigV4Presign.test_presign_where_body_is_json_string ____________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_presign_where_body_is_json_string>

    def test_presign_where_body_is_json_string(self):
        request = AWSRequest()
        request.method = 'GET'
        request.url = 'https://myservice.us-east-1.amazonaws.com/'
        request.data = '{"Param": "value"}'
        self.auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        expected_query_string = {
            'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
            'X-Amz-Credential': (
                'access_key/20140101/myregion/myservice/aws4_request'
            ),
            'X-Amz-Expires': '60',
            'X-Amz-Date': '20140101T000000Z',
            'X-Amz-Signature': (
                '8e1d372d168d532313ce6df8f64a7dc51d'
                'e6f312a9cfba6e5b345d8a771e839c'
            ),
            'X-Amz-SignedHeaders': 'host',
            'Param': 'value',
        }
>       self.assertEqual(query_string, expected_query_string)
E       AssertionError: {'Param': 'value', 'X-Amz-Algorithm': 'AWS4[259 chars]75f'} != {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256', 'X-[259 chars]lue'}
E         {'Param': 'value',
E          'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081702Z',
E       ?                   ^^ ^ ^  --- ^
E
E       +  'X-Amz-Date': '20140101T000000Z',
E       ?                   ^^ ^ ^   ^^^^
E
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': 'bf5057219be5f50f2f7ed5bf69cc0d5da3dd537df078a3622eafcfefd415c75f',
E       +  'X-Amz-Signature': '8e1d372d168d532313ce6df8f64a7dc51de6f312a9cfba6e5b345d8a771e839c',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:984: AssertionError
____________________ TestSigV4Presign.test_s3_sigv4_presign ____________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Presign testMethod=test_s3_sigv4_presign>

    def test_s3_sigv4_presign(self):
        auth = botocore.auth.S3SigV4QueryAuth(
            self.credentials, self.service_name, self.region_name, expires=60
        )
        request = AWSRequest()
        request.method = 'GET'
        request.url = (
            'https://s3.us-west-2.amazonaws.com/mybucket/keyname/.bar'
        )
        auth.add_auth(request)
        query_string = self.get_parsed_query_string(request)
        # We use a different payload:
        self.assertEqual(auth.payload(request), 'UNSIGNED-PAYLOAD')
        # which will result in a different X-Amz-Signature:
>       self.assertEqual(
            query_string,
            {
                'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
                'X-Amz-Credential': (
                    'access_key/20140101/myregion/myservice/aws4_request'
                ),
                'X-Amz-Date': '20140101T000000Z',
                'X-Amz-Expires': '60',
                'X-Amz-Signature': (
                    'ac1b8b9e47e8685c5c963d75e35e8741d55251'
                    'cd955239cc1efad4dc7201db66'
                ),
                'X-Amz-SignedHeaders': 'host',
            },
        )
E       AssertionError: {'X-A[64 chars]ey/20250908/myregion/myservice/aws4_request', [169 chars]ac0'} != {'X-A[64 chars]ey/20140101/myregion/myservice/aws4_request', [169 chars]ost'}
E         {'X-Amz-Algorithm': 'AWS4-HMAC-SHA256',
E       -  'X-Amz-Credential': 'access_key/20250908/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       +  'X-Amz-Credential': 'access_key/20140101/myregion/myservice/aws4_request',
E       ?                                    ^^ ^ ^
E
E       -  'X-Amz-Date': '20250908T081703Z',
E       ?                   ^^ ^ ^  --- ^
E
E       +  'X-Amz-Date': '20140101T000000Z',
E       ?                   ^^ ^ ^   ^^^^
E
E          'X-Amz-Expires': '60',
E       -  'X-Amz-Signature': '74bf69c931b214b258c14e1eac8381635937703e7d389ebd53c2439661c77ac0',
E       +  'X-Amz-Signature': 'ac1b8b9e47e8685c5c963d75e35e8741d55251cd955239cc1efad4dc7201db66',
E          'X-Amz-SignedHeaders': 'host'}

unit/auth/test_signers.py:909: AssertionError
________________ TestSigV4Resign.test_resign_request_with_date _________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Resign testMethod=test_resign_request_with_date>

    def test_resign_request_with_date(self):
        self.request.headers['Date'] = 'Thu, 17 Nov 2005 18:49:58 GMT'
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:661:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4Auth object at 0x7fc323f72690>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32b96ad50>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
___________________ TestSigV4Resign.test_sigv4_without_date ____________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.auth.test_signers.TestSigV4Resign testMethod=test_sigv4_without_date>

    def test_sigv4_without_date(self):
>       self.auth.add_auth(self.request)

unit/auth/test_signers.py:670:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4Auth object at 0x7fc318669210>
request = <botocore.awsrequest.AWSRequest object at 0x7fc3250d8b50>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
_____________ TestGenerateDBAuthToken.test_generate_db_auth_token ______________
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.test_signers.TestGenerateDBAuthToken testMethod=test_generate_db_auth_token>

    def test_generate_db_auth_token(self):
        hostname = 'prod-instance.us-east-1.rds.amazonaws.com'
        port = 3306
        username = 'someusername'
        clock = datetime.datetime(2016, 11, 7, 17, 39, 33, tzinfo=tzutc())

        with mock.patch('datetime.datetime') as dt:
            dt.utcnow.return_value = clock
>           result = generate_db_auth_token(
                self.client, hostname, port, username
            )

unit/test_signers.py:1155:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/signers.py:559: in generate_db_auth_token
    presigned_url = self._request_signer.generate_presigned_url(
../botocore/signers.py:355: in generate_presigned_url
    self.sign(
../botocore/signers.py:200: in sign
    auth.add_auth(request)
../botocore/auth.py:427: in add_auth
    self._modify_request_before_signing(request)
../botocore/auth.py:732: in _modify_request_before_signing
    'X-Amz-Credential': self.scope(request),
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4QueryAuth object at 0x7fd86171d6d0>
request = <botocore.awsrequest.AWSRequest object at 0x7fd861b469d0>

    def scope(self, request):
        scope = [self.credentials.access_key]
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 1: expected str instance, MagicMock found

../botocore/auth.py:388: TypeError
_________ TestDSQLGenerateDBAuthToken.test_dsql_generate_db_auth_token _________
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.test_signers.TestDSQLGenerateDBAuthToken testMethod=test_dsql_generate_db_auth_token>

    @FreezeTime(botocore.auth.datetime, date=DATE)
    def test_dsql_generate_db_auth_token(self):
        result = _dsql_generate_db_auth_token(
            self.client, self.hostname, self.action
        )

        expected_result = (
            'test.dsql.us-east-1.on.aws/?Action=DbConnect'
            '&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential='
            'ACCESS_KEY%2F20241107%2Fus-east-1%2Fdsql%2Faws4_request'
            '&X-Amz-Date=20241107T173933Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host'
            '&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature='
            '57fe03e060348aaa21405c239bf02572bbc911076e94dcd65c12ae569dd8fcf4'
        )

        # A scheme needs to be appended to the beginning or urlsplit may fail
        # on certain systems.
>       assert_url_equal('https://' + result, 'https://' + expected_result)

unit/test_signers.py:1216:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

url1 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnect&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KEY%2F2...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=e54ab9c090fc5bd2844a38f340db759abe62583964e9323b3723c23bf3908973'
url2 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnect&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KEY%2F2...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=57fe03e060348aaa21405c239bf02572bbc911076e94dcd65c12ae569dd8fcf4'

    def assert_url_equal(url1, url2):
        parts1 = _urlparse(url1)
        parts2 = _urlparse(url2)

        # Because the query string ordering isn't relevant, we have to parse
        # every single part manually and then handle the query string.
        assert parts1.scheme == parts2.scheme
        assert parts1.netloc == parts2.netloc
        assert parts1.path == parts2.path
        assert parts1.params == parts2.params
        assert parts1.fragment == parts2.fragment
        assert parts1.username == parts2.username
        assert parts1.password == parts2.password
        assert parts1.hostname == parts2.hostname
        assert parts1.port == parts2.port
>       assert parse_qs(parts1.query) == parse_qs(parts2.query)
E       AssertionError

__init__.py:388: AssertionError
__ TestDSQLGenerateDBAuthToken.test_dsql_generate_db_connect_admin_auth_token __
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.test_signers.TestDSQLGenerateDBAuthToken testMethod=test_dsql_generate_db_connect_admin_auth_token>

    @FreezeTime(botocore.auth.datetime, date=DATE)
    def test_dsql_generate_db_connect_admin_auth_token(self):
        result = dsql_generate_db_connect_admin_auth_token(
            self.client, self.hostname
        )

        expected_result = (
            'test.dsql.us-east-1.on.aws/?Action=DbConnectAdmin'
            '&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential='
            'ACCESS_KEY%2F20241107%2Fus-east-1%2Fdsql%2Faws4_request'
            '&X-Amz-Date=20241107T173933Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host'
            '&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature='
            '5ac084bc7cabccc19a52a5d1b5c24b50d3ce143f43b659bd484c91aaf555e190'
        )

        # A scheme needs to be appended to the beginning or urlsplit may fail
        # on certain systems.
>       assert_url_equal('https://' + result, 'https://' + expected_result)

unit/test_signers.py:1254:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

url1 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnectAdmin&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KE...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=ccab0c2f89a740ea505a85fda9a47249c46bd5a8787c458f382f48fc5093e280'
url2 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnectAdmin&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KE...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=5ac084bc7cabccc19a52a5d1b5c24b50d3ce143f43b659bd484c91aaf555e190'

    def assert_url_equal(url1, url2):
        parts1 = _urlparse(url1)
        parts2 = _urlparse(url2)

        # Because the query string ordering isn't relevant, we have to parse
        # every single part manually and then handle the query string.
        assert parts1.scheme == parts2.scheme
        assert parts1.netloc == parts2.netloc
        assert parts1.path == parts2.path
        assert parts1.params == parts2.params
        assert parts1.fragment == parts2.fragment
        assert parts1.username == parts2.username
        assert parts1.password == parts2.password
        assert parts1.hostname == parts2.hostname
        assert parts1.port == parts2.port
>       assert parse_qs(parts1.query) == parse_qs(parts2.query)
E       AssertionError

__init__.py:388: AssertionError
________________ test_signature_version_4[post-header-key-sort] ________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-header-key-sort'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=fe1fe4a335110790a620724595955b2ccde239ee7ff2296d0eec37793c563cd5'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=c5410059b04c1ee005303aed430f6e6645f61f4dc9e1461ec8f8916fdf18852c'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1:value1\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=fe1fe4a335110790a620724595955b2ccde239ee7ff2296d0eec37793c563cd5' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=c5410059b04c1ee005303aed430f6e6645f61f4dc9e1461ec8f8916fdf18852c'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1:value1
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
my-header1:value1
x-amz-date:20250908T081711Z

host;my-header1;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
5bf9219851fa521bd56500843bb7eb7248a3fc73ab3958581abebd568062d6e5
DEBUG    botocore.auth:auth.py:434 Signature:
fe1fe4a335110790a620724595955b2ccde239ee7ff2296d0eec37793c563cd5
________ test_signature_version_4[normalize-path/get-special-character] ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-special-character'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=e627f0f934b790734a94075d8060d5f3b9c2d2ea21e9f6cd60460e4c57b17106'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a853c9b21b528b19643d00910d35b83a10c366a10833ceefb45edd6c80e40f27'
raw_request = 'GET /example/$delete HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z\n'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=e627f0f934b790734a94075d8060d5f3b9c2d2ea21e9f6cd60460e4c57b17106' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a853c9b21b528b19643d00910d35b83a10c366a10833ceefb45edd6c80e40f27'
E           The raw request was:
E           GET /example/$delete HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/example/%24delete

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
0f71805dfb2aa3979b2411d89b0c0987fa1e3625c7ab8d0f002293cbfd08824d
DEBUG    botocore.auth:auth.py:434 Signature:
e627f0f934b790734a94075d8060d5f3b9c2d2ea21e9f6cd60460e4c57b17106
____________ test_signature_version_4[normalize-path/get-relative] _____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-relative'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET /example/.. HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET /example/.. HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f716ed1d2feaa13aaaf8f25903a5f83ff266b5d8c77debdb009ea25460ad0d21
DEBUG    botocore.auth:auth.py:434 Signature:
482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944
_____ TestDSQLGenerateDBAuthToken.test_dsql_generate_db_connect_auth_token _____
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.unit.test_signers.TestDSQLGenerateDBAuthToken testMethod=test_dsql_generate_db_connect_auth_token>

    @FreezeTime(botocore.auth.datetime, date=DATE)
    def test_dsql_generate_db_connect_auth_token(self):
        result = dsql_generate_db_connect_auth_token(
            self.client, self.hostname
        )

        expected_result = (
            'test.dsql.us-east-1.on.aws/?Action=DbConnect'
            '&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential='
            'ACCESS_KEY%2F20241107%2Fus-east-1%2Fdsql%2Faws4_request'
            '&X-Amz-Date=20241107T173933Z&X-Amz-Expires=900&X-Amz-SignedHeaders=host'
            '&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature='
            '57fe03e060348aaa21405c239bf02572bbc911076e94dcd65c12ae569dd8fcf4'
        )

        # A scheme needs to be appended to the beginning or urlsplit may fail
        # on certain systems.
>       assert_url_equal('https://' + result, 'https://' + expected_result)

unit/test_signers.py:1235:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

url1 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnect&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KEY%2F2...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=7aaa32f918ed9ee539bef876739219f64d57ec4d0d54310536410602da24be3d'
url2 = 'https://test.dsql.us-east-1.on.aws/?Action=DbConnect&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ACCESS_KEY%2F2...st&X-Amz-Security-Token=SESSION_TOKEN&X-Amz-Signature=57fe03e060348aaa21405c239bf02572bbc911076e94dcd65c12ae569dd8fcf4'

    def assert_url_equal(url1, url2):
        parts1 = _urlparse(url1)
        parts2 = _urlparse(url2)

        # Because the query string ordering isn't relevant, we have to parse
        # every single part manually and then handle the query string.
        assert parts1.scheme == parts2.scheme
        assert parts1.netloc == parts2.netloc
        assert parts1.path == parts2.path
        assert parts1.params == parts2.params
        assert parts1.fragment == parts2.fragment
        assert parts1.username == parts2.username
        assert parts1.password == parts2.password
        assert parts1.hostname == parts2.hostname
        assert parts1.port == parts2.port
>       assert parse_qs(parts1.query) == parse_qs(parts2.query)
E       AssertionError

__init__.py:388: AssertionError
______________ test_signature_version_4[normalize-path/get-slash] ______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-slash'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET // HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET // HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f716ed1d2feaa13aaaf8f25903a5f83ff266b5d8c77debdb009ea25460ad0d21
DEBUG    botocore.auth:auth.py:434 Signature:
482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944
________ test_signature_version_4[normalize-path/get-relative-relative] ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-relative-relative'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET /example1/example2/../.. HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET /example1/example2/../.. HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f716ed1d2feaa13aaaf8f25903a5f83ff266b5d8c77debdb009ea25460ad0d21
DEBUG    botocore.auth:auth.py:434 Signature:
482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944
_________ test_signature_version_4[normalize-path/get-slash-dot-slash] _________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-slash-dot-slash'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET /./ HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET /./ HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f716ed1d2feaa13aaaf8f25903a5f83ff266b5d8c77debdb009ea25460ad0d21
DEBUG    botocore.auth:auth.py:434 Signature:
482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944
_______ test_signature_version_4[normalize-path/get-slash-pointless-dot] _______
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-slash-pointless-dot'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=b1d118b657e2dab9ed51bdc9443a16c61afac57f9a40f9f408abe7eab58c335b'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=ef75d96142cf21edca26f06005da7988e4f8dc83a165a80865db7089db637ec5'
raw_request = 'GET /./example HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=b1d118b657e2dab9ed51bdc9443a16c61afac57f9a40f9f408abe7eab58c335b' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=ef75d96142cf21edca26f06005da7988e4f8dc83a165a80865db7089db637ec5'
E           The raw request was:
E           GET /./example HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/example

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
0227bbb74eb4c1e92aebf53d82c6f5c0f58504d93a7d2c599d51b956742ad684
DEBUG    botocore.auth:auth.py:434 Signature:
b1d118b657e2dab9ed51bdc9443a16c61afac57f9a40f9f408abe7eab58c335b
_____________ test_signature_version_4[normalize-path/get-slashes] _____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'normalize-path/get-slashes'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=d271a64e953f57467ed58f85e377e7d327f57f5060cd48740b52b67dbb1a06e3'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9a624bd73a37c9a373b5312afbebe7a714a789de108f0bdfe846570885f57e84'
raw_request = 'GET //example// HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=d271a64e953f57467ed58f85e377e7d327f57f5060cd48740b52b67dbb1a06e3' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9a624bd73a37c9a373b5312afbebe7a714a789de108f0bdfe846570885f57e84'
E           The raw request was:
E           GET //example// HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/example/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
918a49355943120cbf7b4e423de4dc9bcf9be4ce726e76a2335cf2fd46a20236
DEBUG    botocore.auth:auth.py:434 Signature:
d271a64e953f57467ed58f85e377e7d327f57f5060cd48740b52b67dbb1a06e3
_________________ test_signature_version_4[get-vanilla-query] __________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-query'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f716ed1d2feaa13aaaf8f25903a5f83ff266b5d8c77debdb009ea25460ad0d21
DEBUG    botocore.auth:auth.py:434 Signature:
482e1c28351a2d3f7979ccae9cdb10bde1ada90ca3070ea6886e37b8cc2bf944
_______ test_signature_version_4[post-sts-token/post-sts-header-before] ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-sts-token/post-sts-header-before'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date;x-amz-security-token, Signature=366996b5e460fe810902650f9bee9d2bfd1425daa2477984b0f06cc59c799e07'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date;x-amz-security-token, Signature=85d96828115b5dc0cfc3bd16ad9e210dd772bbebba041836c64533a82be05ead'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z\nX-Amz-Security-Token:AQoDYXdzEPT//////////w...QcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz+scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA=='
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date;x-amz-security-token, Signature=366996b5e460fe810902650f9bee9d2bfd1425daa2477984b0f06cc59c799e07' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date;x-amz-security-token, Signature=85d96828115b5dc0cfc3bd16ad9e210dd772bbebba041836c64533a82be05ead'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z
E           X-Amz-Security-Token:AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQWLWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI/qkPpKPi/kMcGdQrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz+scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA==

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z
x-amz-security-token:AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQWLWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI/qkPpKPi/kMcGdQrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz+scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA==

host;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
6bc146764ccc333a77c6413b49a7271a707f822ee97bd44c67cf19ac23635fa6
DEBUG    botocore.auth:auth.py:434 Signature:
366996b5e460fe810902650f9bee9d2bfd1425daa2477984b0f06cc59c799e07
________ test_signature_version_4[post-sts-token/post-sts-header-after] ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-sts-token/post-sts-header-after'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=877ae248b52e6d37fbcbdbc559062cdaff584fb60219869eb8ef70e7ae4dee3e'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=877ae248b52e6d37fbcbdbc559062cdaff584fb60219869eb8ef70e7ae4dee3e' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
ea68e61439d0732b8e25a054e7f65bb365931c514d05f79238ee4d97f9e9ea01
DEBUG    botocore.auth:auth.py:434 Signature:
877ae248b52e6d37fbcbdbc559062cdaff584fb60219869eb8ef70e7ae4dee3e
____________ test_signature_version_4[get-vanilla-empty-query-key] _____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-empty-query-key'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=31fe089de9dd758e0046250fb1fc4b2f14e2c0c6bc5fc5ff14b5b4d8d64e2baa'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a67d582fa61cc504c4bae71f336f98b97f1ea3c7a6bfe1b6e45aec72011b9aeb'
raw_request = 'GET /?Param1=value1 HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=31fe089de9dd758e0046250fb1fc4b2f14e2c0c6bc5fc5ff14b5b4d8d64e2baa' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a67d582fa61cc504c4bae71f336f98b97f1ea3c7a6bfe1b6e45aec72011b9aeb'
E           The raw request was:
E           GET /?Param1=value1 HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
Param1=value1
host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
50b6605eec9c7e225608ea9bc06bc7a2878c5277a67b6b05ea983ddc07d99f4e
DEBUG    botocore.auth:auth.py:434 Signature:
31fe089de9dd758e0046250fb1fc4b2f14e2c0c6bc5fc5ff14b5b4d8d64e2baa
______________________ test_signature_version_4[get-utf8] ______________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-utf8'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=1e80a3f46c6cde39d2df5070c39200607fbd53053e3054872b9d7a10d754b9b2'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=8318018e0b0f223aa2bbf98705b62bb787dc9c0e678f255a891fd03141be5d85'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=1e80a3f46c6cde39d2df5070c39200607fbd53053e3054872b9d7a10d754b9b2' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=8318018e0b0f223aa2bbf98705b62bb787dc9c0e678f255a891fd03141be5d85'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/%E1%88%B4

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
facde61e8974590fad7973f1c69cfc5f284bb10a5e61dbf08227775ec3aa2d43
DEBUG    botocore.auth:auth.py:434 Signature:
1e80a3f46c6cde39d2df5070c39200607fbd53053e3054872b9d7a10d754b9b2
___________ test_signature_version_4[get-vanilla-with-session-token] ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-with-session-token'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:144: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'GET\n/\n\nhost:example.amazonaws.com\nx-amz-date:20150830T123600Z\n\nhost;x-amz-date\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'
expected = 'GET\n/\n\nhost:example.amazonaws.com\nx-amz-date:20150830T123600Z\nx-amz-security-token:6e86291e8372ff2a2260956d9b8aa...b73ebf194267\n\nhost;x-amz-date;x-amz-security-token\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'canonical_request'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The canonical_request did not match
E           ACTUAL:'GET\n/\n\nhost:example.amazonaws.com\nx-amz-date:20150830T123600Z\n\nhost;x-amz-date\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855' !=
E           EXPECT:'GET\n/\n\nhost:example.amazonaws.com\nx-amz-date:20150830T123600Z\nx-amz-security-token:6e86291e8372ff2a2260956d9b8aae1d763fbf315fa00fa31553b73ebf194267\n\nhost;x-amz-date;x-amz-security-token\ne3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081711Z
x-amz-security-token:6e86291e8372ff2a2260956d9b8aae1d763fbf315fa00fa31553b73ebf194267

host;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
f0ba15931fa85be411153d833aa88e5af53f80c132d2aad957d45afab6404d98
DEBUG    botocore.auth:auth.py:434 Signature:
557f47dafc99add69c267806f53985628389a3acce4fa0e60bfe4e041a477ed2
___________________ test_signature_version_4[get-unreserved] ___________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-unreserved'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5a2d3fe0c64b0e19430fc17c736d55420d2de9a14e9ecde1e2bff49dfb02eb86'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=07ef7494c76fa4850883e2b006601f940f8a34d404d0cfa977f52a65bbf5f24f'
raw_request = 'GET /-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5a2d3fe0c64b0e19430fc17c736d55420d2de9a14e9ecde1e2bff49dfb02eb86' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=07ef7494c76fa4850883e2b006601f940f8a34d404d0cfa977f52a65bbf5f24f'
E           The raw request was:
E           GET /-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz

host:example.amazonaws.com
x-amz-date:20250908T081711Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081711Z
20250908/us-east-1/service/aws4_request
474bb52221cd31e194b4d584fd413d6045c7b8e75cb5536faa271144008a585f
DEBUG    botocore.auth:auth.py:434 Signature:
5a2d3fe0c64b0e19430fc17c736d55420d2de9a14e9ecde1e2bff49dfb02eb86
_________________ test_signature_version_4[post-vanilla-query] _________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-vanilla-query'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=28038455d6de14eafc1f9222cf5aa6f1a96197d7deb8263271d420d138af7f11'
raw_request = 'POST /?Param1=value1 HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=28038455d6de14eafc1f9222cf5aa6f1a96197d7deb8263271d420d138af7f11'
E           The raw request was:
E           POST /?Param1=value1 HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/
Param1=value1
host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
7722364716b63f8defb7b120f2fe1da5a6b6399f35178bffa358135caa50eb6f
DEBUG    botocore.auth:auth.py:434 Signature:
09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246
________________ test_signature_version_4[post-header-key-case] ________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-header-key-case'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
76b04b86ab086088995ab3b8a5a62daae07d985d96571efa3375f8ef122fab36
DEBUG    botocore.auth:auth.py:434 Signature:
4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc
______________ test_signature_version_4[get-header-key-duplicate] ______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-header-key-duplicate'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=d023779387487643e974e6f1a3ec69b242e313b1e6ba7697c6020f9f1fd98e69'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=c9d5ea9f3f72853aea855b47ea873832890dbdd183b4468f858259531a5138ea'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1:value2\nMy-Header1:value2\nMy-Header1:value1\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=d023779387487643e974e6f1a3ec69b242e313b1e6ba7697c6020f9f1fd98e69' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=c9d5ea9f3f72853aea855b47ea873832890dbdd183b4468f858259531a5138ea'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1:value2
E           My-Header1:value2
E           My-Header1:value1
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
my-header1:value2,value2,value1
x-amz-date:20250908T081712Z

host;my-header1;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
6e45efa4484e03dea61a00ef4a845fcf5999b5f58c0f565477a5cad5a59f9963
DEBUG    botocore.auth:auth.py:434 Signature:
d023779387487643e974e6f1a3ec69b242e313b1e6ba7697c6020f9f1fd98e69
_______________ test_signature_version_4[post-header-value-case] _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-header-value-case'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=939d5e91a01e8143c658d2c0039ba07a51422f073b1eb72286974373fc1dc97e'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=cdbc9802e29d2942e5e10b5bccfdd67c5f22c7c4e8ae67b53629efa58b974b7d'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1:VALUE1\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=939d5e91a01e8143c658d2c0039ba07a51422f073b1eb72286974373fc1dc97e' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=cdbc9802e29d2942e5e10b5bccfdd67c5f22c7c4e8ae67b53629efa58b974b7d'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1:VALUE1
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
my-header1:VALUE1
x-amz-date:20250908T081712Z

host;my-header1;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
8c35c838d4aac2a14fdc9c54d2d05b0ab0e6719312f9bd9c14d92cc9d740c75d
DEBUG    botocore.auth:auth.py:434 Signature:
939d5e91a01e8143c658d2c0039ba07a51422f073b1eb72286974373fc1dc97e
_______________ test_signature_version_4[get-vanilla-utf8-query] _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-utf8-query'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=07483624d5a0ea6800d13c3da1ba58e4528ece48074ad066a179973cdb391267'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=2cdec8eed098649ff3a119c94853b13c643bcf08f8b0a1d91e12c9027818dd04'
raw_request = 'GET /?=bar HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=07483624d5a0ea6800d13c3da1ba58e4528ece48074ad066a179973cdb391267' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=2cdec8eed098649ff3a119c94853b13c643bcf08f8b0a1d91e12c9027818dd04'
E           The raw request was:
E           GET /?=bar HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
%E1%88%B4=bar
host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
48168bef93d52551982a8aaadb61cb32fcaf21c13db2942192345064c1efe00c
DEBUG    botocore.auth:auth.py:434 Signature:
07483624d5a0ea6800d13c3da1ba58e4528ece48074ad066a179973cdb391267
_______ test_signature_version_4[post-x-www-form-urlencoded-parameters] ________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-x-www-form-urlencoded-parameters'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=4fe27449e95c9cc0f384f0585060a21350ed4c2b4d576c33a8ed9f7d4050cc95'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=1a72ec8f64bd914b0e42e42607c7fbce7fb2c7465f63e3092b3b0d39fa77a6fe'
raw_request = 'POST / HTTP/1.1\nContent-Type:application/x-www-form-urlencoded; charset=utf8\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z\n\nParam1=value1'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=4fe27449e95c9cc0f384f0585060a21350ed4c2b4d576c33a8ed9f7d4050cc95' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=1a72ec8f64bd914b0e42e42607c7fbce7fb2c7465f63e3092b3b0d39fa77a6fe'
E           The raw request was:
E           POST / HTTP/1.1
E           Content-Type:application/x-www-form-urlencoded; charset=utf8
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z
E
E           Param1=value1

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf8
host:example.amazonaws.com
x-amz-date:20250908T081712Z

content-type;host;x-amz-date
9095672bbd1f56dfc5b65f3e153adc8731a4a654192329106275f4c7b24d0b6e
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
5670cf4cc17ebb3fc02efc4331ba9fc69d6db3035cd0593fbbf2fe292767a84b
DEBUG    botocore.auth:auth.py:434 Signature:
4fe27449e95c9cc0f384f0585060a21350ed4c2b4d576c33a8ed9f7d4050cc95
_____________ test_signature_version_4[post-x-www-form-urlencoded] _____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-x-www-form-urlencoded'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=0c3262e72a3b74e5b2e2422b49bb531cb642c9ab12188cf3ef7e9b5938a163aa'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=ff11897932ad3f4e8b18135d722051e5ac45fc38421b1da7b9d196a0fe09473a'
raw_request = 'POST / HTTP/1.1\nContent-Type:application/x-www-form-urlencoded\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z\n\nParam1=value1'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=0c3262e72a3b74e5b2e2422b49bb531cb642c9ab12188cf3ef7e9b5938a163aa' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=ff11897932ad3f4e8b18135d722051e5ac45fc38421b1da7b9d196a0fe09473a'
E           The raw request was:
E           POST / HTTP/1.1
E           Content-Type:application/x-www-form-urlencoded
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z
E
E           Param1=value1

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded
host:example.amazonaws.com
x-amz-date:20250908T081712Z

content-type;host;x-amz-date
9095672bbd1f56dfc5b65f3e153adc8731a4a654192329106275f4c7b24d0b6e
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
f9553550594a9a5c58b50d87bf38a416d35820a2f332d7d640af46b1fa7138b4
DEBUG    botocore.auth:auth.py:434 Signature:
0c3262e72a3b74e5b2e2422b49bb531cb642c9ab12188cf3ef7e9b5938a163aa
____________ test_signature_version_4[get-vanilla-query-unreserved] ____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-query-unreserved'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a43604da0f096d772335e20b2dfab832d6451e1d97af9adbec393085f251adb8'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9c3e54bfcdf0b19771a7f523ee5669cdf59bc7cc0884027167c21bb143a40197'
raw_request = 'GET /?-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz=-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=a43604da0f096d772335e20b2dfab832d6451e1d97af9adbec393085f251adb8' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9c3e54bfcdf0b19771a7f523ee5669cdf59bc7cc0884027167c21bb143a40197'
E           The raw request was:
E           GET /?-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz=-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz=-._~0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
42f730f7da4f4361bfa2bb6f5726f7a38bba9b37b9ed50dfa787b8f911c648de
DEBUG    botocore.auth:auth.py:434 Signature:
a43604da0f096d772335e20b2dfab832d6451e1d97af9adbec393085f251adb8
_____________ test_signature_version_4[get-header-value-multiline] _____________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-header-value-multiline'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=6d01a685fc0ad16c77f6f4b9f9aa49e487b09d2d9f199cbe1583ced4aaafb0d2'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=cfd34249e4b1c8d6b91ef74165d41a32e5fab3306300901bb65a51a73575eefd'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1:value1\n  value2\n     value3\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=6d01a685fc0ad16c77f6f4b9f9aa49e487b09d2d9f199cbe1583ced4aaafb0d2' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=cfd34249e4b1c8d6b91ef74165d41a32e5fab3306300901bb65a51a73575eefd'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1:value1
E             value2
E                value3
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
my-header1:value1 value2 value3
x-amz-date:20250908T081712Z

host;my-header1;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
d94df139be5ac5569e6ae1661b76b7113426ac22e59338a833cebba026f22873
DEBUG    botocore.auth:auth.py:434 Signature:
6d01a685fc0ad16c77f6f4b9f9aa49e487b09d2d9f199cbe1583ced4aaafb0d2
_______________ test_signature_version_4[get-header-value-trim] ________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-header-value-trim'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;my-header2;x-amz-date, Signature=eb1fcf1b12b8326a7eff3225593de6a1a911a0359b3a4bedab45e8255252cf1a'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;my-header2;x-amz-date, Signature=acc3ed3afb60bb290fc8d2dd0098b9911fcaa05412b367055dee359757a9c736'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1: value1\nMy-Header2: "a   b   c"\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;my-header2;x-amz-date, Signature=eb1fcf1b12b8326a7eff3225593de6a1a911a0359b3a4bedab45e8255252cf1a' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;my-header2;x-amz-date, Signature=acc3ed3afb60bb290fc8d2dd0098b9911fcaa05412b367055dee359757a9c736'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1: value1
E           My-Header2: "a   b   c"
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
my-header1:value1
my-header2:"a b c"
x-amz-date:20250908T081712Z

host;my-header1;my-header2;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
342f2b994c7b75c58d7b6bfd4ceaeb578b48e98ed34c4e398ef3162e512bf9d7
DEBUG    botocore.auth:auth.py:434 Signature:
eb1fcf1b12b8326a7eff3225593de6a1a911a0359b3a4bedab45e8255252cf1a
____________________ test_signature_version_4[get-vanilla] _____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9cbeb2f357baa7ecfb1fe396864005497ea668f0bd656a84088ea181646cf3e7'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=9cbeb2f357baa7ecfb1fe396864005497ea668f0bd656a84088ea181646cf3e7' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5fa00fa31553b73ebf1942676e86291e8372ff2a2260956d9b8aae1d763fbf31'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
8d01a7ce229a6485ecbd86612423d85e0cce975eec978f58811642cce110c5f7
DEBUG    botocore.auth:auth.py:434 Signature:
9cbeb2f357baa7ecfb1fe396864005497ea668f0bd656a84088ea181646cf3e7
__________ test_signature_version_4[get-vanilla-query-order-encoded] ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-vanilla-query-order-encoded'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=498c7bb9d5a88b8f282a6e8979cb0b6759c9b8498df766a3683e19276aff2936'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=371d3713e185cc334048618a97f809c9ffe339c62934c032af5a0e595648fcac'
raw_request = 'GET /?Param-3=Value3&Param=Value2&%E1%88%B4=Value1 HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z\n'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=498c7bb9d5a88b8f282a6e8979cb0b6759c9b8498df766a3683e19276aff2936' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=371d3713e185cc334048618a97f809c9ffe339c62934c032af5a0e595648fcac'
E           The raw request was:
E           GET /?Param-3=Value3&Param=Value2&%E1%88%B4=Value1 HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
%E1%88%B4=Value1&Param=Value2&Param-3=Value3
host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
661716369e053b2f5e55688fe2919ec3206a79b8b7f933dfab8ad570631cab56
DEBUG    botocore.auth:auth.py:434 Signature:
498c7bb9d5a88b8f282a6e8979cb0b6759c9b8498df766a3683e19276aff2936
___________ test_signature_version_4[post-vanilla-empty-query-value] ___________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-vanilla-empty-query-value'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=28038455d6de14eafc1f9222cf5aa6f1a96197d7deb8263271d420d138af7f11'
raw_request = 'POST /?Param1=value1 HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=28038455d6de14eafc1f9222cf5aa6f1a96197d7deb8263271d420d138af7f11'
E           The raw request was:
E           POST /?Param1=value1 HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/
Param1=value1
host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
7722364716b63f8defb7b120f2fe1da5a6b6399f35178bffa358135caa50eb6f
DEBUG    botocore.auth:auth.py:434 Signature:
09b0f9d26201763449f2078e4b1ea52056ebf06cb91f023b2e85597d0466d246
_______________ test_signature_version_4[get-header-value-order] _______________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'get-header-value-order'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=8d3f5864acfc88b5b572babeb1a8d53aa70117abe04bd691680472ce2895101f'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=08c7e5a9acfcfeb3ab6b2185e75ce8b1deb5e634ec47601a50643f830c755c01'
raw_request = 'GET / HTTP/1.1\nHost:example.amazonaws.com\nMy-Header1:value4\nMy-Header1:value1\nMy-Header1:value3\nMy-Header1:value2\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=8d3f5864acfc88b5b572babeb1a8d53aa70117abe04bd691680472ce2895101f' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;my-header1;x-amz-date, Signature=08c7e5a9acfcfeb3ab6b2185e75ce8b1deb5e634ec47601a50643f830c755c01'
E           The raw request was:
E           GET / HTTP/1.1
E           Host:example.amazonaws.com
E           My-Header1:value4
E           My-Header1:value1
E           My-Header1:value3
E           My-Header1:value2
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/

host:example.amazonaws.com
my-header1:value4,value1,value3,value2
x-amz-date:20250908T081712Z

host;my-header1;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
680d1bf8752a299c476744ac57b2c25f898cd8f0f005603695fe9a3a3ea43138
DEBUG    botocore.auth:auth.py:434 Signature:
8d3f5864acfc88b5b572babeb1a8d53aa70117abe04bd691680472ce2895101f
____________________ test_signature_version_4[post-vanilla] ____________________
[gw1] linux -- Python 3.11.0 /app/.venv/bin/python3.11

test_case = 'post-vanilla'

    @pytest.mark.parametrize("test_case", generate_test_cases())
    @FreezeTime(module=botocore.auth.datetime, date=DATE)
    def test_signature_version_4(test_case):
>       _test_signature_version_4(test_case)

unit/auth/test_sigv4.py:98:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
unit/auth/test_sigv4.py:158: in _test_signature_version_4
    assert_equal(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

actual = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc'
expected = 'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
raw_request = 'POST / HTTP/1.1\nHost:example.amazonaws.com\nX-Amz-Date:20150830T123600Z'
part = 'authheader'

    def assert_equal(actual, expected, raw_request, part):
        if actual != expected:
            message = f"The {part} did not match"
            message += f"\nACTUAL:{actual!r} !=\nEXPECT:{expected!r}"
            message += f'\nThe raw request was:\n{raw_request}'
>           raise AssertionError(message)
E           AssertionError: The authheader did not match
E           ACTUAL:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20250908/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc' !=
E           EXPECT:'AWS4-HMAC-SHA256 Credential=AKIDEXAMPLE/20150830/us-east-1/service/aws4_request, SignedHeaders=host;x-amz-date, Signature=5da7c1a2acd57cee7505fc6676e4e544621c30862966e37dddb68e92efbe5d6b'
E           The raw request was:
E           POST / HTTP/1.1
E           Host:example.amazonaws.com
E           X-Amz-Date:20150830T123600Z

unit/auth/test_sigv4.py:171: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

host:example.amazonaws.com
x-amz-date:20250908T081712Z

host;x-amz-date
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081712Z
20250908/us-east-1/service/aws4_request
76b04b86ab086088995ab3b8a5a62daae07d985d96571efa3375f8ef122fab36
DEBUG    botocore.auth:auth.py:434 Signature:
4cc6a4ae834dcb22c6ec2ec61d040e185c4ac8efeb3469c472b093da9e4c85fc
_______ TestSTSPresignedUrl.test_presigned_url_contains_no_content_type ________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_sts.TestSTSPresignedUrl testMethod=test_presigned_url_contains_no_content_type>

    def test_presigned_url_contains_no_content_type(self):
        timestamp = datetime(2017, 3, 22, 0, 0)
        with mock.patch('botocore.auth.datetime.datetime') as _datetime:
            _datetime.utcnow.return_value = timestamp
>           url = self.client.generate_presigned_url('get_caller_identity', {})

functional/test_sts.py:43:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/signers.py:828: in generate_presigned_url
    return request_signer.generate_presigned_url(
../botocore/signers.py:355: in generate_presigned_url
    self.sign(
../botocore/signers.py:200: in sign
    auth.add_auth(request)
../botocore/auth.py:427: in add_auth
    self._modify_request_before_signing(request)
../botocore/auth.py:732: in _modify_request_before_signing
    'X-Amz-Credential': self.scope(request),
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4QueryAuth object at 0x7fc32a0fb110>
request = <botocore.awsrequest.AWSRequest object at 0x7fc32a0faf90>

    def scope(self, request):
        scope = [self.credentials.access_key]
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 1: expected str instance, MagicMock found

../botocore/auth.py:388: TypeError
_________________ TestRetryHeader.test_amz_sdk_request_header __________________
[gw3] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_retry.TestRetryHeader testMethod=test_amz_sdk_request_header>

    def test_amz_sdk_request_header(self):
        test_cases = self._retry_headers_test_cases()
        for retry_mode in RETRY_MODES:
            retries_config = {'mode': retry_mode, 'total_max_attempts': 3}
            client_config = Config(read_timeout=10, retries=retries_config)
            for test_case in test_cases:
>               self._test_amz_sdk_request_header_with_test_case(
                    *test_case, client_config=client_config
                )

functional/test_retry.py:157:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
functional/test_retry.py:148: in _test_amz_sdk_request_header_with_test_case
    self.assertListEqual(amz_sdk_request_headers, expected_headers)
E   AssertionError: Lists differ: [b'at[25 chars]000010Z; attempt=2; max=3', b'ttl=20190601T000[19 chars]x=3'] != [b'at[25 chars]000011Z; attempt=2; max=3', b'ttl=20190601T000[19 chars]x=3']
E
E   First differing element 1:
E   b'ttl=20190601T000010Z; attempt=2; max=3'
E   b'ttl=20190601T000011Z; attempt=2; max=3'
E
E     [b'attempt=1',
E   -  b'ttl=20190601T000010Z; attempt=2; max=3',
E   ?                      ^
E
E   +  b'ttl=20190601T000011Z; attempt=2; max=3',
E   ?                      ^
E
E   -  b'ttl=20190601T000010Z; attempt=3; max=3']
E   ?                      ^
E
E   +  b'ttl=20190601T000012Z; attempt=3; max=3']
E   ?                      ^
___________________ TestS3ExpressRequests.test_create_bucket ___________________
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_s3express.TestS3ExpressRequests object at 0x7fd87f4d62d0>
default_s3_client = <botocore.client.S3 object at 0x7fd847848290>
mock_datetime = <MagicMock name='datetime' spec='datetime' id='140566900031888'>

    def test_create_bucket(self, default_s3_client, mock_datetime):
        mock_datetime.utcnow.return_value = DATE

        with ClientHTTPStubber(default_s3_client) as stubber:
            stubber.add_response()

>           default_s3_client.create_bucket(
                Bucket=S3EXPRESS_BUCKET,
                CreateBucketConfiguration={
                    'Location': {
                        'Name': 'usw2-az5',
                        'Type': 'AvailabilityZone',
                    },
                    'Bucket': {
                        "DataRedundancy": "SingleAvailabilityZone",
                        "Type": "Directory",
                    },
                },
            )

functional/test_s3express.py:212:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/client.py:601: in _api_call
    return self._make_api_call(operation_name, kwargs)
../botocore/context.py:123: in wrapper
    return func(*args, **kwargs)
../botocore/client.py:1056: in _make_api_call
    http, parsed_response = self._make_request(
../botocore/client.py:1080: in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
../botocore/endpoint.py:118: in make_request
    return self._send_request(request_dict, operation_model)
../botocore/endpoint.py:195: in _send_request
    request = self.create_request(request_dict, operation_model)
../botocore/endpoint.py:131: in create_request
    self._event_emitter.emit(
../botocore/hooks.py:412: in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
../botocore/hooks.py:256: in emit
    return self._emit(event_name, kwargs)
../botocore/hooks.py:239: in _emit
    response = handler(**kwargs)
../botocore/signers.py:108: in handler
    return self.sign(operation_name, request)
../botocore/signers.py:200: in sign
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.S3SigV4Auth object at 0x7fd847883990>
request = <botocore.awsrequest.AWSRequest object at 0x7fd85a6e2b90>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
_____________________ test_generate_db_connect_auth_token ______________________
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

client = <botocore.client.AuroraDSQL object at 0x7fd851648250>

    @FreezeTime(botocore.auth.datetime, date=DATE)
    def test_generate_db_connect_auth_token(client):
        auth_token = client.generate_db_connect_auth_token(
            Hostname=HOSTNAME, Region=REGION
        )
        assert f"{HOSTNAME}/?Action=DbConnect" in auth_token
>       assert (
            f"X-Amz-Credential={AWS_ACCESS_KEY_ID}%2F20240827%2F{REGION}%2Fdsql%2Faws4_request"
            in auth_token
        )
E       AssertionError: assert 'X-Amz-Credential=akid%2F20240827%2Fus-east-1%2Fdsql%2Faws4_request' in 'peccy.dsql.us-east-1.on.aws/?Action=DbConnect&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=akid%2F20250908%2Fus-...-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=9deb5c6739ad983fcd08b438d7827bd2f85048e411e21b76b496e73cc90cdc84'

functional/test_dsql.py:44: AssertionError
__________________ test_generate_db_connect_admin_auth_token ___________________
[gw0] linux -- Python 3.11.0 /app/.venv/bin/python3.11

client = <botocore.client.AuroraDSQL object at 0x7fd851619550>

    @FreezeTime(botocore.auth.datetime, date=DATE)
    def test_generate_db_connect_admin_auth_token(client):
        auth_token = client.generate_db_connect_admin_auth_token(
            Hostname=HOSTNAME, Region=REGION
        )
        assert f"{HOSTNAME}/?Action=DbConnectAdmin" in auth_token
>       assert (
            f"X-Amz-Credential={AWS_ACCESS_KEY_ID}%2F20240827%2F{REGION}%2Fdsql%2Faws4_request"
            in auth_token
        )
E       AssertionError: assert 'X-Amz-Credential=akid%2F20240827%2Fus-east-1%2Fdsql%2Faws4_request' in 'peccy.dsql.us-east-1.on.aws/?Action=DbConnectAdmin&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=akid%2F20250908%...-Expires=900&X-Amz-SignedHeaders=host&X-Amz-Signature=3c5113d255fc143fcec6fe0551b46c4005878afc655e4ed84e96aacf076989d6'

functional/test_dsql.py:59: AssertionError
____ TestCopySnapshotCustomization.test_copy_snapshot_injects_presigned_url ____
[gw2] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_ec2.TestCopySnapshotCustomization testMethod=test_copy_snapshot_injects_presigned_url>

    def test_copy_snapshot_injects_presigned_url(self):
        self.add_copy_snapshot_response(self.snapshot_id)
        with self.http_stubber:
            result = self.client.copy_snapshot(
                SourceRegion='us-west-2',
                SourceSnapshotId=self.snapshot_id,
            )
        self.assertEqual(result['SnapshotId'], self.snapshot_id)
        self.assertEqual(len(self.http_stubber.requests), 1)
        snapshot_request = self.http_stubber.requests[0]
        body = parse_qs(snapshot_request.body)
        self.assertIn('PresignedUrl', body)
        presigned_url = urlparse(body['PresignedUrl'][0])
        self.assertEqual(presigned_url.scheme, 'https')
        self.assertEqual(presigned_url.netloc, 'ec2.us-west-2.amazonaws.com')
        query_args = parse_qs(presigned_url.query)
        self.assertEqual(query_args['Action'], ['CopySnapshot'])
        self.assertEqual(query_args['Version'], ['2016-11-15'])
        self.assertEqual(query_args['SourceRegion'], ['us-west-2'])
        self.assertEqual(query_args['DestinationRegion'], ['us-east-1'])
        self.assertEqual(query_args['SourceSnapshotId'], [self.snapshot_id])
        self.assertEqual(query_args['X-Amz-Algorithm'], ['AWS4-HMAC-SHA256'])
        expected_credential = 'access_key/20110909/us-west-2/ec2/aws4_request'
>       self.assertEqual(query_args['X-Amz-Credential'], [expected_credential])
E       AssertionError: Lists differ: ['access_key/20250908/us-west-2/ec2/aws4_request'] != ['access_key/20110909/us-west-2/ec2/aws4_request']
E
E       First differing element 0:
E       'access_key/20250908/us-west-2/ec2/aws4_request'
E       'access_key/20110909/us-west-2/ec2/aws4_request'
E
E       - ['access_key/20250908/us-west-2/ec2/aws4_request']
E       ?                ^^   ^
E
E       + ['access_key/20110909/us-west-2/ec2/aws4_request']
E       ?                ^^   ^

functional/test_ec2.py:134: AssertionError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.hooks:hooks.py:482 Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-call.apigateway to before-call.api-gateway
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
DEBUG    botocore.session:session.py:381 Setting config variable for credentials_file to 'noexist/foo/botocore'
DEBUG    botocore.hooks:hooks.py:482 Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-call.apigateway to before-call.api-gateway
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
DEBUG    botocore.utils:utils.py:456 IMDS ENDPOINT: http://169.254.169.254/
DEBUG    botocore.credentials:credentials.py:2170 Looking for credentials via: env
INFO     botocore.credentials:credentials.py:1217 Found credentials in environment variables.
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/endpoints.json
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/sdk-default-configuration.json
DEBUG    botocore.hooks:hooks.py:238 Event choose-service-name: calling handler <function handle_service_name_alias at 0x7f048d8345e0>
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/ec2/2016-11-15/service-2.json
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/ec2/2016-11-15/endpoint-rule-set-1.json
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/partitions.json
DEBUG    botocore.hooks:hooks.py:238 Event creating-client-class.ec2: calling handler <function add_generate_presigned_url at 0x7f048d9ad800>
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for ec2 via: environment_service
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for ec2 via: environment_global
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for ec2 via: config_service
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for ec2 via: config_global
DEBUG    botocore.configprovider:configprovider.py:995 No configured endpoint found.
DEBUG    botocore.endpoint:endpoint.py:413 Setting ec2 timeout as (60, 60)
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/_retry.json
DEBUG    botocore.client:client.py:285 Registering retry handlers for service: ec2
DEBUG    botocore.hooks:hooks.py:238 Event before-parameter-build.ec2.CopySnapshot: calling handler <bound method ParameterAlias.alias_parameter_in_call of <botocore.handlers.ParameterAlias object at 0x7f048d855a50>>
DEBUG    botocore.hooks:hooks.py:238 Event before-parameter-build.ec2.CopySnapshot: calling handler <function generate_idempotent_uuid at 0x7f048d835da0>
DEBUG    botocore.hooks:hooks.py:238 Event before-parameter-build.ec2.CopySnapshot: calling handler <function _handle_request_validation_mode_member at 0x7f048d858900>
DEBUG    botocore.regions:regions.py:505 Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
DEBUG    botocore.regions:regions.py:520 Endpoint provider result: https://ec2.us-east-1.amazonaws.com
DEBUG    botocore.hooks:hooks.py:238 Event before-call.ec2.CopySnapshot: calling handler <function inject_presigned_url_ec2 at 0x7f048d8368e0>
DEBUG    botocore.hooks:hooks.py:238 Event choose-signer.ec2.CopySnapshot: calling handler <function set_operation_specific_signer at 0x7f048d835b20>
DEBUG    botocore.hooks:hooks.py:238 Event choose-signer.ec2.CopySnapshot: calling handler <function _set_auth_scheme_preference_signer at 0x7f048d858a40>
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
GET
/
Action=CopySnapshot&DestinationRegion=us-east-1&SourceRegion=us-west-2&SourceSnapshotId=snap-0123abc&Version=2016-11-15&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fus-west-2%2Fec2%2Faws4_request&X-Amz-Date=20250908T081751Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host
host:ec2.us-west-2.amazonaws.com

host
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081751Z
20250908/us-west-2/ec2/aws4_request
6417a7ac4c1e7b2d6989960de4074011a47653634285fe6c0650f92313318249
DEBUG    botocore.auth:auth.py:434 Signature:
eba3bc74df97662248a9c6a2c194affad7924c05da13d2b80c3fb89beb102d38
DEBUG    botocore.hooks:hooks.py:238 Event before-call.ec2.CopySnapshot: calling handler <function add_recursion_detection_header at 0x7f048d834680>
DEBUG    botocore.hooks:hooks.py:238 Event before-call.ec2.CopySnapshot: calling handler <function inject_api_version_header_if_needed at 0x7f048d837880>
DEBUG    botocore.endpoint:endpoint.py:113 Making request for OperationModel(name=CopySnapshot) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Botocore/1.39.16 ua/2.1 os/linux#5.15.0-130-generic md/arch#x86_64 lang/python#3.11.0rc1 md/pyimpl#CPython m/b,D,Z cfg/retry-mode#legacy'}, 'body': {'Action': 'CopySnapshot', 'Version': '2016-11-15', 'SourceRegion': 'us-west-2', 'SourceSnapshotId': 'snap-0123abc', 'PresignedUrl': 'https://ec2.us-west-2.amazonaws.com/?Action=CopySnapshot&Version=2016-11-15&SourceRegion=us-west-2&SourceSnapshotId=snap-0123abc&DestinationRegion=us-east-1&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=access_key%2F20250908%2Fus-west-2%2Fec2%2Faws4_request&X-Amz-Date=20250908T081751Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=eba3bc74df97662248a9c6a2c194affad7924c05da13d2b80c3fb89beb102d38', 'DestinationRegion': 'us-east-1'}, 'url': 'https://ec2.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f040dd03090>, 'has_streaming_input': False, 'auth_type': None, 'unsigned_payload': None, 'auth_options': ['aws.auth#sigv4']}}
DEBUG    botocore.hooks:hooks.py:238 Event request-created.ec2.CopySnapshot: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f040dd02850>>
DEBUG    botocore.hooks:hooks.py:238 Event choose-signer.ec2.CopySnapshot: calling handler <function set_operation_specific_signer at 0x7f048d835b20>
DEBUG    botocore.hooks:hooks.py:238 Event choose-signer.ec2.CopySnapshot: calling handler <function _set_auth_scheme_preference_signer at 0x7f048d858a40>
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:ec2.us-east-1.amazonaws.com
x-amz-date:20250908T081751Z

content-type;host;x-amz-date
7dec893544213781e3bde9ab56173dade8bd7aa76246e8fa357aaa87ec8d33b1
DEBUG    botocore.auth:auth.py:432 StringToSign:
AWS4-HMAC-SHA256
20250908T081751Z
20250908/us-east-1/ec2/aws4_request
8220800e4782080ab1e58b8ac7522a4af7efd992da477b43f6d4540b637c7a7d
DEBUG    botocore.auth:auth.py:434 Signature:
7ec7c3470727aa4f767530107d5e3dca676656d54856950e13b5360e81e02323
DEBUG    botocore.hooks:hooks.py:238 Event request-created.ec2.CopySnapshot: calling handler <bound method UserAgentString.rebuild_and_replace_user_agent_handler of <botocore.useragent.UserAgentString object at 0x7f040dd01bd0>>
DEBUG    botocore.hooks:hooks.py:238 Event request-created.ec2.CopySnapshot: calling handler <function add_retry_headers at 0x7f048d858180>
DEBUG    botocore.endpoint:endpoint.py:262 Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://ec2.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Botocore/1.39.16 ua/2.1 os/linux#5.15.0-130-generic md/arch#x86_64 lang/python#3.11.0rc1 md/pyimpl#CPython m/b,D,Z cfg/retry-mode#legacy', 'X-Amz-Date': b'20250908T081751Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=access_key/20250908/us-east-1/ec2/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7ec7c3470727aa4f767530107d5e3dca676656d54856950e13b5360e81e02323', 'amz-sdk-invocation-id': b'8059c6c8-e0c9-4927-b6f9-68460244f187', 'amz-sdk-request': b'attempt=1', 'Content-Length': '607'}>
DEBUG    botocore.hooks:hooks.py:238 Event before-send.ec2.CopySnapshot: calling handler <tests.ClientHTTPStubber object at 0x7f040d114dd0>
DEBUG    botocore.parsers:parsers.py:255 Response headers: {}
DEBUG    botocore.parsers:parsers.py:256 Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<CopySnapshotResponse>\n<snapshotId>snap-0123abc</snapshotId>\n</CopySnapshotResponse>\n'
DEBUG    botocore.hooks:hooks.py:238 Event needs-retry.ec2.CopySnapshot: calling handler <botocore.retryhandler.RetryHandler object at 0x7f040b6967d0>
DEBUG    botocore.retryhandler:retryhandler.py:211 No retry needed.
________________________ TestLex.test_unsigned_payload _________________________
[gw2] linux -- Python 3.11.0 /app/.venv/bin/python3.11

self = <tests.functional.test_lex.TestLex testMethod=test_unsigned_payload>

    def test_unsigned_payload(self):
        params = {
            'botName': 'foo',
            'botAlias': 'bar',
            'userId': 'baz',
            'contentType': 'application/octet-stream',
            'inputStream': b'',
        }

        timestamp = datetime(2017, 3, 22, 0, 0)

        with mock.patch('botocore.auth.datetime.datetime') as _datetime:
            _datetime.utcnow.return_value = timestamp
            self.http_stubber.add_response(body=b'{}')
            with self.http_stubber:
>               self.client.post_content(**params)

functional/test_lex.py:40:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
../botocore/client.py:601: in _api_call
    return self._make_api_call(operation_name, kwargs)
../botocore/context.py:123: in wrapper
    return func(*args, **kwargs)
../botocore/client.py:1056: in _make_api_call
    http, parsed_response = self._make_request(
../botocore/client.py:1080: in _make_request
    return self._endpoint.make_request(operation_model, request_dict)
../botocore/endpoint.py:118: in make_request
    return self._send_request(request_dict, operation_model)
../botocore/endpoint.py:195: in _send_request
    request = self.create_request(request_dict, operation_model)
../botocore/endpoint.py:131: in create_request
    self._event_emitter.emit(
../botocore/hooks.py:412: in emit
    return self._emitter.emit(aliased_event_name, **kwargs)
../botocore/hooks.py:256: in emit
    return self._emit(event_name, kwargs)
../botocore/hooks.py:239: in _emit
    response = handler(**kwargs)
../botocore/signers.py:108: in handler
    return self.sign(operation_name, request)
../botocore/signers.py:200: in sign
    auth.add_auth(request)
../botocore/auth.py:431: in add_auth
    string_to_sign = self.string_to_sign(request, canonical_request)
../botocore/auth.py:406: in string_to_sign
    sts.append(self.credential_scope(request))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <botocore.auth.SigV4Auth object at 0x7f040fcc9dd0>
request = <botocore.awsrequest.AWSRequest object at 0x7f040d52f450>

    def credential_scope(self, request):
        scope = []
        scope.append(request.context['timestamp'][0:8])
        scope.append(self._region_name)
        scope.append(self._service_name)
        scope.append('aws4_request')
>       return '/'.join(scope)
E       TypeError: sequence item 0: expected str instance, MagicMock found

../botocore/auth.py:396: TypeError
------------------------------ Captured log call -------------------------------
DEBUG    botocore.hooks:hooks.py:482 Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-call.apigateway to before-call.api-gateway
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
DEBUG    botocore.hooks:hooks.py:482 Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
DEBUG    botocore.hooks:hooks.py:482 Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
DEBUG    botocore.hooks:hooks.py:482 Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
DEBUG    botocore.session:session.py:381 Setting config variable for credentials_file to 'noexist/foo/botocore'
DEBUG    botocore.utils:utils.py:456 IMDS ENDPOINT: http://169.254.169.254/
DEBUG    botocore.credentials:credentials.py:2170 Looking for credentials via: env
INFO     botocore.credentials:credentials.py:1217 Found credentials in environment variables.
DEBUG    botocore.hooks:hooks.py:238 Event choose-service-name: calling handler <function handle_service_name_alias at 0x7f048d8345e0>
DEBUG    botocore.loaders:loaders.py:181 Loading JSON file: /app/botocore/data/lex-runtime/2016-11-28/endpoint-rule-set-1.json
DEBUG    botocore.hooks:hooks.py:238 Event creating-client-class.lex-runtime-service: calling handler <function add_generate_presigned_url at 0x7f048d9ad800>
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for lex-runtime via: environment_service
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for lex-runtime via: environment_global
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for lex-runtime via: config_service
DEBUG    botocore.configprovider:configprovider.py:979 Looking for endpoint for lex-runtime via: config_global
DEBUG    botocore.configprovider:configprovider.py:995 No configured endpoint found.
DEBUG    botocore.endpoint:endpoint.py:413 Setting runtime.lex timeout as (60, 60)
DEBUG    botocore.client:client.py:285 Registering retry handlers for service: lex-runtime
DEBUG    botocore.hooks:hooks.py:238 Event before-parameter-build.lex-runtime-service.PostContent: calling handler <function generate_idempotent_uuid at 0x7f048d835da0>
DEBUG    botocore.hooks:hooks.py:238 Event before-parameter-build.lex-runtime-service.PostContent: calling handler <function _handle_request_validation_mode_member at 0x7f048d858900>
DEBUG    botocore.regions:regions.py:505 Calling endpoint provider with parameters: {'Region': 'us-west-2', 'UseDualStack': False, 'UseFIPS': False}
DEBUG    botocore.regions:regions.py:520 Endpoint provider result: https://runtime.lex.us-west-2.amazonaws.com
DEBUG    botocore.hooks:hooks.py:238 Event before-call.lex-runtime-service.PostContent: calling handler <function add_recursion_detection_header at 0x7f048d834680>
DEBUG    botocore.hooks:hooks.py:238 Event before-call.lex-runtime-service.PostContent: calling handler <function inject_api_version_header_if_needed at 0x7f048d837880>
DEBUG    botocore.endpoint:endpoint.py:113 Making request for OperationModel(name=PostContent) with params: {'url_path': '/bot/foo/alias/bar/user/baz/content', 'query_string': {}, 'method': 'POST', 'headers': {'Content-Type': 'application/octet-stream', 'User-Agent': 'Botocore/1.39.16 ua/2.1 os/linux#5.15.0-130-generic md/arch#x86_64 lang/python#3.11.0rc1 md/pyimpl#CPython m/b,D,Z cfg/retry-mode#legacy'}, 'body': b'', 'url': 'https://runtime.lex.us-west-2.amazonaws.com/bot/foo/alias/bar/user/baz/content', 'context': {'client_region': 'us-west-2', 'client_config': <botocore.config.Config object at 0x7f04027434d0>, 'has_streaming_input': True, 'auth_type': 'v4-unsigned-body', 'unsigned_payload': None, 'auth_options': None}}
DEBUG    botocore.hooks:hooks.py:238 Event request-created.lex-runtime-service.PostContent: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f04027407d0>>
DEBUG    botocore.hooks:hooks.py:238 Event choose-signer.lex-runtime-service.PostContent: calling handler <function set_operation_specific_signer at 0x7f048d835b20>
DEBUG    botocore.auth:auth.py:429 Calculating signature using v4 auth.
DEBUG    botocore.auth:auth.py:430 CanonicalRequest:
POST
/bot/foo/alias/bar/user/baz/content

content-type:application/octet-stream
host:runtime.lex.us-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:

content-type;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
=============================== warnings summary ===============================
tests/functional/docs/test_shared_example_config.py::test_lint_shared_example_configs[DescribeStream-example_config232-service_model232]
  /app/.venv/lib/python3.11/site-packages/dateutil/parser/_parser.py:1207: UnknownTimezoneWarning: tzname PDT identified but not understood.  Pass `tzinfos` argument in order to correctly return a timezone-aware datetime.  In a future version, this will raise an exception.
    warnings.warn("tzname {tzname} identified but not understood.  "

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

-------- coverage: platform linux, python 3.11.0-candidate-1 ---------
Coverage XML written to file coverage.xml

=========================== short test summary info ============================
FAILED functional/test_s3.py::TestAccesspointArn::test_outpost_arn_presigned_url
FAILED functional/test_s3.py::TestAccesspointArn::test_outpost_arn_presigned_url_cross_region_arn
FAILED functional/test_s3.py::TestAccesspointArn::test_outpost_arn_presigned_url_with_use_arn_region
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_blocklist_expect_headers
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_blocklist_trace_id - ...
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_blocklist_transfer_encoding_header
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_blocklist_user_agent_header
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_checksum_set
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_config_value_is_false
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_context_config_set
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_md5_set
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_resign_with_content_hash
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_sha256_if_context_set_on_http
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_sha256_if_context_set_without_md5
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_signature_is_not_normalized
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_uses_sha256_if_config_value_is_true
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_uses_sha256_if_md5_unset
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_uses_sha256_if_not_https
FAILED unit/auth/test_signers.py::TestS3SigV4Auth::test_uses_sha256_if_not_streaming_upload
FAILED unit/auth/test_signers.py::TestSigV4::test_thread_safe_timestamp - Ass...
FAILED unit/auth/test_signers.py::TestSigV4Resign::test_resign_request_with_date
FAILED unit/auth/test_signers.py::TestSigV4Resign::test_sigv4_without_date - ...
FAILED unit/auth/test_signers.py::TestSigV4Presign::test_presign_no_params - ...
FAILED unit/auth/test_signers.py::TestSigV4Presign::test_presign_where_body_is_json_bytes
FAILED unit/auth/test_signers.py::TestSigV4Presign::test_presign_where_body_is_json_string
FAILED unit/auth/test_signers.py::TestSigV4Presign::test_s3_sigv4_presign - A...
FAILED unit/auth/test_signers.py::TestS3SigV4Post::test_empty_fields_and_policy
FAILED unit/auth/test_signers.py::TestS3SigV4Post::test_presign_post - Assert...
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_blocklist_expect_headers
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_blocklist_trace_id
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_blocklist_transfer_encoding_header
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_blocklist_user_agent_header
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_checksum_set
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_config_value_is_false
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_context_config_set
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_does_not_use_sha256_if_md5_set
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_resign_with_content_hash
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_sha256_if_context_set_on_http
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_sha256_if_context_set_without_md5
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_signature_is_not_normalized
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_uses_sha256_if_config_value_is_true
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_uses_sha256_if_md5_unset
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_uses_sha256_if_not_https
FAILED unit/crt/auth/test_crt_signers.py::TestS3SigV4Auth::test_uses_sha256_if_not_streaming_upload
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Presign::test_presign_no_params
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Presign::test_presign_where_body_is_json_bytes
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Presign::test_presign_where_body_is_json_string
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Presign::test_s3_sigv4_presign
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Resign::test_resign_request_with_date
FAILED unit/crt/auth/test_crt_signers.py::TestSigV4Resign::test_sigv4_without_date
FAILED unit/test_signers.py::TestGenerateDBAuthToken::test_generate_db_auth_token
FAILED unit/test_signers.py::TestDSQLGenerateDBAuthToken::test_dsql_generate_db_auth_token
FAILED unit/test_signers.py::TestDSQLGenerateDBAuthToken::test_dsql_generate_db_connect_admin_auth_token
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-header-key-sort]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-special-character]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-relative]
FAILED unit/test_signers.py::TestDSQLGenerateDBAuthToken::test_dsql_generate_db_connect_auth_token
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-slash]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-relative-relative]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-slash-dot-slash]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-slash-pointless-dot]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[normalize-path/get-slashes]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-query]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-sts-token/post-sts-header-before]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-sts-token/post-sts-header-after]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-empty-query-key]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-utf8] - Assertio...
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-with-session-token]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-unreserved] - As...
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-vanilla-query]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-header-key-case]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-header-key-duplicate]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-header-value-case]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-utf8-query]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-x-www-form-urlencoded-parameters]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-x-www-form-urlencoded]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-query-unreserved]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-header-value-multiline]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-header-value-trim]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla] - Asser...
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-vanilla-query-order-encoded]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-vanilla-empty-query-value]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[get-header-value-order]
FAILED unit/auth/test_sigv4.py::test_signature_version_4[post-vanilla] - Asse...
FAILED functional/test_sts.py::TestSTSPresignedUrl::test_presigned_url_contains_no_content_type
FAILED functional/test_retry.py::TestRetryHeader::test_amz_sdk_request_header
FAILED functional/test_s3express.py::TestS3ExpressRequests::test_create_bucket
FAILED functional/test_dsql.py::test_generate_db_connect_auth_token - Asserti...
FAILED functional/test_dsql.py::test_generate_db_connect_admin_auth_token - A...
FAILED functional/test_ec2.py::TestCopySnapshotCustomization::test_copy_snapshot_injects_presigned_url
FAILED functional/test_lex.py::TestLex::test_unsigned_payload - TypeError: se...
==== 91 failed, 58742 passed, 102 skipped, 1 warning in 1288.93s (0:21:28) =====
Running pytest -n auto --dist=loadfile --maxprocesses=4 --cov=botocore --cov-report xml unit/ functional/...
Traceback (most recent call last):
  File "/app/scripts/ci/run-tests", line 78, in <module>
    run(cmd)
  File "/app/scripts/ci/run-tests", line 29, in run
    return check_call(command, shell=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/subprocess.py", line 413, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command 'pytest -n auto --dist=loadfile --maxprocesses=4 --cov=botocore --cov-report xml unit/ functional/' returned non-zero exit status 1.
Code coverage reporting is not supported in this script.
