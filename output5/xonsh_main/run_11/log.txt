Obtaining file:///app
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: pytest>=7 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (8.4.1)
Requirement already satisfied: restructuredtext_lint in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (1.4.0)
Requirement already satisfied: pytest-cov in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (6.2.1)
Requirement already satisfied: pytest-mock in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (3.14.1)
Requirement already satisfied: pytest-timeout in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (2.4.0)
Requirement already satisfied: pytest-subprocess in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (1.5.3)
Requirement already satisfied: pytest-rerunfailures in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (15.1)
Requirement already satisfied: prompt-toolkit>=3.0.29 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (3.0.51)
Requirement already satisfied: pygments>=2.2 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (2.19.2)
Requirement already satisfied: coverage>=5.3.1 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (7.10.5)
Requirement already satisfied: pyte>=0.8.0 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (0.8.2)
Requirement already satisfied: virtualenv>=20.16.2 in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (20.34.0)
Requirement already satisfied: requests in /usr/local/lib/python3.12/dist-packages (from xonsh==0.19.9) (2.32.5)
Requirement already satisfied: wcwidth in /usr/local/lib/python3.12/dist-packages (from prompt-toolkit>=3.0.29->xonsh==0.19.9) (0.2.13)
Requirement already satisfied: iniconfig>=1 in /usr/local/lib/python3.12/dist-packages (from pytest>=7->xonsh==0.19.9) (2.1.0)
Requirement already satisfied: packaging>=20 in /usr/local/lib/python3.12/dist-packages (from pytest>=7->xonsh==0.19.9) (25.0)
Requirement already satisfied: pluggy<2,>=1.5 in /usr/local/lib/python3.12/dist-packages (from pytest>=7->xonsh==0.19.9) (1.6.0)
Requirement already satisfied: distlib<1,>=0.3.7 in /usr/local/lib/python3.12/dist-packages (from virtualenv>=20.16.2->xonsh==0.19.9) (0.4.0)
Requirement already satisfied: filelock<4,>=3.12.2 in /usr/local/lib/python3.12/dist-packages (from virtualenv>=20.16.2->xonsh==0.19.9) (3.19.1)
Requirement already satisfied: platformdirs<5,>=3.9.1 in /usr/local/lib/python3.12/dist-packages (from virtualenv>=20.16.2->xonsh==0.19.9) (4.4.0)
Requirement already satisfied: charset_normalizer<4,>=2 in /usr/local/lib/python3.12/dist-packages (from requests->xonsh==0.19.9) (3.4.3)
Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.12/dist-packages (from requests->xonsh==0.19.9) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.12/dist-packages (from requests->xonsh==0.19.9) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.12/dist-packages (from requests->xonsh==0.19.9) (2025.8.3)
Requirement already satisfied: docutils<1.0,>=0.11 in /usr/local/lib/python3.12/dist-packages (from restructuredtext_lint->xonsh==0.19.9) (0.22)
Building wheels for collected packages: xonsh
  Building editable for xonsh (pyproject.toml): started
  Building editable for xonsh (pyproject.toml): finished with status 'done'
  Created wheel for xonsh: filename=xonsh-0.19.9-0.editable-py312-none-any.whl size=9639 sha256=d7db2ab01bf035655ac5a28eb5f72463f299f9370934f7f6a5b1d98279b1fdef
  Stored in directory: /tmp/pip-ephem-wheel-cache-7z29ga4k/wheels/54/1b/b7/aa63e25c8f14f4f2ae7b04e6097bdecb770e455c5c1ee0a600
Successfully built xonsh
Installing collected packages: xonsh
  Attempting uninstall: xonsh
    Found existing installation: xonsh 0.19.9
    Uninstalling xonsh-0.19.9:
      Successfully uninstalled xonsh-0.19.9
Successfully installed xonsh-0.19.9
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
============================= test session starts ==============================
platform linux -- Python 3.12.11, pytest-8.4.1, pluggy-1.6.0
cachedir: .cache/pytest
rootdir: /app
configfile: setup.cfg
testpaths: tests
plugins: xonsh-0.19.9, rerunfailures-15.1, timeout-2.4.0, cov-6.2.1, mock-3.14.1, subprocess-1.5.3
timeout: 240.0s
timeout method: signal
timeout func_only: False
collected 5185 items

tests/api/test_os.xsh .F                                                 [  0%]
tests/api/test_subprocess.xsh ....                                       [  0%]
tests/test_xonsh.xsh ...                                                 [  0%]
tests/aliases/test_completer_alias.py .......                            [  0%]
tests/aliases/test_source.py F...                                        [  0%]
tests/aliases/test_xexec.py .......                                      [  0%]
tests/built_ins/test_tracer.py .F                                        [  0%]
tests/built_ins/test_wizard.py ....                                      [  0%]
tests/built_ins/test_xonfig.py ..........                                [  0%]
tests/built_ins/test_xontribs.py ........                                [  0%]
tests/completers/test_base_completer.py ..                               [  1%]
tests/completers/test_bash_completer.py EEEEEEEEEEEEEEEEEEEE             [  1%]
tests/completers/test_command_completers.py .....                        [  1%]
tests/completers/test_completer_command.py ......                        [  1%]
tests/completers/test_dir_completers.py FFEEEEEEF                        [  1%]
tests/completers/test_environment_completer.py .....                     [  1%]
tests/completers/test_gh.py ss                                           [  1%]
tests/completers/test_path_completers.py ...............                 [  2%]
tests/completers/test_pip_completer.py .............FF                   [  2%]
tests/completers/test_python.py .........................                [  2%]
tests/completers/test_xompletions.py .....                               [  3%]
tests/history/test_history_dummy.py ......                               [  3%]
tests/history/test_history_json.py ..................................... [  3%]
............FFF                                                          [  4%]
tests/history/test_history_sqlite.py ......................              [  4%]
tests/lib/test_collections.py ..............                             [  4%]
tests/lib/test_itertools.py ...                                          [  4%]
tests/lib/test_jsonutils.py .......                                      [  5%]
tests/lib/test_lazyasd.py .                                              [  5%]
tests/lib/test_lazyjson.py ...................                           [  5%]
tests/lib/test_pretty.py ...........                                     [  5%]
tests/parsers/test_ast.py ............................                   [  6%]
tests/parsers/test_lexer.py ............................................ [  7%]
.................................................                        [  8%]
tests/parsers/test_parser.py ...........................xxxxxxxxxxxxxx.. [  8%]
.......................................................x................ [ 10%]
........................................................................ [ 11%]
........................................................................ [ 13%]
........................................................................ [ 14%]
........................................................................ [ 15%]
........................................................................ [ 17%]
........................................................................ [ 18%]
........................................................................ [ 19%]
........................................................................ [ 21%]
........................................................................ [ 22%]
........................................................................ [ 24%]
........................................................................ [ 25%]
........................................................................ [ 26%]
........................................................................ [ 28%]
........................................................................ [ 29%]
........................................................................ [ 31%]
........................................................................ [ 32%]
........................................................................ [ 33%]
........................................................................ [ 35%]
........................................................................ [ 36%]
........................................................................ [ 38%]
........................................................................ [ 39%]
........................................................................ [ 40%]
........................................................................ [ 42%]
........................................................................ [ 43%]
........................................................................ [ 44%]
........................................................................ [ 46%]
........................................................................ [ 47%]
........................................................................ [ 49%]
........................................................................ [ 50%]
..                                                                       [ 50%]
tests/platform/test_platform.py ..                                       [ 50%]
tests/procs/test_executables.py .FF.                                     [ 50%]
tests/procs/test_jobs.py ..                                              [ 50%]
tests/procs/test_pipelines.py ssssssssssssssssssssssssss                 [ 51%]
tests/procs/test_specs.py ssssssssssssssssssssssssssssssssssssssssssssss [ 52%]
ssssssssssssssssssssssssssss                                             [ 52%]
tests/prompt/test_base.py .............................................. [ 53%]
.....x....                                                               [ 53%]
tests/prompt/test_cwd.py .                                               [ 53%]
tests/prompt/test_gitstatus.py ....                                      [ 53%]
tests/prompt/test_job.py .                                               [ 53%]
tests/prompt/test_vc.py sss.ssssss..                                     [ 54%]
tests/shell/test_base_shell.py .....                                     [ 54%]
tests/shell/test_ptk_completer.py ..................                     [ 54%]
tests/shell/test_ptk_highlight.py .......................                [ 54%]
tests/shell/test_ptk_history.py .                                        [ 54%]
tests/shell/test_ptk_multiline.py .......                                [ 55%]
tests/shell/test_ptk_shell.py ....................                       [ 55%]
tests/shell/test_readline_shell.py ............                          [ 55%]
tests/shell/test_shell.py ...                                            [ 55%]
tests/test_aliases.py ..............................                     [ 56%]
tests/test_ansi_colors.py .............................................. [ 57%]
........................................................................ [ 58%]
........................................................................ [ 60%]
........................................................................ [ 61%]
........................................................................ [ 62%]
........................................................................ [ 64%]
........................................................................ [ 65%]
........................................................................ [ 66%]
........................................................................ [ 68%]
........................................................................ [ 69%]
.................                                                        [ 70%]
tests/test_builtins.py sF............................................... [ 71%]
........................................                                 [ 71%]
tests/test_cli_utils.py ....                                             [ 71%]
tests/test_color_tools.py ............................                   [ 72%]
tests/test_commands_cache.py .................................F......... [ 73%]
.......                                                                  [ 73%]
tests/test_completer.py ..........                                       [ 73%]
tests/test_completion_context.py ....................................... [ 74%]
........................................................................ [ 75%]
........................................................................ [ 77%]
........................................................................ [ 78%]
........................................................................ [ 79%]
.................................................                        [ 80%]
tests/test_contexts.py .........................                         [ 81%]
tests/test_dirstack.py ........                                          [ 81%]
tests/test_dirstack_unc.py ..ssssssss                                    [ 81%]
tests/test_environ.py ...................s.............................. [ 82%]
...................                                                      [ 82%]
tests/test_events.py ..........                                          [ 83%]
tests/test_execer.py ss................................                  [ 83%]
tests/test_foreign_shells.py .....s                                      [ 83%]
tests/test_imphooks.py ........                                          [ 84%]
tests/test_integrations.py ...........RRRRFRRRRF.......RRRRF........s.RR [ 84%]
RRFRRRRFx...............s.......................F....sss................ [ 85%]
.......F.................                                                [ 86%]
tests/test_main.py ..................................................... [ 87%]
..................                                                       [ 87%]
tests/test_man.py FFs                                                    [ 87%]
tests/test_pyghooks.py ................................................. [ 88%]
..................................                                       [ 89%]
tests/test_tools.py .................................................... [ 90%]
........................................................................ [ 91%]
........................................................................ [ 93%]
........................................................................ [ 94%]
........................................................................ [ 96%]
........................................................................ [ 97%]
........................................................................ [ 98%]
..............................................                           [ 99%]
tests/test_virtualenv_activator.py ..                                    [ 99%]
tests/xoreutils/test_cat.py ........                                     [ 99%]
tests/xoreutils/test_uname.py .                                          [ 99%]
tests/xoreutils/test_uptime.py .                                         [ 99%]
tests/xoreutils/test_which.py ....                                       [100%]

==================================== ERRORS ====================================
____ ERROR at setup of test_bash_completer[command_context0-completions0-5] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964150ec0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964150ec0>
path = '/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co0'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_bash_completer[command_context1-completions1-0] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964150920>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co1')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964150920>
path = '/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co1'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_bash_completer[command_context2-completions2-2] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964152630>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co2')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964152630>
path = '/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co2'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_bash_completer[command_context3-completions3-1] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc230>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co3')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc230>
path = '/tmp/pytest-of-root/pytest-0/test_bash_completer_command_co3'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context0-completions0-4] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc890>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc890>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co0'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context1-completions1-5] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dfda0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co1')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dfda0>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co1'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context2-completions2-5] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dcb00>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co2')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dcb00>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co2'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context3-completions3-6] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641de5d0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co3')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641de5d0>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co3'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
___ ERROR at setup of test_quote_handling[command_context4-completions4-10] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc800>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co4')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641dc800>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co4'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context5-completions5-4] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641ddf70>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co5')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641ddf70>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co5'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context6-completions6-5] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964216b70>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co6')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964216b70>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co6'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context7-completions7-5] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964215d90>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co7')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964215d90>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co7'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
____ ERROR at setup of test_quote_handling[command_context8-completions8-6] ____

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964214740>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co8')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964214740>
path = '/tmp/pytest-of-root/pytest-0/test_quote_handling_command_co8'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
______________ ERROR at setup of test_bash_completer_empty_prefix ______________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69642145f0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_bash_completer_empty_pref0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69642145f0>
path = '/tmp/pytest-of-root/pytest-0/test_bash_completer_empty_pref0'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_ ERROR at setup of test_equal_sign_arg[command_context0-completions0-3-False] _

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964216750>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964216750>
path = '/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co0'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_ ERROR at setup of test_equal_sign_arg[command_context1-completions1-3-True] __

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964214320>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co1')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964214320>
path = '/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co1'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_ ERROR at setup of test_equal_sign_arg[command_context2-completions2-2-True] __

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964184950>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co2')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964184950>
path = '/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co2'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_ ERROR at setup of test_equal_sign_arg[command_context3-completions3-3-False] _

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641858e0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co3')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641858e0>
path = '/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co3'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_ ERROR at setup of test_equal_sign_arg[command_context4-completions4-8-True] __

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964186de0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co4')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6964186de0>
path = '/tmp/pytest-of-root/pytest-0/test_equal_sign_arg_command_co4'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_______________ ERROR at setup of test_git_delete_remote_branch ________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641859d0>
tmp_path = PosixPath('/tmp/pytest-of-root/pytest-0/test_git_delete_remote_branch0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.fixture(autouse=True)
    def setup(monkeypatch, tmp_path, xession):
        if not xession.env.get("BASH_COMPLETIONS"):
            monkeypatch.setitem(
                xession.env,
                "BASH_COMPLETIONS",
                ["/usr/share/bash-completion/bash_completion"],
            )

        (tmp_path / "testdir").mkdir()
        (tmp_path / "spaced dir").mkdir()
>       monkeypatch.chdir(str(tmp_path))

/app/tests/completers/test_bash_completer.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641859d0>
path = '/tmp/pytest-of-root/pytest-0/test_git_delete_remote_branch0'

    def chdir(self, path: str | os.PathLike[str]) -> None:
        """Change the current working directory to the specified path.

        :param path:
            The path to change into.
        """
        if self._cwd is None:
>           self._cwd = os.getcwd()
                        ^^^^^^^^^^^
E           FileNotFoundError: [Errno 2] No such file or directory

/usr/local/lib/python3.12/dist-packages/_pytest/monkeypatch.py:371: FileNotFoundError
_____________________ ERROR at setup of test_dirs_only[cd] _____________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
___________________ ERROR at setup of test_dirs_only[rmdir] ____________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
__________________ ERROR at setup of test_opening_quotes[cd] ___________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
_________________ ERROR at setup of test_opening_quotes[rmdir] _________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
__________________ ERROR at setup of test_closing_quotes[cd] ___________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
_________________ ERROR at setup of test_closing_quotes[rmdir] _________________

    @pytest.fixture(scope="module")
    def dir_path():
>       with tempfile.TemporaryDirectory(dir=".", suffix="_dummyDir") as tmp_path:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:32:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:886: in __init__
    self.name = mkdtemp(suffix, prefix, dir)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

suffix = '_dummyDir', prefix = 'tmp', dir = '.'

    def mkdtemp(suffix=None, prefix=None, dir=None):
        """User-callable function to create and return a unique temporary
        directory.  The return value is the pathname of the directory.

        Arguments are as for mkstemp, except that the 'text' argument is
        not accepted.

        The directory is readable, writable, and searchable only by the
        creating user.

        Caller is responsible for deleting the directory when done with it.
        """

        prefix, suffix, dir, output_type = _sanitize_params(prefix, suffix, dir)

        names = _get_candidate_names()
        if output_type is bytes:
            names = map(_os.fsencode, names)

        for seq in range(TMP_MAX):
            name = next(names)
            file = _os.path.join(dir, prefix + name + suffix)
            _sys.audit("tempfile.mkdtemp", file)
            try:
>               _os.mkdir(file, 0o700)
E               FileNotFoundError: [Errno 2] No such file or directory: './tmpzlq80psg_dummyDir'

/usr/lib/python3.12/tempfile.py:384: FileNotFoundError
=================================== FAILURES ===================================
___________________________ xonsh test: test_rmtree ____________________________
xonsh execution failed
  File "/app/tests/api/test_os.xsh", line 33, in test_rmtree
    git init

  File "/app/xonsh/built_ins.py", line 223, in subproc_captured_hiddenobject
    return xonsh.procs.specs.run_subproc(cmds, captured="hiddenobject", envs=envs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/xonsh/procs/specs.py", line 1107, in run_subproc
    return _run_specs(specs, cmds)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/xonsh/procs/specs.py", line 1153, in _run_specs
    cp.end()
  File "/app/xonsh/procs/pipelines.py", line 481, in end
    self._end(tee_output=tee_output)
  File "/app/xonsh/procs/pipelines.py", line 500, in _end
    self._raise_subproc_error()
  File "/app/xonsh/procs/pipelines.py", line 646, in _raise_subproc_error
    raise subprocess.CalledProcessError(rtn, spec.args, output=self.output)
CalledProcessError: Command '['git', 'init']' returned non-zero exit status 1.
----------------------------- Captured stdout call -----------------------------
/tmp/tmpyv24uo98/rmtree_test /tmp/tmpyv24uo98 /app
----------------------------- Captured stderr call -----------------------------
xonsh: For full traceback set: $XONSH_SHOW_TRACEBACK = True
xonsh.tools.XonshError: xonsh: subprocess mode: command not found: 'git'
Did you mean one of the following?
    id:    Command (id)
    tic:   Command (tic)
    gio:   Command (gio)
    gpg:   Command (gpg)
    init:  Command (init)
___________________________ test_source_current_dir ____________________________

mockopen = None
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6965e5e0f0>
mocked_execx_checker = []

    def test_source_current_dir(mockopen, monkeypatch, mocked_execx_checker):
        monkeypatch.setattr(os.path, "isfile", lambda x: True)
>       source_alias(["foo", "bar"])

/app/tests/aliases/test_source.py:34:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/xonsh/aliases.py:787: in source_alias
    updates = {"__file__": fpath, "__name__": os.path.abspath(fpath)}
                                              ^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = 'foo'

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
_____________________________ test_trace_in_script _____________________________

    def test_trace_in_script():
        CURRENT_DIR = Path(__file__).parent
        cmd = [sys.executable, "-m", "xonsh", str(CURRENT_DIR / "tracer" / "example.xsh")]
        env = {"XONSH_SHOW_TRACEBACK": "True"}
        if sys.platform == "win32":
            # required for an empty environment on Windows. see python/cpython#120836
            for ev in W_ENV.split():
                env[ev] = os.environ[ev]
        expected = dedent(
            """\
            Some output!
            tests/built_ins/tracer/example.xsh:3:variable = ""
            tests/built_ins/tracer/example.xsh:4:for part in parts:
            tests/built_ins/tracer/example.xsh:5:    variable += part
            tests/built_ins/tracer/example.xsh:4:for part in parts:
            tests/built_ins/tracer/example.xsh:5:    variable += part
            tests/built_ins/tracer/example.xsh:4:for part in parts:
            tests/built_ins/tracer/example.xsh:5:    variable += part
            tests/built_ins/tracer/example.xsh:4:for part in parts:
            tests/built_ins/tracer/example.xsh:6:echo Some @(variable)
            """
        ).replace("/", os.sep)
        proc = subprocess.run(cmd, capture_output=True, encoding="utf8", env=env)
>       assert proc.returncode == 0
E       assert 1 == 0
E        +  where 1 = CompletedProcess(args=['/usr/bin/python3.12', '-m', 'xonsh', '/app/tests/built_ins/tracer/example.xsh'], returncode=1,... relpath\n  File "<frozen posixpath>", line 415, in abspath\nFileNotFoundError: [Errno 2] No such file or directory\n').returncode

/app/tests/built_ins/test_tracer.py:53: AssertionError
_______________________________ test_non_dir[cd] _______________________________

cmd = 'cd'
check_completer = <function check_completer.<locals>._factory at 0x7f6965d253a0>

    def test_non_dir(cmd, check_completer):
>       with tempfile.NamedTemporaryFile(dir=".", suffix="_dummySuffix") as tmp:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:26:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:582: in NamedTemporaryFile
    file = _io.open(dir, mode, buffering=buffering,
/usr/lib/python3.12/tempfile.py:579: in opener
    fd, name = _mkstemp_inner(dir, prefix, suffix, flags, output_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/tempfile.py:246: in _mkstemp_inner
    dir = _os.path.abspath(dir)
          ^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = '.'

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
_____________________________ test_non_dir[rmdir] ______________________________

cmd = 'rmdir'
check_completer = <function check_completer.<locals>._factory at 0x7f6957f9b740>

    def test_non_dir(cmd, check_completer):
>       with tempfile.NamedTemporaryFile(dir=".", suffix="_dummySuffix") as tmp:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/app/tests/completers/test_dir_completers.py:26:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/tempfile.py:582: in NamedTemporaryFile
    file = _io.open(dir, mode, buffering=buffering,
/usr/lib/python3.12/tempfile.py:579: in opener
    fd, name = _mkstemp_inner(dir, prefix, suffix, flags, output_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/tempfile.py:246: in _mkstemp_inner
    dir = _os.path.abspath(dir)
          ^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = '.'

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
______________________________ test_complete_dots ______________________________

xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
check_completer = <function check_completer.<locals>._factory at 0x7f6957fc8720>

    def test_complete_dots(xession, check_completer):
        with xession.env.swap(COMPLETE_DOTS="never"):
            dirs = check_completer("cd")
>           assert CUR_DIR not in dirs and PARENT_DIR not in dirs
E           AssertionError: assert ('./' not in {'./'})

/app/tests/completers/test_dir_completers.py:67: AssertionError
_________________________ test_completions[pip-c-exp0] _________________________

line = 'pip', prefix = 'c', exp = {'cache', 'check', 'config'}
check_completer = <function check_completer.<locals>._factory at 0x7f6957e12ac0>
xsh_with_env = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.mark.parametrize(
        "line, prefix, exp",
        [
            ["pip", "c", {"cache", "check", "config"}],
            ["pip show", "", pip_installed],
        ],
    )
    def test_completions(line, prefix, exp, check_completer, xsh_with_env):
        # use the actual PATH from os. Otherwise subproc will fail on windows. `unintialized python...`
        comps = check_completer(line, prefix=prefix)

        if callable(exp):
            exp = exp()
>       assert comps.intersection(exp)
E       AssertionError: assert set()
E        +  where set() = <built-in method intersection of set object at 0x7f6957eab680>({'cache', 'check', 'config'})
E        +    where <built-in method intersection of set object at 0x7f6957eab680> = set().intersection

/app/tests/completers/test_pip_completer.py:63: AssertionError
__________________ test_completions[pip show--pip_installed] ___________________

line = 'pip show', prefix = '', exp = <function pip_installed at 0x7f696735dee0>
check_completer = <function check_completer.<locals>._factory at 0x7f6957e11760>
xsh_with_env = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @pytest.mark.parametrize(
        "line, prefix, exp",
        [
            ["pip", "c", {"cache", "check", "config"}],
            ["pip show", "", pip_installed],
        ],
    )
    def test_completions(line, prefix, exp, check_completer, xsh_with_env):
        # use the actual PATH from os. Otherwise subproc will fail on windows. `unintialized python...`
        comps = check_completer(line, prefix=prefix)

        if callable(exp):
>           exp = exp()
                  ^^^^^

/app/tests/completers/test_pip_completer.py:62:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/tests/completers/test_pip_completer.py:43: in pip_installed
    out = subprocess.check_output(
/usr/lib/python3.12/subprocess.py:466: in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

input = None, capture_output = False, timeout = None, check = True
popenargs = (['pip', 'list', '--format=json', '--disable-pip-version-check'],)
kwargs = {'stdout': -1}
process = <Popen: returncode: 1 args: ['pip', 'list', '--format=json', '--disable-pip-...>
stdout = b'', stderr = None, retcode = 1

    def run(*popenargs,
            input=None, capture_output=False, timeout=None, check=False, **kwargs):
        """Run command with arguments and return a CompletedProcess instance.

        The returned instance will have attributes args, returncode, stdout and
        stderr. By default, stdout and stderr are not captured, and those attributes
        will be None. Pass stdout=PIPE and/or stderr=PIPE in order to capture them,
        or pass capture_output=True to capture both.

        If check is True and the exit code was non-zero, it raises a
        CalledProcessError. The CalledProcessError object will have the return code
        in the returncode attribute, and output & stderr attributes if those streams
        were captured.

        If timeout (seconds) is given and the process takes too long,
         a TimeoutExpired exception will be raised.

        There is an optional argument "input", allowing you to
        pass bytes or a string to the subprocess's stdin.  If you use this argument
        you may not also use the Popen constructor's "stdin" argument, as
        it will be used internally.

        By default, all communication is in bytes, and therefore any "input" should
        be bytes, and the stdout and stderr will be bytes. If in text mode, any
        "input" should be a string, and stdout and stderr will be strings decoded
        according to locale encoding, or by "encoding" if set. Text mode is
        triggered by setting any of text, encoding, errors or universal_newlines.

        The other arguments are the same as for the Popen constructor.
        """
        if input is not None:
            if kwargs.get('stdin') is not None:
                raise ValueError('stdin and input arguments may not both be used.')
            kwargs['stdin'] = PIPE

        if capture_output:
            if kwargs.get('stdout') is not None or kwargs.get('stderr') is not None:
                raise ValueError('stdout and stderr arguments may not be used '
                                 'with capture_output.')
            kwargs['stdout'] = PIPE
            kwargs['stderr'] = PIPE

        with Popen(*popenargs, **kwargs) as process:
            try:
                stdout, stderr = process.communicate(input, timeout=timeout)
            except TimeoutExpired as exc:
                process.kill()
                if _mswindows:
                    # Windows accumulates the output in a single blocking
                    # read() call run on child threads, with the timeout
                    # being done in a join() on those threads.  communicate()
                    # _after_ kill() is required to collect that and add it
                    # to the exception.
                    exc.stdout, exc.stderr = process.communicate()
                else:
                    # POSIX _communicate already populated the output so
                    # far into the TimeoutExpired exception.
                    process.wait()
                raise
            except:  # Including KeyboardInterrupt, communicate handled that.
                process.kill()
                # We don't call process.wait() as .__exit__ does that for us.
                raise
            retcode = process.poll()
            if check and retcode:
>               raise CalledProcessError(retcode, process.args,
                                         output=stdout, stderr=stderr)
E               subprocess.CalledProcessError: Command '['pip', 'list', '--format=json', '--disable-pip-version-check']' returned non-zero exit status 1.

/usr/lib/python3.12/subprocess.py:571: CalledProcessError
----------------------------- Captured stderr call -----------------------------
pytest-cov: Failed to setup subprocess coverage. Environ: {'COV_CORE_SOURCE': ':', 'COV_CORE_CONFIG': '/app/.coveragerc', 'COV_CORE_DATAFILE': '/app/.cache/coverage'} Exception: FileNotFoundError(2, 'No such file or directory')
The folder you are executing pip from can no longer be found.
_____________________________ test_hist_pull[None] _____________________________

src_sessionid = None
ptk_shell = (<prompt_toolkit.input.posix_pipe.PosixPipeInput object at 0x7f6957da0800>, <prompt_toolkit.output.base.DummyOutput object at 0x7f69641b33b0>, <xonsh.shells.ptk_shell.PromptToolkitShell object at 0x7f6957da3560>)
tmpdir = local('/tmp/pytest-of-root/pytest-0/test_hist_pull_None_0')
xonsh_session = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f69641b1eb0>

    @pytest.mark.parametrize(
        "src_sessionid", [None, "e2265764-041c-4c57-acba-49d4e4f676e5"]
    )
    def test_hist_pull(src_sessionid, ptk_shell, tmpdir, xonsh_session, monkeypatch):
        """Test that `pull` method correctly loads history entries
        added to the database by other sessions."""
        xonsh_session.env["XONSH_DATA_DIR"] = str(tmpdir)
        before = time.time()

        # simulate commands being run in other sessions before this session starts
        hist_a = JsonHistory(sessionid=src_sessionid, gc=False)
        hist_a.append({"inp": "cmd hist_a before", "rtn": 0, "ts": [before, before]})
        hist_b = JsonHistory(gc=False)
        hist_b.append({"inp": "cmd hist_b before", "rtn": 0, "ts": [before, before]})

        hist_main = JsonHistory(gc=False)

        # simulate commands being run in other sessions after this session starts
        after = time.time() + 1
        hist_a.append({"inp": "cmd hist_a after", "rtn": 0, "ts": [after, after]})
        hist_b.append({"inp": "cmd hist_b after", "rtn": 0, "ts": [after + 1, after + 1]})

        # give the filesystem long enough that it will update the mtime
        time.sleep(0.01)
        # at_exit ensures that we run the flush synchronously instead of in a background thread
        hist_a.flush(at_exit=True)
        hist_b.flush(at_exit=True)

        # pull only works with PTK shell
        monkeypatch.setattr(xonsh_session.shell, "shell", ptk_shell[2])
>       hist_main.pull(src_sessionid=src_sessionid)

/app/tests/history/test_history_json.py:648:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/xonsh/history/json.py:652: in pull
    for item in _xhj_pull_items(self.last_pull_times, src_sessionid):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/history/json.py:169: in _xhj_pull_items
    current_session_path = xt.expanduser_abs_path(custom_history_file)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/tools.py:2576: in expanduser_abs_path
    return os.path.abspath(expanduser(inp))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = ''

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
_____________ test_hist_pull[e2265764-041c-4c57-acba-49d4e4f676e5] _____________

src_sessionid = 'e2265764-041c-4c57-acba-49d4e4f676e5'
ptk_shell = (<prompt_toolkit.input.posix_pipe.PosixPipeInput object at 0x7f6957c0fc50>, <prompt_toolkit.output.base.DummyOutput object at 0x7f6957c0f260>, <xonsh.shells.ptk_shell.PromptToolkitShell object at 0x7f6957c0fdd0>)
tmpdir = local('/tmp/pytest-of-root/pytest-0/test_hist_pull_e2265764_041c_40')
xonsh_session = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6957c0f350>

    @pytest.mark.parametrize(
        "src_sessionid", [None, "e2265764-041c-4c57-acba-49d4e4f676e5"]
    )
    def test_hist_pull(src_sessionid, ptk_shell, tmpdir, xonsh_session, monkeypatch):
        """Test that `pull` method correctly loads history entries
        added to the database by other sessions."""
        xonsh_session.env["XONSH_DATA_DIR"] = str(tmpdir)
        before = time.time()

        # simulate commands being run in other sessions before this session starts
        hist_a = JsonHistory(sessionid=src_sessionid, gc=False)
        hist_a.append({"inp": "cmd hist_a before", "rtn": 0, "ts": [before, before]})
        hist_b = JsonHistory(gc=False)
        hist_b.append({"inp": "cmd hist_b before", "rtn": 0, "ts": [before, before]})

        hist_main = JsonHistory(gc=False)

        # simulate commands being run in other sessions after this session starts
        after = time.time() + 1
        hist_a.append({"inp": "cmd hist_a after", "rtn": 0, "ts": [after, after]})
        hist_b.append({"inp": "cmd hist_b after", "rtn": 0, "ts": [after + 1, after + 1]})

        # give the filesystem long enough that it will update the mtime
        time.sleep(0.01)
        # at_exit ensures that we run the flush synchronously instead of in a background thread
        hist_a.flush(at_exit=True)
        hist_b.flush(at_exit=True)

        # pull only works with PTK shell
        monkeypatch.setattr(xonsh_session.shell, "shell", ptk_shell[2])
>       hist_main.pull(src_sessionid=src_sessionid)

/app/tests/history/test_history_json.py:648:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/xonsh/history/json.py:652: in pull
    for item in _xhj_pull_items(self.last_pull_times, src_sessionid):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/history/json.py:169: in _xhj_pull_items
    current_session_path = xt.expanduser_abs_path(custom_history_file)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/tools.py:2576: in expanduser_abs_path
    return os.path.abspath(expanduser(inp))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = ''

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
_____________________________ test_hist_pull_mixed _____________________________

ptk_shell = (<prompt_toolkit.input.posix_pipe.PosixPipeInput object at 0x7f6957d0b710>, <prompt_toolkit.output.base.DummyOutput object at 0x7f6957d0ade0>, <xonsh.shells.ptk_shell.PromptToolkitShell object at 0x7f6957d0b8c0>)
tmpdir = local('/tmp/pytest-of-root/pytest-0/test_hist_pull_mixed0')
xonsh_session = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f6957d0af00>

    def test_hist_pull_mixed(ptk_shell, tmpdir, xonsh_session, monkeypatch):
        """Test that mixing general pull with session-specific pull
        does not result in missed or duplicate items.
        """
        xonsh_session.env["XONSH_DATA_DIR"] = str(tmpdir)
        monkeypatch.setattr(xonsh_session.shell, "shell", ptk_shell[2])

        # make sure that all of our fake commands have real, sequential timestamps
        def cmd(inp):
            start, end = time.time(), time.time()
            return {"inp": inp, "rtn": 0, "ts": [start, end]}

        hist_a = JsonHistory(gc=False)
        hist_b = JsonHistory(gc=False)
        hist_main = JsonHistory(gc=False)

        # windows time.time() has ~16ms granularity, so we need to give it some time to increment
        time.sleep(0.032)
        hist_a.append(cmd("a1"))
        time.sleep(0.032)
        hist_b.append(cmd("b1"))

        # filesystem mtimes and time.time() don't always match up perfectly,
        # so we need a little bit of fudge time
        time.sleep(0.032)
        hist_a.flush()
        hist_b.flush()
        time.sleep(0.032)
>       hist_main.pull(src_sessionid=str(hist_a.sessionid))

/app/tests/history/test_history_json.py:688:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/xonsh/history/json.py:652: in pull
    for item in _xhj_pull_items(self.last_pull_times, src_sessionid):
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/history/json.py:169: in _xhj_pull_items
    current_session_path = xt.expanduser_abs_path(custom_history_file)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/tools.py:2576: in expanduser_abs_path
    return os.path.abspath(expanduser(inp))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = ''

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
________________________________ test_get_paths ________________________________

tmpdir = local('/tmp/pytest-of-root/pytest-0/test_get_paths0')

    def test_get_paths(tmpdir):
        bindir1 = str(tmpdir.mkdir("bindir1"))
        bindir2 = str(tmpdir.mkdir("bindir2"))
        env = Env(PATH=[bindir1, bindir2, bindir1, "nodir"])
>       assert get_paths(env) == (bindir2, bindir1)
               ^^^^^^^^^^^^^^

/app/tests/procs/test_executables.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/app/xonsh/procs/executables.py:38: in get_paths
    return tuple(reversed(tuple(clear_paths(env.get("PATH") or []))))
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/app/xonsh/lib/itertools.py:54: in unique_everseen
    for element in filterfalse(seen.__contains__, iterable):
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen posixpath>:428: in realpath
    ???
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

path = 'nodir'

>   ???
E   FileNotFoundError: [Errno 2] No such file or directory

<frozen posixpath>:415: FileNotFoundError
____________________________ test_locate_executable ____________________________

tmpdir = local('/tmp/pytest-of-root/pytest-0/test_locate_executable0')
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    def test_locate_executable(tmpdir, xession):
        bindir0 = tmpdir.mkdir("bindir0")  # current working directory
        bindir1 = tmpdir.mkdir("bindir1")
        bindir2 = tmpdir.mkdir("bindir2")
        bindir3 = tmpdir.mkdir("bindir3")
        bindir2.mkdir("subdir")
        executables = ["file1.EXE", "file2.COM", "file2.EXE", "file3"]
        not_executables = ["file4.EXE", "file5"]
        for exefile in executables + not_executables:
            f = bindir2 / exefile
            f.write_text("binary", encoding="utf8")
            if exefile in executables:
                os.chmod(f, 0o777)

        # Test current working directory.
        (bindir0 / "cwd_non_bin_file").write_text("binary", encoding="utf8")
        (f := bindir0 / "cwd_bin_file.EXE").write_text("binary", encoding="utf8")
        os.chmod(f, 0o777)

        # Test overlapping file names in different bin directories.
        (f := bindir3 / "file3").write_text("binary", encoding="utf8")
        os.chmod(f, 0o777)

        pathext = [".EXE", ".COM"] if ON_WINDOWS else []
        sep = os.path.sep

        with (
            xession.env.swap(
                PATH=[str(bindir1), str(bindir2), str(bindir3)], PATHEXT=pathext
            ),
>           chdir(str(bindir0)),
            ^^^^^^^^^^^^^^^^^^^
        ):

/app/tests/procs/test_executables.py:57:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
/usr/lib/python3.12/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

adir = PosixPath('/tmp/pytest-of-root/pytest-0/test_locate_executable0/bindir0')
mkdir = False

    @contextmanager
    def chdir(adir, mkdir=False):
        adir = pathlib.Path(adir)
>       old_dir = os.getcwd()
                  ^^^^^^^^^^^
E       FileNotFoundError: [Errno 2] No such file or directory

/app/xonsh/tools.py:75: FileNotFoundError
____________________________ test_repath_backslash _____________________________

home_env = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    @skip_if_on_windows
    def test_repath_backslash(home_env):
        exp = os.listdir(HOME_PATH)
        exp = {p for p in exp if re.match(r"\w\w.*", p)}
        exp = {os.path.join(HOME_PATH, p) for p in exp}
        obs = set(pathsearch(regexsearch, r"~/\w\w.*"))
>       assert exp == obs
E       AssertionError: assert set() == {'~/\\w\\w.*'}
E
E         Extra items in the right set:
E         '~/\\w\\w.*'
E         Use -v to get more diff

/app/tests/test_builtins.py:56: AssertionError
_ Test_is_only_functional_alias.test_bash_and_is_alias_is_only_functional_alias _

self = <test_commands_cache.Test_is_only_functional_alias object at 0x7f6966819730>
xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>

    def test_bash_and_is_alias_is_only_functional_alias(self, xession):
        xession.aliases["git"] = lambda args: os.chdir(args[0])
>       assert xession.commands_cache.is_only_functional_alias("git") is False
E       AssertionError: assert True is False
E        +  where True = is_only_functional_alias('git')
E        +    where is_only_functional_alias = <xonsh.commands_cache.CommandsCache object at 0x7f6955c17950>.is_only_functional_alias
E        +      where <xonsh.commands_cache.CommandsCache object at 0x7f6955c17950> = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>.commands_cache

/app/tests/test_commands_cache.py:182: AssertionError
_____________________________ test_script[case11] ______________________________

case = ('\nwith open(\'tttt\', \'w\') as fp:\n    fp.write("Wow mom!\\n")\n\n![python tests/bin/cat tttt | python tests/bin/wc]\n', ' 1  2 9 <stdin>\n', 0)

    @skip_if_no_xonsh
    @pytest.mark.parametrize("case", ALL_PLATFORMS)
    @pytest.mark.flaky(reruns=4, reruns_delay=2)
    def test_script(case):
        script, exp_out, exp_rtn = case
        if ON_DARWIN:
            script = script.replace("tests/bin", str(Path(__file__).parent / "bin"))
        out, err, rtn = run_xonsh(script)
        out = out.replace("bash: no job control in this shell\n", "")
        if callable(exp_out):
            assert exp_out(out), (
                f"CASE:\nscript=***\n{script}\n***,\nExpected: {exp_out!r},\nActual: {out!r}"
            )
        else:
>           assert exp_out == out
E           assert ' 1  2 9 <stdin>\n' == 'xonsh: To lo...d (python3)\n'
E
E             +  1  2 9 <stdin>
E             - xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E             - Traceback (most recent call last):
E             -   File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             -     p = self.cls(cmd, bufsize=bufsize, **kwargs)
E             -         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...
E
E             ...Full output truncated (20 lines hidden), use '-vv' to show

tests/test_integrations.py:766: AssertionError
_____________________________ test_script[case12] ______________________________

case = ('\nwith open(\'tttt\', \'w\') as fp:\n    fp.write("Wow mom!\\n")\n\n![python tests/bin/cat tttt | python tests/bin/wc | python tests/bin/wc]\n', ' 1  4 16 <stdin>\n', 0)

    @skip_if_no_xonsh
    @pytest.mark.parametrize("case", ALL_PLATFORMS)
    @pytest.mark.flaky(reruns=4, reruns_delay=2)
    def test_script(case):
        script, exp_out, exp_rtn = case
        if ON_DARWIN:
            script = script.replace("tests/bin", str(Path(__file__).parent / "bin"))
        out, err, rtn = run_xonsh(script)
        out = out.replace("bash: no job control in this shell\n", "")
        if callable(exp_out):
            assert exp_out(out), (
                f"CASE:\nscript=***\n{script}\n***,\nExpected: {exp_out!r},\nActual: {out!r}"
            )
        else:
>           assert exp_out == out
E           assert ' 1  4 16 <stdin>\n' == 'xonsh: To lo...d (python3)\n'
E
E             +  1  4 16 <stdin>
E             - xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E             - Traceback (most recent call last):
E             -   File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             -     p = self.cls(cmd, bufsize=bufsize, **kwargs)
E             -         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...
E
E             ...Full output truncated (20 lines hidden), use '-vv' to show

tests/test_integrations.py:766: AssertionError
_____________________________ test_script[case20] ______________________________

case = ('\necho Just the place for a snark. >tttt\npython tests/bin/cat tttt\n', 'Just the place for a snark.\n', 0)

    @skip_if_no_xonsh
    @pytest.mark.parametrize("case", ALL_PLATFORMS)
    @pytest.mark.flaky(reruns=4, reruns_delay=2)
    def test_script(case):
        script, exp_out, exp_rtn = case
        if ON_DARWIN:
            script = script.replace("tests/bin", str(Path(__file__).parent / "bin"))
        out, err, rtn = run_xonsh(script)
        out = out.replace("bash: no job control in this shell\n", "")
        if callable(exp_out):
            assert exp_out(out), (
                f"CASE:\nscript=***\n{script}\n***,\nExpected: {exp_out!r},\nActual: {out!r}"
            )
        else:
>           assert exp_out == out
E           assert 'Just the pla...or a snark.\n' == 'xonsh: To lo...d (python3)\n'
E
E             + Just the place for a snark.
E             - xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E             - Traceback (most recent call last):
E             -   File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             -     p = self.cls(cmd, bufsize=bufsize, **kwargs)
E             -         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...
E
E             ...Full output truncated (20 lines hidden), use '-vv' to show

tests/test_integrations.py:766: AssertionError
_____________________________ test_script[case31] ______________________________

case = ('\ndef _callme(args):\n    result = $(python -c \'print("tree");print("car")\')\n    print(result[::-1])\n    print(\'one\\ntwo\\nthree\')\n\naliases[\'callme\'] = _callme\ncallme | grep t\n', 'eert\ntwo\nthree\n', 0)

    @skip_if_no_xonsh
    @pytest.mark.parametrize("case", ALL_PLATFORMS)
    @pytest.mark.flaky(reruns=4, reruns_delay=2)
    def test_script(case):
        script, exp_out, exp_rtn = case
        if ON_DARWIN:
            script = script.replace("tests/bin", str(Path(__file__).parent / "bin"))
        out, err, rtn = run_xonsh(script)
        out = out.replace("bash: no job control in this shell\n", "")
        if callable(exp_out):
            assert exp_out(out), (
                f"CASE:\nscript=***\n{script}\n***,\nExpected: {exp_out!r},\nActual: {out!r}"
            )
        else:
>           assert exp_out == out
E           assert 'eert\ntwo\nthree\n' == 'xonsh: To lo...ntwo\nthree\n'
E
E             + eert
E             - xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E             - Traceback (most recent call last):
E             -   File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             -     p = self.cls(cmd, bufsize=bufsize, **kwargs)
E             -         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...
E
E             ...Full output truncated (25 lines hidden), use '-vv' to show

tests/test_integrations.py:766: AssertionError
_____________________________ test_script[case32] ______________________________

case = ('\ndef _callme(args):\n    python -c \'print("tree");print("car")\'\n    print(\'one\\ntwo\\nthree\')\n\naliases[\'callme\'] = _callme\ncallme | grep t\n', 'tree\ntwo\nthree\n', 0)

    @skip_if_no_xonsh
    @pytest.mark.parametrize("case", ALL_PLATFORMS)
    @pytest.mark.flaky(reruns=4, reruns_delay=2)
    def test_script(case):
        script, exp_out, exp_rtn = case
        if ON_DARWIN:
            script = script.replace("tests/bin", str(Path(__file__).parent / "bin"))
        out, err, rtn = run_xonsh(script)
        out = out.replace("bash: no job control in this shell\n", "")
        if callable(exp_out):
            assert exp_out(out), (
                f"CASE:\nscript=***\n{script}\n***,\nExpected: {exp_out!r},\nActual: {out!r}"
            )
        else:
>           assert exp_out == out
E           assert 'tree\ntwo\nthree\n' == 'xonsh: To lo...ntwo\nthree\n'
E
E             + tree
E             - xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E             - Traceback (most recent call last):
E             -   File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             -     p = self.cls(cmd, bufsize=bufsize, **kwargs)
E             -         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...
E
E             ...Full output truncated (25 lines hidden), use '-vv' to show

tests/test_integrations.py:766: AssertionError
__________________________________ test_argv0 __________________________________

    @skip_if_no_xonsh
    @skip_if_on_msys
    @skip_if_on_windows
    @skip_if_on_darwin
    def test_argv0():
>       check_run_xonsh("checkargv0.xsh", None, "OK\n")

tests/test_integrations.py:1049:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

cmd = 'checkargv0.xsh', fmt = None, exp = 'OK\n', exp_rtn = 0

    def check_run_xonsh(cmd, fmt, exp, exp_rtn=0):
        """The ``fmt`` parameter is a function
        that formats the output of cmd, can be None.
        """
        out, err, rtn = run_xonsh(cmd, stderr=sp.PIPE)
        if callable(fmt):
            out = fmt(out)
        if callable(exp):
            exp = exp()
>       assert out == exp, err
E       AssertionError: xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E         Traceback (most recent call last):
E           File "/app/xonsh/procs/specs.py", line 530, in _run_binary
E             p = self.cls(cmd, bufsize=bufsize, **kwargs)
E                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           File "/app/xonsh/procs/posix.py", line 99, in __init__
E             self.proc = proc = subprocess.Popen(
E                                ^^^^^^^^^^^^^^^^^
E           File "/usr/lib/python3.12/subprocess.py", line 1026, in __init__
E             self._execute_child(args, executable, preexec_fn, close_fds,
E           File "/usr/lib/python3.12/subprocess.py", line 1955, in _execute_child
E             raise child_exception_type(errno_num, err_msg, err_filename)
E         FileNotFoundError: [Errno 2] No such file or directory: 'python'
E
E         The above exception was the direct cause of the following exception:
E
E         Traceback (most recent call last):
E           File "/app/xonsh/procs/pipelines.py", line 177, in __init__
E             proc = spec.run(pipeline_group=pipeline_group)
E                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           File "/app/xonsh/procs/specs.py", line 512, in run
E             p = self._run_binary(kwargs)
E                 ^^^^^^^^^^^^^^^^^^^^^^^^
E           File "/app/xonsh/procs/specs.py", line 557, in _run_binary
E             raise xt.XonshError(e) from ex
E         xonsh.tools.XonshError: xonsh: subprocess mode: command not found: 'python'
E         Did you mean the following?
E             python3:  Command (python3)
E         python not in $PATH
E         xonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>
E         Traceback (most recent call last):
E           File "/app/xonsh/procs/pipelines.py", line 177, in __init__
E             proc = spec.run(pipeline_group=pipeline_group)
E                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E           File "/app/xonsh/procs/specs.py", line 512, in run
E             p = self._run_binary(kwargs)
E                 ^^^^^^^^^^^^^^^^^^^^^^^^
E           File "/app/xonsh/procs/specs.py", line 522, in _run_binary
E             raise xt.XonshError("xonsh: subprocess mode: command is empty")
E         xonsh.tools.XonshError: xonsh: subprocess mode: command is empty
E
E       assert 'Unexpected a...  != python\n' == 'OK\n'
E
E         - OK
E         + Unexpected argv[0]:  != python

tests/test_integrations.py:131: AssertionError
___________________ test_suspended_captured_process_pipeline ___________________

    @skip_if_on_windows
    def test_suspended_captured_process_pipeline():
        """See also test_specs.py:test_specs_with_suspended_captured_process_pipeline"""
        stdin_cmd = "!(python -c 'import os, signal, time; time.sleep(0.2); os.kill(os.getpid(), signal.SIGTTIN)')\n"
        out, err, ret = run_xonsh(
            cmd=None, stdin_cmd=stdin_cmd, interactive=True, single_command=False, timeout=5
        )
        match = ".*suspended=True.*"
>       assert re.match(match, out, re.MULTILINE | re.DOTALL), (
            f"\nFailed:\n```\n{stdin_cmd.strip()}\n```,\nresult: {out!r}\nexpected: {match!r}."
        )
E       AssertionError:
E         Failed:
E         ```
E         !(python -c 'import os, signal, time; time.sleep(0.2); os.kill(os.getpid(), signal.SIGTTIN)')
E         ```,
E         result: 'Warning: Input is not a terminal (fd=0).\n\nroot@6c4e4570404a /app @#\n\n\n\n\n\n\n                           !(python -c \'import os, signal, time; time.sleep(0.2)\n                                                                               ;\n os.kill(os.getpid(), signal.SIGTTIN)\')root@6c4e4570404a /app @# !(python -c \'import os, signal, time; time.sleep(0.2)\n                                                                               ;\n os.kill(os.getpid(), signal.SIGTTIN)\')\nxonsh: To log full traceback to a file set: $XONSH_TRACEBACK_LOGFILE = <filename>\nTraceback (most recent call last):\n  File "/app/xonsh/procs/specs.py", line 530, in _run_binary\n    p = self.cls(cmd, bufsize=bufsize, **kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/app/xonsh/procs/posix.py", line 99, in __init__\n    self.proc = proc = subprocess.Popen(\n                       ^^^^^^^^^^^^^^^^^\n  File "/usr/lib/python3.12/subprocess.py", line 1026, in __init__\n    self._execute_child(args, executable, preexec_fn, close_fds,\n  File "/usr/lib/python3.12/subprocess.py", line 1955, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nFileNotFoundError: [Errno 2] No such file or directory: \'python\'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "/app/xonsh/procs/pipelines.py", line 177, in __init__\n    proc = spec.run(pipeline_group=pipeline_group)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/app/xonsh/procs/specs.py", line 512, in run\n    p = self._run_binary(kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/app/xonsh/procs/specs.py", line 557, in _run_binary\n    raise xt.XonshError(e) from ex\nxonsh.tools.XonshError: xonsh: subprocess mode: command not found: \'python\'\nDid you mean the following?\n    python3:  Command (python3)\nroot@6c4e4570404a /app [1] @#\n\n\n\n\n\n\n                               CommandPipeline(\n  returncode=1,\n  args=[\'python\', \'-c\', \'import os, signal, time; time.sleep(0.2); os.kill(os.getpid(), signal.SIGTTIN)\'],\n  executed_cmd=[\'python\', \'-c\', \'import os, signal, time; time.sleep(0.2); os.kill(os.getpid(), signal.SIGTTIN)\'],\n  timestamps=[1756229936.4484081, 1756229936.4823647],\n  output=\'\'\n)\nroot@6c4e4570404a /app [1] @#\n'
E         expected: '.*suspended=True.*'.
E       assert None
E        +  where None = <function match at 0x7f696a4059e0>('.*suspended=True.*', "Warning: Input is not a terminal (fd=0).\n\nroot@6c4e4570404a /app @#\n\n\n\n\n\n\n                           !(pytho...l.SIGTTIN)'],\n  timestamps=[1756229936.4484081, 1756229936.4823647],\n  output=''\n)\nroot@6c4e4570404a /app [1] @#\n", (re.MULTILINE | re.DOTALL))
E        +    where <function match at 0x7f696a4059e0> = re.match
E        +    and   re.MULTILINE = re.MULTILINE
E        +    and   re.DOTALL = re.DOTALL

tests/test_integrations.py:1423: AssertionError
________________________ test_man_completion[yes-exp0] _________________________

xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
check_completer = <function check_completer.<locals>._factory at 0x7f69560151c0>
cmd = 'yes', exp = {'--help', '--version'}

    @skip_if_on_windows
    @pytest.mark.parametrize(
        "cmd,exp",
        [
            [
                "yes",
                {"--version", "--help"},
            ],
            [
                "man",
                {
                    "--all",
                    "--apropos",
                    "--ascii",
                    "--catman",
                    "--config-file",
                    "--debug",
                    "--default",
                    "--ditroff",
                    "--encoding",
                    "--extension",
                    "--global-apropos",
                    "--gxditview",
                    "--help",
                    "--html",
                    "--ignore-case",
                    "--local-file",
                    "--locale",
                    "--location",
                    "--location-cat",
                    "--manpath",
                    "--match-case",
                    "--names-only",
                    "--nh",
                    "--nj",
                    "--no-subpages",
                    "--pager",
                    "--preprocessor",
                    "--prompt",
                    "--recode",
                    "--regex",
                    "--sections",
                    "--systems",
                    "--troff",
                    "--troff-device",
                    "--update",
                    "--usage",
                    "--version",
                    "--warnings",
                    "--whatis",
                    "--wildcard",
                },
            ],
        ],
    )
    def test_man_completion(xession, check_completer, cmd, exp):
        xession.env["MANPATH"] = os.path.dirname(os.path.abspath(__file__))
>       completions = check_completer(cmd, complete_fn=complete_from_man, prefix="-")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/test_man.py:67:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
xonsh/pytest/plugin.py:350: in _factory
    values = {getattr(i, "value", i).strip() for i in completions}
                                                      ^^^^^^^^^^^
xonsh/completers/man.py:137: in completions
    for desc, opts in _parse_man_page_options(cmd).items():
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:120: in _parse_man_page_options
    options = dict(generate_options_of(cmd))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:43: in generate_options_of
    out = _get_man_page(cmd)
          ^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:32: in _get_man_page
    return subprocess.check_output(["col", "-b"], stdin=manpage.stdout, env=env)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/subprocess.py:466: in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
/usr/lib/python3.12/subprocess.py:548: in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/subprocess.py:1026: in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <Popen: returncode: 255 args: ['col', '-b']>, args = ['col', '-b']
executable = b'col', preexec_fn = None, close_fds = True, pass_fds = ()
cwd = None
env = {'COMMANDS_CACHE_SAVE_INTERMEDIATE': '', 'MANPATH': '/app/tests', 'PATH': '/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games', 'UPDATE_OS_ENVIRON': '', ...}
startupinfo = None, creationflags = 0, shell = False, p2cread = 11
p2cwrite = -1, c2pread = 12, c2pwrite = 13, errread = -1, errwrite = -1
restore_signals = True, gid = None, gids = None, uid = None, umask = -1
start_new_session = False, process_group = -1

    def _execute_child(self, args, executable, preexec_fn, close_fds,
                       pass_fds, cwd, env,
                       startupinfo, creationflags, shell,
                       p2cread, p2cwrite,
                       c2pread, c2pwrite,
                       errread, errwrite,
                       restore_signals,
                       gid, gids, uid, umask,
                       start_new_session, process_group):
        """Execute program (POSIX version)"""

        if isinstance(args, (str, bytes)):
            args = [args]
        elif isinstance(args, os.PathLike):
            if shell:
                raise TypeError('path-like args is not allowed when '
                                'shell is true')
            args = [args]
        else:
            args = list(args)

        if shell:
            # On Android the default shell is at '/system/bin/sh'.
            unix_shell = ('/system/bin/sh' if
                      hasattr(sys, 'getandroidapilevel') else '/bin/sh')
            args = [unix_shell, "-c"] + args
            if executable:
                args[0] = executable

        if executable is None:
            executable = args[0]

        sys.audit("subprocess.Popen", executable, args, cwd, env)

        if (_USE_POSIX_SPAWN
                and os.path.dirname(executable)
                and preexec_fn is None
                and not close_fds
                and not pass_fds
                and cwd is None
                and (p2cread == -1 or p2cread > 2)
                and (c2pwrite == -1 or c2pwrite > 2)
                and (errwrite == -1 or errwrite > 2)
                and not start_new_session
                and process_group == -1
                and gid is None
                and gids is None
                and uid is None
                and umask < 0):
            self._posix_spawn(args, executable, env, restore_signals,
                              p2cread, p2cwrite,
                              c2pread, c2pwrite,
                              errread, errwrite)
            return

        orig_executable = executable

        # For transferring possible exec failure from child to parent.
        # Data format: "exception name:hex errno:description"
        # Pickle is not used; it is complex and involves memory allocation.
        errpipe_read, errpipe_write = os.pipe()
        # errpipe_write must not be in the standard io 0, 1, or 2 fd range.
        low_fds_to_close = []
        while errpipe_write < 3:
            low_fds_to_close.append(errpipe_write)
            errpipe_write = os.dup(errpipe_write)
        for low_fd in low_fds_to_close:
            os.close(low_fd)
        try:
            try:
                # We must avoid complex work that could involve
                # malloc or free in the child process to avoid
                # potential deadlocks, thus we do all this here.
                # and pass it to fork_exec()

                if env is not None:
                    env_list = []
                    for k, v in env.items():
                        k = os.fsencode(k)
                        if b'=' in k:
                            raise ValueError("illegal environment variable name")
                        env_list.append(k + b'=' + os.fsencode(v))
                else:
                    env_list = None  # Use execv instead of execve.
                executable = os.fsencode(executable)
                if os.path.dirname(executable):
                    executable_list = (executable,)
                else:
                    # This matches the behavior of os._execvpe().
                    executable_list = tuple(
                        os.path.join(os.fsencode(dir), executable)
                        for dir in os.get_exec_path(env))
                fds_to_keep = set(pass_fds)
                fds_to_keep.add(errpipe_write)
                self.pid = _fork_exec(
                        args, executable_list,
                        close_fds, tuple(sorted(map(int, fds_to_keep))),
                        cwd, env_list,
                        p2cread, p2cwrite, c2pread, c2pwrite,
                        errread, errwrite,
                        errpipe_read, errpipe_write,
                        restore_signals, start_new_session,
                        process_group, gid, gids, uid, umask,
                        preexec_fn, _USE_VFORK)
                self._child_created = True
            finally:
                # be sure the FD is closed no matter what
                os.close(errpipe_write)

            self._close_pipe_fds(p2cread, p2cwrite,
                                 c2pread, c2pwrite,
                                 errread, errwrite)

            # Wait for exec to fail or succeed; possibly raising an
            # exception (limited in size)
            errpipe_data = bytearray()
            while True:
                part = os.read(errpipe_read, 50000)
                errpipe_data += part
                if not part or len(errpipe_data) > 50000:
                    break
        finally:
            # be sure the FD is closed no matter what
            os.close(errpipe_read)

        if errpipe_data:
            try:
                pid, sts = os.waitpid(self.pid, 0)
                if pid == self.pid:
                    self._handle_exitstatus(sts)
                else:
                    self.returncode = sys.maxsize
            except ChildProcessError:
                pass

            try:
                exception_name, hex_errno, err_msg = (
                        errpipe_data.split(b':', 2))
                # The encoding here should match the encoding
                # written in by the subprocess implementations
                # like _posixsubprocess
                err_msg = err_msg.decode()
            except ValueError:
                exception_name = b'SubprocessError'
                hex_errno = b'0'
                err_msg = 'Bad exception data from child: {!r}'.format(
                              bytes(errpipe_data))
            child_exception_type = getattr(
                    builtins, exception_name.decode('ascii'),
                    SubprocessError)
            if issubclass(child_exception_type, OSError) and hex_errno:
                errno_num = int(hex_errno, 16)
                if err_msg == "noexec:chdir":
                    err_msg = ""
                    # The error must be from chdir(cwd).
                    err_filename = cwd
                elif err_msg == "noexec":
                    err_msg = ""
                    err_filename = None
                else:
                    err_filename = orig_executable
                if errno_num != 0:
                    err_msg = os.strerror(errno_num)
                if err_filename is not None:
>                   raise child_exception_type(errno_num, err_msg, err_filename)
E                   FileNotFoundError: [Errno 2] No such file or directory: 'col'

/usr/lib/python3.12/subprocess.py:1955: FileNotFoundError
________________________ test_man_completion[man-exp1] _________________________

xession = <xonsh.built_ins.XonshSession object at 0x7f6968d27020>
check_completer = <function check_completer.<locals>._factory at 0x7f69560cda80>
cmd = 'man'
exp = {'--all', '--apropos', '--ascii', '--catman', '--config-file', '--debug', ...}

    @skip_if_on_windows
    @pytest.mark.parametrize(
        "cmd,exp",
        [
            [
                "yes",
                {"--version", "--help"},
            ],
            [
                "man",
                {
                    "--all",
                    "--apropos",
                    "--ascii",
                    "--catman",
                    "--config-file",
                    "--debug",
                    "--default",
                    "--ditroff",
                    "--encoding",
                    "--extension",
                    "--global-apropos",
                    "--gxditview",
                    "--help",
                    "--html",
                    "--ignore-case",
                    "--local-file",
                    "--locale",
                    "--location",
                    "--location-cat",
                    "--manpath",
                    "--match-case",
                    "--names-only",
                    "--nh",
                    "--nj",
                    "--no-subpages",
                    "--pager",
                    "--preprocessor",
                    "--prompt",
                    "--recode",
                    "--regex",
                    "--sections",
                    "--systems",
                    "--troff",
                    "--troff-device",
                    "--update",
                    "--usage",
                    "--version",
                    "--warnings",
                    "--whatis",
                    "--wildcard",
                },
            ],
        ],
    )
    def test_man_completion(xession, check_completer, cmd, exp):
        xession.env["MANPATH"] = os.path.dirname(os.path.abspath(__file__))
>       completions = check_completer(cmd, complete_fn=complete_from_man, prefix="-")
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/test_man.py:67:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
xonsh/pytest/plugin.py:350: in _factory
    values = {getattr(i, "value", i).strip() for i in completions}
                                                      ^^^^^^^^^^^
xonsh/completers/man.py:137: in completions
    for desc, opts in _parse_man_page_options(cmd).items():
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:120: in _parse_man_page_options
    options = dict(generate_options_of(cmd))
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:43: in generate_options_of
    out = _get_man_page(cmd)
          ^^^^^^^^^^^^^^^^^^
xonsh/completers/man.py:32: in _get_man_page
    return subprocess.check_output(["col", "-b"], stdin=manpage.stdout, env=env)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/subprocess.py:466: in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
/usr/lib/python3.12/subprocess.py:548: in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.12/subprocess.py:1026: in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <Popen: returncode: 255 args: ['col', '-b']>, args = ['col', '-b']
executable = b'col', preexec_fn = None, close_fds = True, pass_fds = ()
cwd = None
env = {'COMMANDS_CACHE_SAVE_INTERMEDIATE': '', 'MANPATH': '/app/tests', 'PATH': '/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games', 'UPDATE_OS_ENVIRON': '', ...}
startupinfo = None, creationflags = 0, shell = False, p2cread = 12
p2cwrite = -1, c2pread = 13, c2pwrite = 14, errread = -1, errwrite = -1
restore_signals = True, gid = None, gids = None, uid = None, umask = -1
start_new_session = False, process_group = -1

    def _execute_child(self, args, executable, preexec_fn, close_fds,
                       pass_fds, cwd, env,
                       startupinfo, creationflags, shell,
                       p2cread, p2cwrite,
                       c2pread, c2pwrite,
                       errread, errwrite,
                       restore_signals,
                       gid, gids, uid, umask,
                       start_new_session, process_group):
        """Execute program (POSIX version)"""

        if isinstance(args, (str, bytes)):
            args = [args]
        elif isinstance(args, os.PathLike):
            if shell:
                raise TypeError('path-like args is not allowed when '
                                'shell is true')
            args = [args]
        else:
            args = list(args)

        if shell:
            # On Android the default shell is at '/system/bin/sh'.
            unix_shell = ('/system/bin/sh' if
                      hasattr(sys, 'getandroidapilevel') else '/bin/sh')
            args = [unix_shell, "-c"] + args
            if executable:
                args[0] = executable

        if executable is None:
            executable = args[0]

        sys.audit("subprocess.Popen", executable, args, cwd, env)

        if (_USE_POSIX_SPAWN
                and os.path.dirname(executable)
                and preexec_fn is None
                and not close_fds
                and not pass_fds
                and cwd is None
                and (p2cread == -1 or p2cread > 2)
                and (c2pwrite == -1 or c2pwrite > 2)
                and (errwrite == -1 or errwrite > 2)
                and not start_new_session
                and process_group == -1
                and gid is None
                and gids is None
                and uid is None
                and umask < 0):
            self._posix_spawn(args, executable, env, restore_signals,
                              p2cread, p2cwrite,
                              c2pread, c2pwrite,
                              errread, errwrite)
            return

        orig_executable = executable

        # For transferring possible exec failure from child to parent.
        # Data format: "exception name:hex errno:description"
        # Pickle is not used; it is complex and involves memory allocation.
        errpipe_read, errpipe_write = os.pipe()
        # errpipe_write must not be in the standard io 0, 1, or 2 fd range.
        low_fds_to_close = []
        while errpipe_write < 3:
            low_fds_to_close.append(errpipe_write)
            errpipe_write = os.dup(errpipe_write)
        for low_fd in low_fds_to_close:
            os.close(low_fd)
        try:
            try:
                # We must avoid complex work that could involve
                # malloc or free in the child process to avoid
                # potential deadlocks, thus we do all this here.
                # and pass it to fork_exec()

                if env is not None:
                    env_list = []
                    for k, v in env.items():
                        k = os.fsencode(k)
                        if b'=' in k:
                            raise ValueError("illegal environment variable name")
                        env_list.append(k + b'=' + os.fsencode(v))
                else:
                    env_list = None  # Use execv instead of execve.
                executable = os.fsencode(executable)
                if os.path.dirname(executable):
                    executable_list = (executable,)
                else:
                    # This matches the behavior of os._execvpe().
                    executable_list = tuple(
                        os.path.join(os.fsencode(dir), executable)
                        for dir in os.get_exec_path(env))
                fds_to_keep = set(pass_fds)
                fds_to_keep.add(errpipe_write)
                self.pid = _fork_exec(
                        args, executable_list,
                        close_fds, tuple(sorted(map(int, fds_to_keep))),
                        cwd, env_list,
                        p2cread, p2cwrite, c2pread, c2pwrite,
                        errread, errwrite,
                        errpipe_read, errpipe_write,
                        restore_signals, start_new_session,
                        process_group, gid, gids, uid, umask,
                        preexec_fn, _USE_VFORK)
                self._child_created = True
            finally:
                # be sure the FD is closed no matter what
                os.close(errpipe_write)

            self._close_pipe_fds(p2cread, p2cwrite,
                                 c2pread, c2pwrite,
                                 errread, errwrite)

            # Wait for exec to fail or succeed; possibly raising an
            # exception (limited in size)
            errpipe_data = bytearray()
            while True:
                part = os.read(errpipe_read, 50000)
                errpipe_data += part
                if not part or len(errpipe_data) > 50000:
                    break
        finally:
            # be sure the FD is closed no matter what
            os.close(errpipe_read)

        if errpipe_data:
            try:
                pid, sts = os.waitpid(self.pid, 0)
                if pid == self.pid:
                    self._handle_exitstatus(sts)
                else:
                    self.returncode = sys.maxsize
            except ChildProcessError:
                pass

            try:
                exception_name, hex_errno, err_msg = (
                        errpipe_data.split(b':', 2))
                # The encoding here should match the encoding
                # written in by the subprocess implementations
                # like _posixsubprocess
                err_msg = err_msg.decode()
            except ValueError:
                exception_name = b'SubprocessError'
                hex_errno = b'0'
                err_msg = 'Bad exception data from child: {!r}'.format(
                              bytes(errpipe_data))
            child_exception_type = getattr(
                    builtins, exception_name.decode('ascii'),
                    SubprocessError)
            if issubclass(child_exception_type, OSError) and hex_errno:
                errno_num = int(hex_errno, 16)
                if err_msg == "noexec:chdir":
                    err_msg = ""
                    # The error must be from chdir(cwd).
                    err_filename = cwd
                elif err_msg == "noexec":
                    err_msg = ""
                    err_filename = None
                else:
                    err_filename = orig_executable
                if errno_num != 0:
                    err_msg = os.strerror(errno_num)
                if err_filename is not None:
>                   raise child_exception_type(errno_num, err_msg, err_filename)
E                   FileNotFoundError: [Errno 2] No such file or directory: 'col'

/usr/lib/python3.12/subprocess.py:1955: FileNotFoundError
=============================== warnings summary ===============================
tests/test_tools.py::test_is_tok_color_dict[val1-False]
tests/test_tools.py::test_is_tok_color_dict[val2-False]
  /app/tests/test_tools.py:2048: RuntimeWarning: "1" is not a valid Token.
    assert is_tok_color_dict(val) == exp

tests/test_tools.py::test_is_tok_color_dict[val3-False]
  /app/tests/test_tools.py:2048: RuntimeWarning: "{Token.Literal.String: '123'}" contains an invalid style.
    assert is_tok_color_dict(val) == exp

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.11-final-0 _______________

Name                                     Stmts   Miss   Cover   Missing
-----------------------------------------------------------------------
xonsh/completers/environment.py             21      1  95.24%   19
xonsh/lib/jsonutils.py                       8      1  87.50%   15
xonsh/parsers/v39.py                        21      1  95.24%   48
xonsh/prompt/job.py                         19      1  94.74%   16
xonsh/webconfig/__main__.py                  2      2   0.00%   1-3
xonsh/webconfig/file_writes.py              47      2  95.74%   41, 45
xonsh/webconfig/xonsh_data.py               76      2  97.37%   83-84
xonsh/lazyimps.py                            3      3   0.00%   3-11
xonsh/lazyjson.py                            3      3   0.00%   3-11
xonsh/lib/os.py                              3      3   0.00%   3-9
xonsh/lib/subprocess.py                      3      3   0.00%   3-11
xonsh/prompt/times.py                        6      3  50.00%   9-11
xonsh/xoreutils/uname.py                    31      3  90.32%   91-93, 97
xonsh/history/dummy.py                      14      4  71.43%   21-24
xonsh/parsers/v36.py                        73      4  94.52%   95, 134, 165-166
xonsh/prompt/env.py                         40      4  90.00%   74-77
xonsh/shells/ptk_shell/history.py           28      4  85.71%   24, 27, 36, 51
xonsh/lib/lazyjson.py                      174      5  97.13%   149, 154, 166, 223-224
xonsh/lib/modules.py                        65      5  92.31%   41, 46, 53, 79, 82
xonsh/contexts.py                           64      6  90.62%   33, 77, 103, 107, 119-120
xonsh/lib/itertools.py                      20      6  70.00%   33, 58-62
xonsh/shells/dumb_shell.py                   6      6   0.00%   3-12
xonsh/shells/ptk_shell/formatter.py         26      6  76.92%   29-34, 50, 59, 64
xonsh/xoreutils/yes.py                       8      6  25.00%   6-13
xonsh/api/os.py                             13      7  46.15%   25-32
xonsh/history/base.py                       67      7  89.55%   92, 111, 116, 129, 167, 173, 189
xonsh/lib/collections.py                    45      7  84.44%   53, 67-73
xonsh/parser.py                             17      7  58.82%   12, 14, 17-22
xonsh/completers/bash.py                    36      8  77.78%   30, 33, 50-56, 66
xonsh/xoreutils/pwd.py                      12      8  33.33%   10-17
xonsh/color_tools.py                        99      9  90.91%   37, 376, 381-383, 424, 497-499
xonsh/platforms/macutils.py                 10     10   0.00%   3-23
xonsh/parsers/lexer.py                     245     11  95.51%   183, 379-380, 403-406, 415-416, 459, 520
xonsh/parsers/v38.py                       189     11  94.18%   52-53, 61-62, 69-71, 118-127, 400, 526
xonsh/shell.py                              94     12  87.23%   117, 174, 176, 179-183, 194, 204, 220-225
xonsh/completers/commands.py               114     15  86.84%   35, 38-40, 43-45, 88, 100, 157-160, 169, 172, 180
xonsh/completers/imports.py                129     15  88.37%   51, 104-105, 113, 121-126, 137-138, 155-156, 183, 189, 214
xonsh/completers/python.py                 124     16  87.10%   212-217, 234, 236, 245, 250-255, 274, 277-278
xonsh/procs/executables.py                  75     18  76.00%   44, 48-49, 64-74, 91-94, 130-131, 159-160
xonsh/xoreutils/util.py                     22     18  18.18%   7-12, 14-19, 23-34
xonsh/completer.py                         124     19  84.68%   53, 57-60, 188, 192, 197-204, 257-261, 270-271, 287-291, 299, 302
xonsh/completers/_aliases.py                70     19  72.86%   17, 77, 80-82, 89-93, 97, 126-133, 155, 165, 170
xonsh/prompt/gitstatus.py                  156     19  87.82%   78-91, 137, 146, 152, 157-160, 179, 187, 204, 206, 208, 220, 225-226, 228
xonsh/webconfig/tags.py                     94     19  79.79%   5, 32-36, 48-49, 52, 104-108, 114, 119-120, 127, 132-135
xonsh/lib/lazyimps.py                       61     23  62.30%   20, 28, 36, 43-46, 51-55, 60-64, 69-73, 78-82, 98
xonsh/codecache.py                         128     24  81.25%   59, 63, 100, 105-109, 114-118, 153-158, 202-206
xonsh/events.py                            140     24  82.86%   75, 83-84, 130, 142-144, 159, 184-185, 191-192, 220, 223-224, 244-245, 250-251, 283-286, 332
xonsh/xoreutils/echo.py                     27     24  11.11%   6-16, 20-32
xonsh/execer.py                            168     26  84.52%   138-148, 159, 174, 191, 207, 215-220, 224, 243-246, 280-283, 311-314
xonsh/parsers/context_check.py              69     26  62.32%   17, 20, 24, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51, 53, 55, 65-67, 78-80, 86-88, 93-94
xonsh/shells/ptk_shell/completer.py         86     27  68.60%   36, 74, 92, 116, 123-129, 133-151
xonsh/style_tools.py                       111     27  75.68%   35, 51, 55, 71-74, 78-79, 107-118, 149, 155, 158, 160, 164, 176-178
xonsh/xoreutils/tty.py                      32     28  12.50%   9-36
xonsh/main.py                              330     30  90.91%   121, 132-133, 276, 278-280, 353, 391, 394-395, 445-450, 472-473, 482, 487, 489, 494, 522, 556, 604, 618-619, 644-646, 696, 699
xonsh/xoreutils/which.py                   108     30  72.22%   61, 80-81, 89-93, 95, 107-118, 130-131, 138, 140, 142-145, 152-153, 168, 182, 185, 203-206
xonsh/parsers/completion_context.py        534     33  93.82%   73, 87, 92, 97, 102, 121, 148, 254, 299, 408-411, 414, 530-532, 781-784, 824, 929, 949, 964, 989-992, 1046-1047, 1053-1054, 1133
xonsh/xoreutils/cat.py                     100     33  67.00%   18, 26, 29-31, 33, 49, 51-52, 54-55, 80, 84-86, 94-110, 121, 161, 165
xonsh/prompt/cwd.py                         54     34  37.04%   14, 17-18, 29-38, 50-84
xonsh/xoreutils/tee.py                      37     35   5.41%   6-44
xonsh/parsers/v310.py                      243     36  85.19%   45-48, 82-85, 97-98, 115-116, 131-132, 217, 237-238, 267-268, 297, 334-335, 365-366, 445-446, 467-468, 486-487, 519-520, 532-533, 545-546
xonsh/imphooks.py                          156     37  76.28%   43, 47, 73, 100, 106-107, 117, 122, 227-229, 238, 243, 250-259, 288, 295-298, 302-305, 308-310, 325-332
xonsh/completers/completer.py               60     38  36.67%   26-42, 49-65, 86-93
xonsh/xontribs.py                          221     39  82.35%   19, 42, 46, 52, 58, 78, 93-96, 118, 125, 136, 143, 148, 156, 176, 182, 193, 212, 244, 247-252, 254-255, 279, 289-290, 309, 343-344, 351-355
xonsh/webconfig/main.py                    126     40  68.25%   35, 37-38, 71-73, 93, 118-124, 130-153, 157-161, 166-169, 174
xonsh/lib/openpy.py                         51     41  19.61%   36-52, 59-69, 88-92, 115-121, 128-133
xonsh/completers/tools.py                  138     43  68.84%   19-20, 29-30, 42, 51-52, 112-117, 132, 170, 179-189, 207, 221-232, 256-259, 266, 271-283
xonsh/webconfig/routes.py                  208     43  79.33%   36-38, 53-55, 102-109, 166-168, 177-179, 246, 251-252, 293, 297, 303, 313, 319-325, 334-335, 341, 349, 355-365, 371-372, 378
xonsh/ansi_colors.py                       332     45  86.45%   46-52, 86, 90-92, 105-112, 125, 159-160, 167, 185-194, 205-211, 250, 256, 294, 298-300, 352-357, 1151-1152
xonsh/parsers/rd_parser.py                  45     45   0.00%   1-78
xonsh/cli_utils.py                         341     50  85.34%   120, 125-127, 172, 233-236, 239-242, 245, 248-250, 253-256, 259-262, 265-275, 278-281, 293, 453, 481, 502-503, 515-516, 535-536, 539, 562, 581-582, 625-628, 632, 636, 662-663
xonsh/history/sqlite.py                    278     52  81.29%   131-132, 139-145, 156, 158, 170, 188-190, 222, 253-262, 284, 289-293, 295, 305, 327-328, 370-371, 385-395, 399-400, 408, 422-425, 440
xonsh/pytest/tools.py                       89     52  41.57%   3-55, 61, 65-73, 77-84, 90-94, 97, 106, 140, 144, 148
xonsh/completers/man.py                     95     56  41.05%   19, 37, 44-112, 119, 121-122, 138
xonsh/parsers/ast.py                       347     58  83.29%   152, 198, 201-218, 235, 356, 469, 484-487, 491, 515, 542, 546, 574, 576-580, 597, 661, 674-694, 699, 709
xonsh/built_ins.py                         463     62  86.61%   115-121, 171-172, 175, 254, 279, 287-290, 318, 359, 379-380, 406, 410, 440, 477-480, 509-511, 530-532, 540, 554-558, 561-565, 569-573, 577, 581, 585, 589, 593-595, 655, 660, 715, 732-733, 780, 836, 839, 842, 845, 848, 854
xonsh/tracer.py                            125     68  45.60%   49-50, 62-70, 74-82, 86-104, 121-126, 141-146, 159, 170-184, 194-212
xonsh/completers/path.py                   273     69  74.73%   18, 31-32, 56-60, 76-77, 79-80, 98, 100, 102, 107-109, 113, 122, 125, 127, 129, 136-145, 149-154, 160-161, 184, 193, 208, 210, 212, 214, 224, 236-240, 254-257, 261-268, 277-279, 300, 337-338, 340, 343-344, 362
xonsh/commands_cache.py                    326     73  77.61%   71, 84, 92, 98-108, 114, 119-120, 178-179, 186, 189-190, 194, 224-234, 239, 281-283, 440, 453-463, 477, 479-483, 487-488, 501-505, 519-520, 560-565, 576-578, 583-588, 596-600, 608-613
xonsh/prompt/base.py                       286     77  73.08%   15-17, 22, 51-53, 122-123, 144, 150, 181, 186-228, 233-244, 283-289, 294, 378, 397-401, 438, 444, 447, 505
xonsh/shells/ptk_shell/updator.py          103     78  24.27%   19-25, 28-31, 43-47, 64-73, 88-116, 122-136, 140-142, 152-154, 161-167, 171-179, 182-184, 188-199, 202-205, 208-209
xonsh/lib/lazyasd.py                       184     79  57.07%   72-73, 76-77, 84-85, 88-89, 96-97, 100-101, 104-105, 112-113, 116, 119, 185-186, 189-193, 199, 204, 259, 262-280, 287-292, 298-316, 348-359
xonsh/xoreutils/umask.py                   106     83  21.70%   11, 29-31, 35, 42-44, 48-51, 59-65, 69-70, 80-83, 89-111, 115-118, 122-165, 179-181
xonsh/prompt/vc.py                         186     85  54.30%   41-43, 62-64, 72, 75-76, 78-79, 101-126, 130-132, 140-147, 155-159, 184, 186, 188, 190-191, 206-208, 226-227, 234-255, 262-269, 279, 281, 283, 295-298, 306-313
xonsh/pytest/plugin.py                     219     91  58.45%   6-29, 33, 40, 48-52, 57-58, 71-72, 77, 80, 87, 91-99, 104-105, 113-114, 122-123, 133-146, 153-154, 163-164, 171-172, 189-190, 194-195, 201-202, 211-212, 225-226, 246, 288-289, 294-295, 300-301, 306-307, 311-312, 316-317, 349, 354, 361-362, 376-377, 392-393, 408
xonsh/shells/ptk_shell/__init__.py         364     91  75.00%   45, 94, 100, 142-144, 156-162, 192, 201, 233, 253-256, 262-275, 278-283, 306, 318-319, 324, 328, 333, 368, 389, 397-400, 406, 420-427, 434, 449-450, 476, 482, 492, 501-502, 509-513, 521, 523, 531, 542-549, 551-552, 558-579, 589-591, 595-599, 626, 630
xonsh/procs/posix.py                       328     92  71.95%   64-67, 96, 146-151, 174-177, 193-197, 202, 204, 213-214, 223, 260-278, 285, 287, 301-302, 316, 326-330, 339-341, 349-351, 360, 365, 368-370, 376, 379-384, 394-395, 404, 411-428, 433-440, 487, 499-500, 502, 505-507, 512, 516
xonsh/history/main.py                      254     96  62.20%   25-31, 45-49, 53-59, 71-73, 87-90, 95, 106-112, 129-143, 151-153, 192-200, 284-286, 292-294, 303-305, 312, 317-320, 335-348, 354-357, 392-394, 399-402, 416-424, 443-444, 498-509
xonsh/parsers/fstring_adaptor.py           114     98  14.04%   13, 18, 38-43, 50-85, 89-108, 113-132, 137-187, 191-197
xonsh/xoreutils/_which.py                  157    100  36.31%   111-124, 130, 147-149, 152-153, 155-156, 189, 195-205, 208, 216-219, 230, 240-243, 249-251, 272-279, 299-302, 309-366, 370
xonsh/shells/ptk_shell/key_bindings.py     248    107  56.85%   79, 83, 102-103, 114-116, 122, 130-133, 143-147, 164-170, 183-184, 195-196, 204-213, 236-254, 262-263, 268-272, 277, 282-287, 292-300, 304-309, 318-328, 336-345, 350-352, 365, 370, 375-376, 383-386, 391-394, 399, 406, 411-412, 417-418, 423-426, 446-451
xonsh/procs/pipelines.py                   551    108  80.40%   44-60, 69-70, 78-79, 85, 211, 214, 224-228, 239, 278, 280-283, 305-307, 309-310, 318-320, 334, 341-345, 366-370, 397, 403, 405, 424, 426, 436, 464, 504, 508-515, 518-522, 537-544, 559, 572, 615-622, 640, 642, 658, 663, 668, 673, 684-689, 701, 706-707, 712-713, 718-719, 724-725, 748, 758-761, 766-769, 774-777, 836-837, 875-878, 887-891
xonsh/procs/readers.py                     217    109  49.77%   35, 105, 114-118, 169-181, 199-209, 215-221, 268-360, 382-394
xonsh/pygments_cache.py                    251    111  55.78%   22, 33-39, 110-112, 128-129, 135, 152-154, 163, 170-171, 182-183, 190, 204-206, 212-213, 219, 233-235, 242-243, 249, 267, 295-299, 320, 325, 328, 342-364, 375-397, 404-424, 432, 448-450, 468-488
xonsh/xoreutils/ulimit.py                  127    112  11.81%   122-137, 142-151, 156-167, 172-175, 180-181, 186-187, 192-250, 255-285, 301-319
xonsh/timings.py                           186    115  38.17%   29-32, 45-55, 60-70, 85, 91-105, 110-141, 160-168, 184-243, 269, 274, 284, 289, 299, 304, 309, 314, 319, 324-340
xonsh/environ.py                           866    116  86.61%   157, 186-188, 388, 394, 468-470, 481, 486, 492-498, 500, 509-516, 609, 623, 655, 711, 844-846, 850-853, 857-862, 2058-2060, 2068-2069, 2082, 2090, 2098, 2102, 2117-2120, 2127-2129, 2133, 2140, 2147, 2180-2182, 2198-2200, 2211, 2230-2239, 2326-2333, 2350, 2352-2353, 2398, 2401, 2407-2413, 2469, 2497-2499, 2556-2557, 2565-2566, 2584, 2633-2644, 2649-2650, 2666, 2673-2674, 2679, 2712
xonsh/history/json.py                      438    117  73.29%   16, 118-120, 170-192, 224, 228, 239-251, 265, 277-278, 283-288, 304-305, 404, 410, 427, 488, 490-491, 557, 597, 614-616, 619-624, 633-643, 647-648, 653-666, 669-672, 692-728
xonsh/xoreutils/uptime.py                  158    118  25.32%   28-40, 50-56, 61-64, 69-72, 78-100, 105-110, 118-128, 133-187, 192-195, 203-214, 219-224, 230, 232, 236-250, 265, 270-272, 276
xonsh/shells/base_shell.py                 367    119  67.57%   34-37, 80, 84-85, 89-90, 94-96, 102, 104, 109, 141, 155, 160, 165, 185, 188, 190, 202, 206-207, 211-212, 216, 222-225, 231-234, 238-240, 282, 339, 348, 357-358, 364-365, 397-399, 402-405, 428, 452, 463-464, 467-479, 482, 496, 507-512, 515-516, 527, 529-543, 564-575, 582-599, 625, 630, 634, 641
xonsh/foreign_shells.py                    269    130  51.67%   80, 202, 227, 229, 234-237, 239, 252-255, 258, 292, 313, 336-349, 366-382, 405-409, 412, 418-420, 425-442, 445, 455-459, 484-487, 490-492, 522-525, 528-530, 535, 555-610, 627-633, 650-666
xonsh/history/diff_history.py              207    132  36.23%   18-36, 40, 44, 49-73, 104, 111-116, 132-141, 144-153, 159-178, 181-192, 201-211, 215, 219-236, 249-258, 260-261, 263-264, 269-284, 287, 294, 297
xonsh/pyghooks.py                          617    137  77.80%   112-130, 165, 170, 224, 242-243, 256, 266-277, 281-315, 331-333, 347, 353, 386-392, 402-403, 418, 422, 429, 436-445, 454, 465, 474, 583, 1324-1340, 1359, 1392-1396, 1424, 1426, 1430, 1437, 1449, 1451, 1453, 1455, 1457, 1461, 1463, 1465, 1467, 1569-1578, 1607-1608, 1650-1651
xonsh/lib/pretty.py                        469    141  69.94%   112-113, 123, 153-157, 162-166, 197, 280-283, 309-316, 377, 389, 396-398, 418-419, 425, 520-545, 562, 565, 575, 587-617, 636, 639, 656-661, 669-670, 690, 703-704, 712-716, 721, 745-755, 785-786, 806-810, 819, 839-847, 851-856, 860-865, 869-874
xonsh/completers/bash_completion.py        206    155  24.76%   24-31, 37-62, 67-71, 78-99, 108-110, 113, 121-124, 132-139, 148-154, 158-163, 167-203, 347, 359-367, 382, 390-392, 401-437, 459-475, 480-500, 504
xonsh/dirstack.py                          292    156  46.58%   25-29, 33-40, 53-71, 76, 99-115, 130-138, 164, 171, 173, 200, 215-216, 224-227, 229-241, 245, 255, 257, 259, 266, 278, 320-321, 327-331, 335-360, 363, 372, 409-410, 419-448, 458-459, 464, 501-502, 508-509, 512, 518-523, 525, 530-552
xonsh/lib/inspectors.py                    381    157  58.79%   98, 100, 125-126, 132-135, 159, 162-164, 198, 226-251, 272, 286-287, 308-323, 341-342, 346-350, 358-372, 383-403, 408-414, 418-436, 448-459, 505, 554, 598-600, 603-611, 615, 624, 626, 634-635, 643-644, 648-649, 652, 669, 671, 688-690, 697-698, 709-710, 738-739, 746, 754-755, 757, 761-773, 785, 790-792, 800
xonsh/platform.py                          342    165  51.75%   30-33, 79, 85, 101, 115, 147, 157, 175, 184, 198-205, 210-211, 219, 222, 237, 268, 279-285, 310-317, 341-348, 360-367, 375-402, 411-462, 473, 481, 483, 496-514, 522, 542-553, 564-621
xonsh/parsers/v313.py                      166    166   0.00%   11-264
xonsh/procs/proxies.py                     439    166  62.19%   31-36, 44-45, 53-56, 59-62, 65, 91, 115, 135, 140, 145, 154, 158, 162, 166, 170, 174, 184-185, 191, 199, 204, 208, 218, 222, 226, 230, 234, 238, 282-283, 368-373, 376-378, 385-387, 390-392, 414, 426-431, 440, 484-498, 515, 550-567, 576-577, 579, 584-586, 590-668, 683, 685, 690, 695, 697, 707, 709, 711, 713, 758, 765, 774-778, 811-821, 827
xonsh/procs/specs.py                       681    168  75.33%   42-49, 62-68, 72-80, 91-97, 103, 110-112, 119, 125, 127-130, 180-185, 190-197, 205-215, 218, 220, 227, 244, 247-252, 269, 276-277, 295, 299, 427-431, 434-438, 452-458, 468-474, 484-490, 493, 527, 532-533, 537-548, 567, 573, 584-585, 599, 617-618, 624-625, 627-628, 715, 720-722, 740, 766-767, 786-788, 832, 834, 836, 838, 864, 912-914, 916-918, 936-937, 939-940, 962, 973-1012, 1043, 1068, 1101, 1156
xonsh/aliases.py                           466    176  62.23%   157-158, 188-189, 195-202, 253-260, 272-273, 343, 346, 349, 404-406, 411-412, 415, 422-427, 434-435, 442-443, 450-451, 458-459, 466-467, 474-475, 489-490, 510-526, 572, 587, 657-731, 767-773, 776, 794-803, 853-862, 943-944, 970-975, 993-996, 1004, 1014, 1017, 1023, 1029-1031, 1041-1042, 1097-1143, 1145, 1147-1150, 1152-1154, 1156
xonsh/procs/jobs.py                        356    181  49.16%   69, 78, 91-93, 100-105, 108-111, 130-138, 165-175, 178, 182-190, 200-201, 208-239, 244-245, 248, 273-292, 306, 310, 314, 320, 327, 348-351, 361-370, 409-410, 422-425, 463-466, 479-514, 537-541, 548-581, 595, 605-611, 643-671
xonsh/parsers/base.py                     1614    201  87.55%   80, 98, 127-134, 140, 152, 158, 178-185, 206, 504, 519, 561-564, 643-644, 646-651, 702-704, 709, 837-849, 870-880, 888, 895-899, 904-907, 912-916, 921-925, 930-934, 939-943, 947-952, 957-962, 967-977, 1013, 1052, 1056, 1062-1066, 1071-1075, 1080-1084, 1089-1093, 1098-1103, 1108-1113, 1117-1127, 1229, 1247, 1259, 1409-1410, 1456, 1491, 1503-1504, 1566, 1904-1917, 1921, 2035-2036, 2047, 2196, 2286, 2305, 2330-2335, 2514-2515, 2517-2522, 2542-2543, 2545-2550, 2606, 2706-2707, 2824-2836, 2844-2845, 3082, 3118, 3120, 3142, 3153-3157, 3191-3200, 3248, 3317-3322, 3326-3327, 3331-3332, 3348-3349, 3353-3354, 3358-3372, 3401, 3409-3410, 3417-3418, 3595-3597, 3608
xonsh/parsers/tokenize.py                  529    205  61.25%   119-121, 239-240, 248-251, 625-628, 631-642, 645-679, 682-715, 738-742, 748-755, 786-787, 795-799, 804-824, 828-830, 836, 846, 855-864, 883, 888-889, 936, 974, 981-983, 988-990, 1021-1022, 1028, 1033-1034, 1071-1078, 1094-1104, 1116, 1125-1126, 1135-1136, 1183, 1187-1251
xonsh/platforms/winutils.py                205    205   0.00%   24-549
xonsh/wizard.py                            470    219  53.40%   158-162, 186-187, 194, 207, 231-245, 284, 292, 400, 428-434, 459, 466-469, 485-495, 500-503, 511, 523, 531, 533, 539-550, 553-557, 560-574, 580, 587-588, 597, 599, 603, 637-647, 661, 666-668, 716-719, 722-723, 726, 729, 732-737, 740-773, 776-788, 791-813, 816-833, 837-867
xonsh/shells/readline_shell.py             438    235  46.35%   52, 86-92, 105-107, 112-114, 117-118, 133-134, 158, 165, 169-171, 187-188, 194-202, 212-225, 232-234, 242-246, 253, 259-269, 275-286, 292-296, 387-400, 412-445, 449-491, 497-505, 513-514, 516-534, 552-554, 556-557, 560, 562, 568-569, 571-585, 589, 593, 605, 609-614, 620-626, 637-643, 650-651, 671-677, 682, 686-687, 694-707, 724-725, 728, 734-735
xonsh/xonfig.py                            367    246  32.97%   150-186, 190-194, 198, 203, 215-269, 274-277, 291-296, 301-331, 335-342, 347-348, 356, 361-379, 384, 400-439, 455-478, 487, 495-496, 506-508, 525-526, 544, 558-559, 592-606, 610-624, 628-650, 667-687, 692-694, 709-711, 722, 734, 744, 749-758, 763, 824-841
xonsh/tools.py                            1482    319  78.48%   54-55, 88, 129-131, 190-191, 221, 245, 263-264, 283-291, 300, 347, 432, 470, 472, 513, 524, 547-548, 550, 585, 596, 608-610, 713-714, 718-719, 724, 762-773, 781, 791-794, 848, 857-865, 876, 888, 891, 899, 903, 925, 944-945, 965, 970-975, 982-983, 1030, 1042, 1064-1065, 1120, 1234-1240, 1315, 1340, 1342, 1398, 1489-1492, 1525, 1530-1531, 1543, 1545, 1704, 1709, 1714, 1721-1743, 1748, 1755, 1757, 1759, 1762, 1765-1768, 1773, 1775, 1777-1780, 1782, 1785, 1845, 1869-1877, 1882-1889, 1896, 1975-1982, 2043-2052, 2071-2078, 2087, 2093, 2098, 2103, 2146-2158, 2163-2167, 2172-2184, 2220-2238, 2246, 2265-2285, 2290-2298, 2305-2319, 2328, 2338-2361, 2429, 2431, 2435-2446, 2560-2566, 2571, 2594-2596, 2641-2642, 2665-2667, 2680-2682, 2703-2704, 2712-2751, 2771-2772, 2851-2857, 2864, 2870-2881
-----------------------------------------------------------------------
TOTAL                                    24199   7472  69.12%

20 files skipped due to complete coverage.
Coverage XML written to file coverage.xml
Required test coverage of 60.0% reached. Total coverage: 69.12%
=========================== short test summary info ============================
FAILED tests/api/test_os.xsh::test_rmtree
FAILED tests/aliases/test_source.py::test_source_current_dir - FileNotFoundEr...
FAILED tests/built_ins/test_tracer.py::test_trace_in_script - assert 1 == 0
FAILED tests/completers/test_dir_completers.py::test_non_dir[cd] - FileNotFou...
FAILED tests/completers/test_dir_completers.py::test_non_dir[rmdir] - FileNot...
FAILED tests/completers/test_dir_completers.py::test_complete_dots - Assertio...
FAILED tests/completers/test_pip_completer.py::test_completions[pip-c-exp0]
FAILED tests/completers/test_pip_completer.py::test_completions[pip show--pip_installed]
FAILED tests/history/test_history_json.py::test_hist_pull[None] - FileNotFoun...
FAILED tests/history/test_history_json.py::test_hist_pull[e2265764-041c-4c57-acba-49d4e4f676e5]
FAILED tests/history/test_history_json.py::test_hist_pull_mixed - FileNotFoun...
FAILED tests/procs/test_executables.py::test_get_paths - FileNotFoundError: [...
FAILED tests/procs/test_executables.py::test_locate_executable - FileNotFound...
FAILED tests/test_builtins.py::test_repath_backslash - AssertionError: assert...
FAILED tests/test_commands_cache.py::Test_is_only_functional_alias::test_bash_and_is_alias_is_only_functional_alias
FAILED tests/test_integrations.py::test_script[case11] - assert ' 1  2 9 <std...
FAILED tests/test_integrations.py::test_script[case12] - assert ' 1  4 16 <st...
FAILED tests/test_integrations.py::test_script[case20] - assert 'Just the pla...
FAILED tests/test_integrations.py::test_script[case31] - assert 'eert\ntwo\nt...
FAILED tests/test_integrations.py::test_script[case32] - assert 'tree\ntwo\nt...
FAILED tests/test_integrations.py::test_argv0 - AssertionError: xonsh: To log...
FAILED tests/test_integrations.py::test_suspended_captured_process_pipeline
FAILED tests/test_man.py::test_man_completion[yes-exp0] - FileNotFoundError: ...
FAILED tests/test_man.py::test_man_completion[man-exp1] - FileNotFoundError: ...
ERROR tests/completers/test_bash_completer.py::test_bash_completer[command_context0-completions0-5]
ERROR tests/completers/test_bash_completer.py::test_bash_completer[command_context1-completions1-0]
ERROR tests/completers/test_bash_completer.py::test_bash_completer[command_context2-completions2-2]
ERROR tests/completers/test_bash_completer.py::test_bash_completer[command_context3-completions3-1]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context0-completions0-4]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context1-completions1-5]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context2-completions2-5]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context3-completions3-6]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context4-completions4-10]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context5-completions5-4]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context6-completions6-5]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context7-completions7-5]
ERROR tests/completers/test_bash_completer.py::test_quote_handling[command_context8-completions8-6]
ERROR tests/completers/test_bash_completer.py::test_bash_completer_empty_prefix
ERROR tests/completers/test_bash_completer.py::test_equal_sign_arg[command_context0-completions0-3-False]
ERROR tests/completers/test_bash_completer.py::test_equal_sign_arg[command_context1-completions1-3-True]
ERROR tests/completers/test_bash_completer.py::test_equal_sign_arg[command_context2-completions2-2-True]
ERROR tests/completers/test_bash_completer.py::test_equal_sign_arg[command_context3-completions3-3-False]
ERROR tests/completers/test_bash_completer.py::test_equal_sign_arg[command_context4-completions4-8-True]
ERROR tests/completers/test_bash_completer.py::test_git_delete_remote_branch
ERROR tests/completers/test_dir_completers.py::test_dirs_only[cd] - FileNotFo...
ERROR tests/completers/test_dir_completers.py::test_dirs_only[rmdir] - FileNo...
ERROR tests/completers/test_dir_completers.py::test_opening_quotes[cd] - File...
ERROR tests/completers/test_dir_completers.py::test_opening_quotes[rmdir] - F...
ERROR tests/completers/test_dir_completers.py::test_closing_quotes[cd] - File...
ERROR tests/completers/test_dir_completers.py::test_closing_quotes[rmdir] - F...
= 24 failed, 4988 passed, 130 skipped, 17 xfailed, 3 warnings, 26 errors, 20 rerun in 222.28s (0:03:42) =
Failed with Command '['pytest', '--timeout=240', '--cov', '--cov-report=xml', '--cov-report=term']' returned non-zero exit status 1.
