Locking  dependencies...
Building requirements...
Resolving dependencies...
✔ Success!
Locking  dependencies...
Building requirements...
Resolving dependencies...
✔ Success!
Updated Pipfile.lock
(a6a9a667211f815c4ba955c02f1cb8e120425cd8a0889c9f9d303b8ea5442429)!
To activate this project's virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
Installing dependencies from Pipfile.lock (442429)...
Installing dependencies from Pipfile.lock (442429)...
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.4.1, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: timeout-2.4.0, cov-4.1.0, flaky-3.8.1, xdist-3.8.0
collected 412 items

tests/integration/test_cli.py .......FsssF......s.....                   [  5%]
tests/integration/test_dot_venv.py ......................                [ 11%]
tests/integration/test_import_requirements.py .....                      [ 12%]
tests/integration/test_install_basic.py F......F......F.F..F......FFFF.s [ 20%]
......                                                                   [ 21%]
tests/integration/test_install_categories.py F.FF..                      [ 23%]
tests/integration/test_install_markers.py .F..F...                       [ 25%]
tests/integration/test_install_misc.py F....                             [ 26%]
tests/integration/test_install_nested_setup.py .                         [ 26%]
tests/integration/test_install_paths.py .                                [ 26%]
tests/integration/test_install_twists.py ...s.sF.FF.F..F.                [ 30%]
tests/integration/test_install_uri.py ..F.FF.FFFF                        [ 33%]
tests/integration/test_install_vcs.py ...F.                              [ 34%]
tests/integration/test_lock.py F..F.F.....FFFFF..F.F.F.FFF..             [ 41%]
tests/integration/test_lockfile.py ..                                    [ 41%]
tests/integration/test_pipenv.py .F..                                    [ 42%]
tests/integration/test_project.py .F......                               [ 44%]
tests/integration/test_python_version_mismatch.py ..                     [ 45%]
tests/integration/test_requirements.py ............                      [ 48%]
tests/integration/test_run.py ........                                   [ 50%]
tests/integration/test_sync.py .F.                                       [ 50%]
tests/integration/test_uninstall.py .FFFF..F......                       [ 54%]
tests/integration/test_update.py FF..........                            [ 57%]
tests/integration/test_upgrade.py .....                                  [ 58%]
tests/integration/test_upgrade_cleanup.py .                              [ 58%]
tests/integration/test_windows.py sssss                                  [ 59%]
tests/unit/test_cmdparse.py .......                                      [ 61%]
tests/unit/test_core.py ....                                             [ 62%]
tests/unit/test_dependencies.py ..                                       [ 63%]
tests/unit/test_environments.py .............                            [ 66%]
tests/unit/test_funktools.py ........                                    [ 68%]
tests/unit/test_help.py .                                                [ 68%]
tests/unit/test_utils.py ............................................... [ 79%]
....................ssssss........................s.                     [ 92%]
tests/unit/test_utils_windows_executable.py ss                           [ 92%]
tests/unit/test_vcs.py ......................                            [ 98%]
tests/unit/test_vendor.py .......                                        [100%]

=================================== FAILURES ===================================
__________________________ test_pipenv_graph_reverse ___________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec55970d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    def test_pipenv_graph_reverse(pipenv_instance_private_pypi):
        from pipenv.cli import cli
        from pipenv.vendor.click.testing import CliRunner

        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install tablib==0.13.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install tablib==0.13.0', returncode=1, stdout='Installing tablib==0.13.0...\nInstallatio... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_cli.py:108: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install tablib==0.13.0
Installing tablib==0.13.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-a1xa_9_a-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 231ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-a1xa_9_a-tests-dwEkvIAa
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-a1xa_9_a-tests-dwEkvIAa
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading tablib==0.13.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf0653f400>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf0653feb0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf0653e8f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf0653ff70>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf0653d750>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement tablib==0.13.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for tablib==0.13.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_pipenv_clean _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec546eec0>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    @pytest.mark.skipif(
        sys.version_info[:2] == (3, 8) and os.name == "nt",
        reason="This test is not working om Windows Python 3. 8",
    )
    def test_pipenv_clean(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open("setup.py", "w") as f:
                f.write('from setuptools import setup; setup(name="empty")')
            c = p.pipenv("install -e .")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e .', returncode=1, stdout='Installing -e ....\nInstallation Succeeded\nInstall... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_cli.py:208: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e .
Installing -e ....
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-wny8ivbc-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 219ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-wny8ivbc-tests-dpGYkn0Q
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-wny8ivbc-tests-dpGYkn0Q
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e . in  dependencies.
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_basic_install ______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5c55d80>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_basic_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six -v")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six -v', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six -v
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Running command: $
/root/.local/share/virtualenvs/pipenv-44m191z6-tests-oq_rd72q/bin/python
/app/pipenv/vendor/pipdeptree -l --reverse --json-tree
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.network.session:adding trusted host:
'localhost:8080' (from line 2 of
/tmp/pipenv-pdcdjqk7-requirements/pipenv-3hav27i3-constraints.txt)
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('six'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f49d5f22680>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f49d5810250>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f49d5810d30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f49d5810dc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f49d5812200>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('six')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('six'), parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for six
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
six
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-44m191z6-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 234ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-44m191z6-tests-oq_rd72q
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-44m191z6-tests-oq_rd72q
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Command output: [
    {
        "key": "pip",
        "package_name": "pip",
        "installed_version": "25.2",
        "required_version": "25.2",
        "dependencies": []
    },
    {
        "key": "setuptools",
        "package_name": "setuptools",
        "installed_version": "80.9.0",
        "required_version": "80.9.0",
        "dependencies": []
    }
]

Upgrading six in  dependencies.
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_extras_install ______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5979d20>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.extras
    @pytest.mark.install
    def test_extras_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install requests[socks]")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install requests[socks]', returncode=1, stdout='Installing requests...\nInstallation Suc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:135: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install requests[socks]
Installing requests...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-m3b16op3-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 247ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-m3b16op3-tests-V9_3TqIe
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-m3b16op3-tests-V9_3TqIe
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading requests in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc497ea6e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc49700cd0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc497e9b10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc497eabc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc497ea740>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________ test_skip_requirements_when_pipfile ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5c37400>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    @pytest.mark.requirements
    def test_skip_requirements_when_pipfile(pipenv_instance_private_pypi):
        """Ensure requirements.txt is NOT imported when

        1. We do `pipenv install [package]`
        2. A Pipfile already exists when we run `pipenv install`.
        """
        with pipenv_instance_private_pypi() as p:
            with open("requirements.txt", "w") as f:
                f.write("requests==2.18.1\n")
            c = p.pipenv("install six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstallin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:276: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-b7wxkobn-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 238ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-b7wxkobn-tests-jYyRpPEC
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-b7wxkobn-tests-jYyRpPEC
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4f3a4c1540>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4f3a4c2530>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4f3a4c3d90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4f3a4c1810>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4f3a4c2c80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_install_does_not_extrapolate_environ ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec66ec220>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_install_does_not_extrapolate_environ(pipenv_instance_private_pypi):
        """Ensure environment variables are not expanded in lock file."""
        with temp_environ(), pipenv_instance_private_pypi() as p:
            os.environ["PYPI_URL"] = p.pypi

            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [[source]]
    url = '${PYPI_URL}/simple'
    verify_ssl = true
    name = 'mockpi'
                """
                )

            # Ensure simple install does not extrapolate.
            c = p.pipenv("install -v")
            assert c.returncode == 0
            assert p.pipfile["source"][0]["url"] == "${PYPI_URL}/simple"
            assert p.lockfile["_meta"]["sources"][0]["url"] == "${PYPI_URL}/simple"

            # Ensure package install does not extrapolate.
            c = p.pipenv("install six -v")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six -v', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:324: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six -v
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (eddaee)...
All dependencies are now up-to-date!
Running command: $
/root/.local/share/virtualenvs/pipenv-3dv8tyrs-tests-vj1y_hQc/bin/python
/app/pipenv/vendor/pipdeptree -l --reverse --json-tree
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('six'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f23512036a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2351202c20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f23512036d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f23516a2350>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f23516a2ef0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('six')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('six'), parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for six
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
six
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Command output: [
    {
        "key": "pip",
        "package_name": "pip",
        "installed_version": "25.2",
        "required_version": "25.2",
        "dependencies": []
    },
    {
        "key": "setuptools",
        "package_name": "setuptools",
        "installed_version": "80.9.0",
        "required_version": "80.9.0",
        "dependencies": []
    }
]

Upgrading six in  dependencies.
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_system_and_deploy_work __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec53cf430>, index_url='http://localhost:8080/simple')

    @pytest.mark.cli
    @pytest.mark.deploy
    @pytest.mark.system
    def test_system_and_deploy_work(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install urllib3")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install urllib3', returncode=1, stdout='Installing urllib3...\nInstallation Succeeded\nI... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:371: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install urllib3
Installing urllib3...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ki0k9830-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 255ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ki0k9830-tests-zx00ZuDR
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ki0k9830-tests-zx00ZuDR
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading urllib3 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f98a3e9ae30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f98a3e9b7c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f98a3e9ad10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f98a3e9a110>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f98a3e9ada0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/urllib3/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement urllib3 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for urllib3

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_install_package_with_dots ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec55928c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_install_package_with_dots(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install backports.html")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install backports.html', returncode=1, stdout='Installing backports.html...\nInstallatio... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:500: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install backports.html
Installing backports.html...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-qwlq61d9-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 240ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-qwlq61d9-tests-RYGzTqg7
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-qwlq61d9-tests-RYGzTqg7
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading backports.html in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7c20f578e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7c20f55ae0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7c20f54e50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7c20f57a30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f7c20f55d20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/backports-html/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement backports.html (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for backports.html

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________________ test_rewrite_outline_table __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5271b10>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_rewrite_outline_table(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = false
    name = "testindex"

    [packages]
    six = {}

    [packages.requests]
    version = "*"
    extras = ["socks"]
                """.format(
                    p.index_url, '{version = "*"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install colorama")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install colorama', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:526: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install colorama
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-iyc1ssz6-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 240ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-iyc1ssz6-tests-7Kz3S1op
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-iyc1ssz6-tests-7Kz3S1op
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc915d3a6b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc916809090>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc916338fa0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc916339480>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc9163388b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_rewrite_outline_table_ooo ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5c3ab60>, index_url='http://localhost:8080/simple')

    @pytest.mark.basic
    @pytest.mark.install
    def test_rewrite_outline_table_ooo(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = false
    name = "testindex"

    [packages]
    six = {}

    # Out-of-order
    [pipenv]
    allow_prereleases = false

    [packages.requests]
    version = "*"
    extras = ["socks"]
                """.format(
                    p.index_url, '{version = "*"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install colorama")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install colorama', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:561: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install colorama
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-7jx5fahy-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 251ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-7jx5fahy-tests-ylxJ2EKk
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-7jx5fahy-tests-ylxJ2EKk
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa1b2ded840>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa1b2dbe650>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa1b2dbeb30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa1b2dbc760>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fa1b2dbc340>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________ test_install_dev_use_default_constraints ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5c3add0>, index_url='http://localhost:8080/simple')

    @pytest.mark.dev
    @pytest.mark.install
    def test_install_dev_use_default_constraints(pipenv_instance_private_pypi):
        # See https://github.com/pypa/pipenv/issues/4371
        # See https://github.com/pypa/pipenv/issues/2987
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install requests==2.14.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install requests==2.14.0', returncode=1, stdout='Installing requests==2.14.0...\nInstall... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_basic.py:577: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install requests==2.14.0
Installing requests==2.14.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-sktt7fds-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 246ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-sktt7fds-tests-ZMpeidC2
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-sktt7fds-tests-ZMpeidC2
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading requests==2.14.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f38c5bfc8b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f38c5bff160>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f38c5bfe170>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f38c5bff820>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f38c5bfdf90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests==2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests==2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_basic_category_install __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5b72f80>, index_url='http://localhost:8080/simple')

    @pytest.mark.categories
    @pytest.mark.install
    def test_basic_category_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six --categories prereq")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories prereq', returncode=1, stdout='Installing six...\nInstallation ... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:12: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories prereq
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-4r6u2btd-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 217ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-4r6u2btd-tests-bnN3io9M
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-4r6u2btd-tests-bnN3io9M
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faaed5a16c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faaed26a320>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faaed26a500>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faaed5a1780>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faaed3e16f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_multiple_category_install[prereq other] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5b73c40>, index_url='http://localhost:8080/simple')
categories = 'prereq other'

    @pytest.mark.categories
    @pytest.mark.install
    @pytest.mark.parametrize("categories", ["prereq other", "prereq, other"])
    def test_multiple_category_install(pipenv_instance_private_pypi, categories):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv('install six --categories="prereq other"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories="prereq other"', returncode=1, stdout='Installing six...\nInsta... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories="prereq other"
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-zkm9ohwl-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 233ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-zkm9ohwl-tests-t21BXifl
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-zkm9ohwl-tests-t21BXifl
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4e0cf983d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4e0cf0a7d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4e0cf9aad0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4e0cf99bd0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4e0cf98520>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________ test_multiple_category_install[prereq, other] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5750a90>, index_url='http://localhost:8080/simple')
categories = 'prereq, other'

    @pytest.mark.categories
    @pytest.mark.install
    @pytest.mark.parametrize("categories", ["prereq other", "prereq, other"])
    def test_multiple_category_install(pipenv_instance_private_pypi, categories):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv('install six --categories="prereq other"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --categories="prereq other"', returncode=1, stdout='Installing six...\nInsta... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_categories.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --categories="prereq other"
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-t792zbzy-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 242ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-t792zbzy-tests-nVjtkp4t
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-t792zbzy-tests-nVjtkp4t
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84bb334070>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84bb4a12a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84bb3348e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84bb334640>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f84bb3367d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_platform_python_implementation_marker __________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5751510>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.markers
    def test_platform_python_implementation_marker(pipenv_instance_private_pypi):
        """Markers should be converted during locking to help users who input this
        incorrectly.
        """
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install depends-on-marked-package")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_markers.py:49: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install depends-on-marked-package
Installing depends-on-marked-package...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-y3jj5m58-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 224ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-y3jj5m58-tests-tA8ofl6h
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-y3jj5m58-tests-tA8ofl6h
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading depends-on-marked-package in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f59e2177250>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f59e2176e30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f59e2127e50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f59e2175c90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f59e283f190>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement depends-on-marked-package (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for depends-on-marked-package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv install depends-on-marked-package
Installing depends-on-marked-package...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-q03y20un-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 241ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-q03y20un-tests-Z4yBCaIk
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-q03y20un-tests-Z4yBCaIk
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading depends-on-marked-package in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f873c633280>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f873c630ee0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f873c631750>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f873c6315a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f873c9b8d30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/depends-on-marked-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement depends-on-marked-package (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for depends-on-marked-package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________________ test_global_overrides_environment_markers ___________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec53cd0c0>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.markers
    @pytest.mark.install
    def test_global_overrides_environment_markers(pipenv_instance_private_pypi):
        """Empty (unconditional) dependency should take precedence.
        If a dependency is specified without environment markers, it should
        override dependencies with environment markers. In this example,
        APScheduler requires funcsigs only on Python 2, but since funcsigs is
        also specified as an unconditional dep, its markers should be empty.
        """
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    apscheduler = "*"
    funcsigs = "*"
                """.strip()
                f.write(contents)

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_markers.py:130: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-bd5kmalx-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 254ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-bd5kmalx-tests-uEMzvNPw
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-bd5kmalx-tests-uEMzvNPw
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f99da6d1330>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f99d9fea890>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f99d9df3c40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f99da657a60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f99da655a50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/apscheduler/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement apscheduler (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for apscheduler

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-qi86hqtv-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 232ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-qi86hqtv-tests-OKq-6CHd
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-qi86hqtv-tests-OKq-6CHd
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc126119e40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/funcsigs/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc125a332b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/funcsigs/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc12609cfa0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/funcsigs/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc12609f970>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/funcsigs/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc126118a00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/funcsigs/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement funcsigs (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for funcsigs

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_install_uri_with_extras _________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec7e01db0>, index_url='https://pypi.org/simple')

    @pytest.mark.urls
    @pytest.mark.extras
    @pytest.mark.install
    def test_install_uri_with_extras(pipenv_instance_pypi):
        server = DEFAULT_PRIVATE_PYPI_SERVER.replace("/simple", "")
        file_uri = f"{server}/packages/plette/plette-0.2.2-py2.py3-none-any.whl"
        with pipenv_instance_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    plette = {{file = "{file_uri}", extras = ["validation"]}}
    """
                f.write(contents)
            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_misc.py:25: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-dzu9wetk-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 254ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-dzu9wetk-tests-x63SxnVQ
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-dzu9wetk-tests-x63SxnVQ
Pipfile.lock not found, creating...
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff5533d17e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff55329e560>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff55329cdf0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff55329d480>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff55329d5d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /packages/plette/plette-0.2.2-py2.py3-none-any.whl
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 174, in
_new_conn
    conn = connection.create_connection(
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/connection.py", line 95, in
create_connection
    raise err
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/connection.py", line 85, in
create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 716, in
urlopen
    httplib_response = self._make_request(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 416, in
_make_request
    conn.request(method, url, **httplib_request_kw)
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 244, in
request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)
  File "/usr/lib/python3.10/http/client.py", line 1283, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1329, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1278, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.10/http/client.py", line 1038, in _send_output
    self.send(msg)
  File "/usr/lib/python3.10/http/client.py", line 976, in send
    self.connect()
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 205, in
connect
    conn = self._new_conn()
  File "/app/pipenv/patched/pip/_vendor/urllib3/connection.py", line 186, in
_new_conn
    raise NewConnectionError(
pipenv.patched.pip._vendor.urllib3.exceptions.NewConnectionError:
<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at
0x7ff55329fb50>: Failed to establish a new connection: [Errno 111] Connection
refused
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/requests/adapters.py", line 667, in send
    resp = conn.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 830, in
urlopen
    return self.urlopen(
  [Previous line repeated 2 more times]
  File "/app/pipenv/patched/pip/_vendor/urllib3/connectionpool.py", line 802, in
urlopen
    retries = retries.increment(
  File "/app/pipenv/patched/pip/_vendor/urllib3/util/retry.py", line 594, in
increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
pipenv.patched.pip._vendor.urllib3.exceptions.MaxRetryError:
HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url:
/packages/plette/plette-0.2.2-py2.py3-none-any.whl (Caused by
NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnectio
n object at 0x7ff55329fb50>: Failed to establish a new connection: [Errno 111]
Connection refused'))
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 233, in _make_base_candidate_from_link
    self._link_candidate_cache = LinkCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 310, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 321, in _prepare_distribution
    return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 532, in
prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 603, in
_prepare_linked_requirement
    local_file = unpack_url(
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 174, in
unpack_url
    file = get_http_url(
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 115, in
get_http_url
    from_path, content_type = download(link, temp_dir.path)
  File "/app/pipenv/patched/pip/_internal/network/download.py", line 174, in
__call__
    resp = _http_get_download(self._session, link)
  File "/app/pipenv/patched/pip/_internal/network/download.py", line 149, in
_http_get_download
    resp = session.get(target_url, headers=headers, stream=True)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
  File "/app/pipenv/patched/pip/_internal/network/session.py", line 523, in
request
    return super().request(method, url, *args, **kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 589, in
request
    resp = self.send(prep, **send_kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/app/pipenv/patched/pip/_vendor/requests/adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
pipenv.patched.pip._vendor.requests.exceptions.ConnectionError:
HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url:
/packages/plette/plette-0.2.2-py2.py3-none-any.whl (Caused by
NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnectio
n object at 0x7ff55329fb50>: Failed to establish a new connection: [Errno 111]
Connection refused'))

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_local_tar_gz_file ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec55ae170>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.files
    @pytest.mark.local
    def test_local_tar_gz_file(pipenv_instance_private_pypi, testsroot):
        file_name = "requests-2.19.1.tar.gz"

        with pipenv_instance_private_pypi() as p:
            requests_path = p._pipfile.get_fixture_path(f"{file_name}")

            # This tests for a bug when installing a zipfile
            c = p.pipenv(f"install {requests_path}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install /app/tests/test_artifacts/requests-2.19.1.tar.gz', returncode=1, stdout='Install... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:278: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install /app/tests/test_artifacts/requests-2.19.1.tar.gz
Installing /app/tests/test_artifacts/requests-2.19.1.tar.gz...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-k0vga51v-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 231ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-k0vga51v-tests-L3FC46pn
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-k0vga51v-tests-L3FC46pn
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading /app/tests/test_artifacts/requests-2.19.1.tar.gz in  dependencies.
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_multiple_editable_packages_should_not_race ________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5cc0c10>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.run
    @pytest.mark.files
    @pytest.mark.install
    def test_multiple_editable_packages_should_not_race(
        pipenv_instance_private_pypi, testsroot
    ):
        """Test for a race condition that can occur when installing multiple 'editable' packages at
        once, and which causes some of them to not be importable.

        This issue had been fixed for VCS packages already, but not local 'editable' packages.

        So this test locally installs packages from tarballs that have already been committed in
        the local `pypi` dir to avoid using VCS packages.
        """
        pkgs = ["six", "jinja2"]

        with pipenv_instance_private_pypi() as p:
            pipfile_string = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [dev-packages]

    [packages]
            """

            for pkg_name in pkgs:
                source_path = p._pipfile.get_fixture_path(f"git/{pkg_name}/")
                shutil.copytree(source_path, pkg_name)

                pipfile_string += (
                    f'"{pkg_name}" = {{path = "./{pkg_name}", editable = true}}\n'
                )

            with open(p.pipfile_path, "w") as f:
                f.write(pipfile_string.strip())

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:353: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-l9t4qcvy-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 234ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-l9t4qcvy-tests-KnKEk9Gt
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-l9t4qcvy-tests-KnKEk9Gt
Pipfile.lock not found, creating...
Locking  dependencies...
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: file:///tmp/pipenv-l9t4qcvy-tests/six (from -r
/tmp/pipenv-wzf6n7em-requirements/pipenv-t_9qexh0-constraints.txt (line 4)) does
not appear to be a Python project: neither 'setup.py' nor 'pyproject.toml'
found.

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

__________ test_outdated_should_compare_postreleases_without_failing ___________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec55adcf0>, index_url='http://localhost:8080/simple')

    @pytest.mark.skipif(
        os.name == "nt" and sys.version_info[:2] == (3, 8),
        reason="Seems to work on 3.8 but not via the CI",
    )
    @pytest.mark.outdated
    def test_outdated_should_compare_postreleases_without_failing(
        pipenv_instance_private_pypi,
    ):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install ibm-db-sa-py3==0.3.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install ibm-db-sa-py3==0.3.0', returncode=1, stdout='Installing ibm-db-sa-py3==0.3.0...\... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:369: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install ibm-db-sa-py3==0.3.0
Installing ibm-db-sa-py3==0.3.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-zpep2jgv-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-zpep2jgv-tests-Fw68VPFm
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-zpep2jgv-tests-Fw68VPFm
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading ibm-db-sa-py3==0.3.0 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f33222bebc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f33222bef50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f33222bd360>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f33222be710>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f3321ba2710>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/ibm-db-sa-py3/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement ibm-db-sa-py3==0.3.0 (from
versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for ibm-db-sa-py3==0.3.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_install_skip_lock ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec526b160>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.skip_lock
    @pytest.mark.needs_internet
    def test_install_skip_lock(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{}"
    verify_ssl = true
    name = "pypi"
    [packages]
    six = {}
                """.format(
                    p.index_url, '{version = "*", index = "pypi"}'
                ).strip()
                f.write(contents)
            c = p.pipenv("install --skip-lock")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install --skip-lock', returncode=1, stdout='Installing dependencies from Pipfile...\n', ...ERROR: No matching distribution found for six\nERROR: Couldn't install package: {}\n Package installation failed...\n").returncode

tests/integration/test_install_twists.py:410: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install --skip-lock
Installing dependencies from Pipfile...

Command failed...
----------------------------- Captured stderr call -----------------------------
The flag --skip-lock has been reintroduced (but is not recommended).  Without
the lock resolver it is difficult to manage multiple package indexes, and hash
checking is not provided.  However it can help manage installs with current
deficiencies in locking across platforms.
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-hx7t2in3-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 247ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-hx7t2in3-tests-foY6r0eF
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-hx7t2in3-tests-foY6r0eF
Looking in indexes: http://localhost:8080/simple
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f19b9e3e4d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f19b9e3e770>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f19b9e3c4f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f19b9e3c1f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None,
status=None)) after connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f19b9e3d750>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
ERROR: Could not find a version that satisfies the requirement six (from
versions: none)
ERROR: No matching distribution found for six
ERROR: Couldn't install package: {}
 Package installation failed...

_____________________ test_no_duplicate_source_on_install ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5232260>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    def test_no_duplicate_source_on_install(pipenv_instance_private_pypi):
        """Ensure that running pipenv install with an index URL doesn't create duplicate [[source]] sections."""
        with pipenv_instance_private_pypi() as p:
            # Create initial Pipfile with a source
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
                """.strip()
                f.write(contents)

            # Install a package with a custom index
            c = p.pipenv(f"install six --index {p.index_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six --index http://localhost:8080/simple', returncode=1, stdout='Installing six.... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_twists.py:502: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six --index http://localhost:8080/simple
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (3cbc06)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-k8k73v67-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 245ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-k8k73v67-tests-dlDLCEBm
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-k8k73v67-tests-dlDLCEBm
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(ebffa69a1fa192d1cef7cb42ad79231ca976565c5ce371a70160b3048d3cbc06)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8153d35cc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8153ebcca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8153f843a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8153f86440>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f8153f86b00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_file_urls_work ______________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec53cdd50>, index_url='https://pypi.org/simple')

    @pytest.mark.urls
    @pytest.mark.files
    def test_file_urls_work(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            whl = Path(
                Path(__file__).resolve().parent.parent
                / "pypi"
                / "six"
                / "six-1.11.0-py2.py3-none-any.whl"
            )

            try:
                whl = whl.resolve()
            except OSError:
                whl = whl.absolute()
            wheel_url = whl.as_uri()
            c = p.pipenv(f'install "{wheel_url}"')
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install "file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl"', returncode=1, std... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:70: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install "file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl"
Installing file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl...
Installation Succeeded
Installing dependencies from Pipfile.lock (91492b)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-lzwbf7o0-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 239ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-lzwbf7o0-tests-PZObVuLU
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-lzwbf7o0-tests-PZObVuLU
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(94ec0de252e24e5093d96f3e04e17e9824c4777320d90a21de8f1d3dc191492b)!
Upgrading file:///app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl in
dependencies.
WARNING:pipenv.patched.pip._internal.req.constructors:Requirement
'../../app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl' looks like a
filename, but the file does not exist
WARNING:pipenv.patched.pip._internal.req.constructors:Requirement
'../../app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl' looks like a
filename, but the file does not exist
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 233, in _make_base_candidate_from_link
    self._link_candidate_cache = LinkCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 310, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 321, in _prepare_distribution
    return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 532, in
prepare_linked_requirement
    return self._prepare_linked_requirement(req, parallel_builds)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 637, in
_prepare_linked_requirement
    hash = hash_file(local_file.path)[0].hexdigest()
  File "/app/pipenv/patched/pip/_internal/utils/misc.py", line 622, in hash_file
    with open(path, "rb") as f:
FileNotFoundError: [Errno 2] No such file or directory:
'/app/tests/pypi/six/six-1.11.0-py2.py3-none-any.whl'

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________________ test_install_git_tag _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec526b850>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_git_tag(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install git+https://github.com/benjaminp/six.git@1.11.0")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install git+https://github.com/benjaminp/six.git@1.11.0', returncode=1, stdout='Installi... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:99: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install git+https://github.com/benjaminp/six.git@1.11.0
Installing git+https://github.com/benjaminp/six.git@1.11.0...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-u8s03f8i-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 248ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-u8s03f8i-tests-eJsIASFh
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-u8s03f8i-tests-eJsIASFh
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
INFO:pipenv.patched.pip._internal.vcs.git:Cloning https://github.com/benjaminp/six.git (to revision 1.11.0) to /tmp/tmp7dw8h17g
INFO:pip.subprocessor:Running command git clone --filter=blob:none https://github.com/benjaminp/six.git /tmp/tmp7dw8h17g
INFO:pip.subprocessor:Cloning into '/tmp/tmp7dw8h17g'...
INFO:pip.subprocessor:Running command git checkout -q 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Resolved https://github.com/benjaminp/six.git to commit 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Cloning https://github.com/benjaminp/six.git (to revision 1.11.0) to /tmp/tmpqssvpal8
INFO:pip.subprocessor:Running command git clone --filter=blob:none https://github.com/benjaminp/six.git /tmp/tmpqssvpal8
INFO:pip.subprocessor:Cloning into '/tmp/tmpqssvpal8'...
INFO:pip.subprocessor:Running command git checkout -q 15e31431af97e5e64b80af0a3f598d382bcdd49a
INFO:pipenv.patched.pip._internal.vcs.git:Resolved https://github.com/benjaminp/six.git to commit 15e31431af97e5e64b80af0a3f598d382bcdd49a
Upgrading git+https://github.com/benjaminp/six.git@1.11.0 in  dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-f4b9ydzs/six_a4d74bc6277f41cd8a9912204cc2b1b5
INFO:pip.subprocessor:Running command git checkout -q
15e31431af97e5e64b80af0a3f598d382bcdd49a
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_install_named_index_alias ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51af040>, index_url='http://localhost:8080/simple')

    @pytest.mark.urls
    @pytest.mark.index
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_named_index_alias(pipenv_instance_private_pypi):
        """Test that pipenv can install packages from different named index sources.

        This test verifies that the --index parameter works correctly with named aliases
        by setting up two different named sources and installing packages from each.
        """
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "secondary"

    [packages]
    six = "*"

    [dev-packages]
                """.strip()
                f.write(contents)

            # Test installing from the first named index
            c = p.pipenv("install click --index secondary")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install click --index secondary', returncode=1, stdout='Building requirements...\nResolv... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:142: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install click --index secondary
Building requirements...
Resolving dependencies...
Success!
Installing click...
Installation Succeeded
Installing dependencies from Pipfile.lock (451942)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-woo5bj_c-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 223ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-woo5bj_c-tests-OIMd4KAb
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-woo5bj_c-tests-OIMd4KAb
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(06c998ed3e851e0fc0d6f930b0ec71bae475eea6ad118384a4c449f619451942)!
Upgrading click in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff41172fa30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff410e5fb80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff410e5df30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff410e5f850>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7ff410e5d120>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/click/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement click (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for click

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_install_local_vcs_not_in_lockfile ____________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51ae500>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_local_vcs_not_in_lockfile(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            # six_path = os.path.join(p.path, "six")
            six_path = p._pipfile.get_fixture_path("git/six/")
            c = subprocess_run(["git", "clone", six_path, "./six"])
>           assert c.returncode == 0
E           assert 128 == 0
E            +  where 128 = CompletedProcess(args=['git', 'clone', PosixPath('/app/tests/test_artifacts/git/six'), './six'], returncode=128, stdout='', stderr="fatal: repository '/app/tests/test_artifacts/git/six' does not exist\n").returncode

tests/integration/test_install_uri.py:197: AssertionError
______________________________ test_get_vcs_refs _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51c3760>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_get_vcs_refs(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six', returncode=1, stdout... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:212: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six
Installing -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-idfqixa9-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-idfqixa9-tests-V8XWBweh
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-idfqixa9-tests-V8XWBweh
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e git+https://github.com/benjaminp/six.git@1.9.0#egg=six in
dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-dzrix9az/six_b49b83ae54b4486ca284e25d6003386e
INFO:pip.subprocessor:Running command git checkout -q
5efb522b0647f7467248273ec1b893d06b984a59
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_vcs_entry_supersedes_non_vcs _______________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5b723b0>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_vcs_entry_supersedes_non_vcs(pipenv_instance_pypi):
        """See issue #2181 -- non-editable VCS dep was specified, but not showing up
        in the lockfile -- due to not running pip install before locking and not locking
        the resolution graph of non-editable vcs dependencies.
        """
        with pipenv_instance_pypi() as p:
            jinja2_uri = p._pipfile.get_fixture_path("git/jinja2").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    f"""
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
    Flask = "*"
    Jinja2 = {{ref = "2.11.0", git = "{jinja2_uri}"}}
                """.strip()
                )
            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_uri.py:257: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-cu9l6f0a-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 238ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-cu9l6f0a-tests-X56WsXtk
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-cu9l6f0a-tests-X56WsXtk
Pipfile.lock not found, creating...
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-cu9l6f0a-tests-X56WsXtk/src/jinja2
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/jinja2' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-cu9l6f0a-tests-X56WsXtk/src/jinja2 exited
with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/jinja2
/root/.local/share/virtualenvs/pipenv-cu9l6f0a-tests-X56WsXtk/src/jinja2 exited
with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________________ test_vcs_can_use_markers ___________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51c1060>, index_url='https://pypi.org/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_vcs_can_use_markers(pipenv_instance_pypi):
        with pipenv_instance_pypi() as p:
            path = p._pipfile.get_fixture_path("git/six/")
            p._pipfile.install(
                "six",
                {
                    "git": f"{path.as_uri()}",
                    "ref": "1.11.0",
                    "markers": "sys_platform == 'linux'",
                },
            )
            assert "six" in p.pipfile["packages"]
            c = p.pipenv("install -v")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -v', returncode=1, stdout='Building requirements...\nResolving dependencies...\n... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_install_uri.py:288: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -v
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.operations.prepare:Obtaining six from
git+file:/app/tests/test_artifacts/git/six@1.11.0#egg=six (from -r
/tmp/pipenv-p7iorja5-requirements/pipenv-6q_4nqyz-constraints.txt (line 2))
INFO:pipenv.patched.pip._internal.vcs.git:Cloning
file:///app/tests/test_artifacts/git/six (to revision 1.11.0) to
/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD/src/six
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD/src/six
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/six' does not appear
to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD/src/six exited
with 128
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 77, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 545, in collect_root_requirements
    reqs = list(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 501, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/factory.py",
line 212, in _make_base_candidate_from_link
    self._editable_candidate_cache = EditableCandidate(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 335, in __init__
    super().__init__(
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 160, in __init__
    self.dist = self._prepare()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 237, in _prepare
    dist = self._prepare_distribution()
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/candidates.py",
line 345, in _prepare_distribution
    return self._factory.preparer.prepare_editable_requirement(self._ireq)
  File "/app/pipenv/patched/pip/_internal/operations/prepare.py", line 699, in
prepare_editable_requirement
    req.update_editable()
  File "/app/pipenv/patched/pip/_internal/req/req_install.py", line 697, in
update_editable
    vcs_backend.obtain(self.source_dir, url=hidden_url, verbosity=0)
  File "/app/pipenv/patched/pip/_internal/vcs/versioncontrol.py", line 502, in
obtain
    self.fetch_new(dest, url, rev_options, verbosity=verbosity)
  File "/app/pipenv/patched/pip/_internal/vcs/git.py", line 286, in fetch_new
    self.run_command(
  File "/app/pipenv/patched/pip/_internal/vcs/git.py", line 87, in run_command
    return super().run_command(*args, **kwargs)
  File "/app/pipenv/patched/pip/_internal/vcs/versioncontrol.py", line 631, in
run_command
    return call_subprocess(
  File "/app/pipenv/patched/pip/_internal/utils/subprocess.py", line 209, in
call_subprocess
    raise error
pipenv.patched.pip._internal.exceptions.InstallationSubprocessError: git clone
--filter=blob:none --quiet file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD/src/six exited
with 128
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD/src/six exited
with 128
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-_p4oie02-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 267ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-_p4oie02-tests-hCyXrzHD
Pipfile.lock not found, creating...
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________________ test_install_vcs_ref_by_commit_hash ______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51c2290>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.urls
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_install_vcs_ref_by_commit_hash(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a59#egg=six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b98... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_install_vcs.py:56: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -e git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a59#egg=six
Installing -e
git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a5
9#egg=six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-nfon5bnn-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 257ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-nfon5bnn-tests-MyLWZRF-
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-nfon5bnn-tests-MyLWZRF-
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading -e
git+https://github.com/benjaminp/six.git@5efb522b0647f7467248273ec1b893d06b984a5
9#egg=six in  dependencies.
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
https://github.com/benjaminp/six.git
/tmp/pip-temp-zbre6di5/six_c387b867fadb49adb3593b1b52d862ce
INFO:pip.subprocessor:Running command git rev-parse -q --verify
'sha^5efb522b0647f7467248273ec1b893d06b984a59'
INFO:pip.subprocessor:Running command git fetch -q
https://github.com/benjaminp/six.git 5efb522b0647f7467248273ec1b893d06b984a59
INFO:pip.subprocessor:Running command git checkout -q
5efb522b0647f7467248273ec1b893d06b984a59
ERROR:pip.subprocessor:pip subprocess to install build dependencies exited with
1
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: pip subprocess to install build dependencies exited with 1

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_lock_handle_eggs _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51c3f40>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.requirements
    def test_lock_handle_eggs(pipenv_instance_private_pypi):
        """Ensure locking works with packages providing egg formats."""
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                f.write(
                    f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    RandomWords = "*"
                """
                )
            c = p.pipenv("lock --verbose")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --verbose', returncode=1, stdout='Building requirements...\nResolving dependencies.... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_lock.py:28: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --verbose
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.network.session:adding trusted host:
'localhost:8080' (from line 2 of
/tmp/pipenv-6a_jiw31-requirements/pipenv-so3gj573-constraints.txt)
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('RandomWords'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f506a09b910>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f506a09a830>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f506a422590>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f506a421900>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f506a4222c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/randomwords/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement RandomWords (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('RandomWords')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('RandomWords'),
parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for RandomWords
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
RandomWords
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-8czk0dlg-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 254ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-8czk0dlg-tests-SAsM7BM7
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-8czk0dlg-tests-SAsM7BM7
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_lock_includes_hashes_for_all_platforms __________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec572dc00>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_includes_hashes_for_all_platforms(pipenv_instance_private_pypi):
        """Locking should include hashes for *all* platforms, not just the
        platform we're running lock on."""

        # releases = pytest_pypi.app.packages['yarl'].releases

        releases = {
            "yarl-1.3.0-cp35-cp35m-manylinux1_x86_64.whl": "3890ab952d508523ef4881457c4099056546593fa05e93da84c7250516e632eb",
            "yarl-1.3.0-cp35-cp35m-win_amd64.whl": "b25de84a8c20540531526dfbb0e2d2b648c13fd5dd126728c496d7c3fea33310",
            "yarl-1.3.0-cp36-cp36m-manylinux1_x86_64.whl": "5badb97dd0abf26623a9982cd448ff12cb39b8e4c94032ccdedf22ce01a64842",
            "yarl-1.3.0-cp36-cp36m-win_amd64.whl": "c6e341f5a6562af74ba55205dbd56d248daf1b5748ec48a0200ba227bb9e33f4",
            "yarl-1.3.0-cp37-cp37m-win_amd64.whl": "73f447d11b530d860ca1e6b582f947688286ad16ca42256413083d13f260b7a0",
            "yarl-1.3.0.tar.gz": "024ecdc12bc02b321bc66b41327f930d1c2c543fa9a561b39861da9388ba7aa9",
        }

        def get_hash(release_name):
            # Convert a specific filename to a hash like what would show up in a Pipfile.lock.
            # For example:
            # 'yarl-1.3.0-cp35-cp35m-manylinux1_x86_64.whl' -> 'sha256:3890ab952d508523ef4881457c4099056546593fa05e93da84c7250516e632eb'
            return f"sha256:{releases[release_name]}"

        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    yarl = "==1.3.0"
                """.strip()
                f.write(contents)

            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:141: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-kcqjiz8c-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 276ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-kcqjiz8c-tests-z0OPg3kc
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-kcqjiz8c-tests-z0OPg3kc
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1aa82166b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1aa86b5090>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1aa86b5900>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1aa81dc040>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1aa81dc340>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/yarl/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement yarl==1.3.0 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for yarl==1.3.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________________ test_complex_lock_with_vcs_deps ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5271ed0>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.complex
    @pytest.mark.needs_internet
    def test_complex_lock_with_vcs_deps(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            dateutil_uri = p._pipfile.get_fixture_path("git/dateutil").as_uri()
            with open(p.pipfile_path, "w") as f:
                contents = (
                    """
    [packages]
    click = "==6.7"

    [dev-packages]
    requests = {git = "%s"}
                """.strip()
                    % requests_uri
                )
                f.write(contents)

            c = p.pipenv("install")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nSuc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:188: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install
Building requirements...
Resolving dependencies...
Success!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-f0e9jckp-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-f0e9jckp-tests-usIaZrC8
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-f0e9jckp-tests-usIaZrC8
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-f0e9jckp-tests-usIaZrC8/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-f0e9jckp-tests-usIaZrC8/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-f0e9jckp-tests-usIaZrC8/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

___________________________ test_lock_updated_source ___________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5271a50>, index_url='http://localhost:8080/simple')

    @pytest.mark.index
    @pytest.mark.install
    def test_lock_updated_source(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "{url}/${{MY_ENV_VAR}}"
    name = "localpypi"
    verify_ssl = false

    [packages]
    requests = "==2.14.0"
                """.strip().format(
                    url=p.pypi
                )
                f.write(contents)

            with temp_environ():
                os.environ["MY_ENV_VAR"] = "simple"
                c = p.pipenv("lock")
>               assert c.returncode == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:344: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-b9c9zk5d-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 231ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-b9c9zk5d-tests-NyEb7ovH
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-b9c9zk5d-tests-NyEb7ovH
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbe1cbcd180>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbe1cbcd0f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbe1cbce470>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbe1cbcca30>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fbe1cbccb20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests==2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests==2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_lock_editable_vcs_without_install ____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec50f83d0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/six").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    six = {git = "%s", editable = true}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:381: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-0_qykll2-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 221ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-0_qykll2-tests-4C3rh1fI
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-0_qykll2-tests-4C3rh1fI
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-0_qykll2-tests-4C3rh1fI/src/six
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/six' does not appear
to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-0_qykll2-tests-4C3rh1fI/src/six exited
with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/six
/root/.local/share/virtualenvs/pipenv-0_qykll2-tests-4C3rh1fI/src/six exited
with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_lock_editable_vcs_with_ref_in_git ____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51216c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_ref_in_git(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s@883caaf", editable = true}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:400: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-p4f6zupl-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 236ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-p4f6zupl-tests-fm-pq87t
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-p4f6zupl-tests-fm-pq87t
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-p4f6zupl-tests-fm-pq87t/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-p4f6zupl-tests-fm-pq87t/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-p4f6zupl-tests-fm-pq87t/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________ test_lock_editable_vcs_with_extras_without_install ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5123310>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.extras
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_extras_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s", editable = true, extras = ["socks"]}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:424: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-xdfwruax-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 253ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-xdfwruax-tests-fdvIlKZw
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-xdfwruax-tests-fdvIlKZw
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xdfwruax-tests-fdvIlKZw/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xdfwruax-tests-fdvIlKZw/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xdfwruax-tests-fdvIlKZw/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________ test_lock_editable_vcs_with_markers_without_install ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5121330>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    @pytest.mark.needs_internet
    def test_lock_editable_vcs_with_markers_without_install(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [packages]
    requests = {git = "%s", editable = true, markers = "python_version >= '2.6'"}
                """.strip()
                    % requests_uri
                )
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:447: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-xkx8wgfa-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 230ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-xkx8wgfa-tests-DITtqabK
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-xkx8wgfa-tests-DITtqabK
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xkx8wgfa-tests-DITtqabK/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xkx8wgfa-tests-DITtqabK/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-xkx8wgfa-tests-DITtqabK/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________ test_vcs_lock_respects_top_level_pins _____________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec483b2b0>, index_url='http://localhost:8080/simple')

    @pytest.mark.vcs
    @pytest.mark.lock
    def test_vcs_lock_respects_top_level_pins(pipenv_instance_private_pypi):
        """Test that locking VCS dependencies respects top level packages pinned in Pipfiles"""

        with pipenv_instance_private_pypi() as p:
            requests_uri = p._pipfile.get_fixture_path("git/requests").as_uri()
            p._pipfile.add(
                "requests", {"editable": True, "git": f"{requests_uri}", "ref": "v2.18.4"}
            )
            p._pipfile.add("urllib3", "==1.21.1")
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:488: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ocxwnjdl-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 232ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ocxwnjdl-tests-FEFua0zF
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ocxwnjdl-tests-FEFua0zF
Locking  dependencies...
INFO:pip.subprocessor:Running command git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ocxwnjdl-tests-FEFua0zF/src/requests
INFO:pip.subprocessor:fatal: '/app/tests/test_artifacts/git/requests' does not
appear to be a git repository
INFO:pip.subprocessor:fatal: Could not read from remote repository.
INFO:pip.subprocessor:
INFO:pip.subprocessor:Please make sure you have the correct access rights
INFO:pip.subprocessor:and the repository exists.
ERROR:pip.subprocessor:git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ocxwnjdl-tests-FEFua0zF/src/requests
exited with 128
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: git clone --filter=blob:none --quiet
file:///app/tests/test_artifacts/git/requests
/root/.local/share/virtualenvs/pipenv-ocxwnjdl-tests-FEFua0zF/src/requests
exited with 128

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________________ test_lock_nested_direct_url __________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec4768190>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_nested_direct_url(pipenv_instance_private_pypi):
        """
        The dependency 'test_package' has a declared dependency on
        a PEP508 style VCS URL. This ensures that we capture the dependency
        here along with its own dependencies.
        """
        with pipenv_instance_private_pypi(pipfile=False) as p:
            contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = true
    name = "local"

    [packages]
    test_package = "*"
                    """.strip()
            with open(p.pipfile_path, "w") as f:
                f.write(contents)
            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:542: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-38j8w0cd-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 290ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-38j8w0cd-tests-waozZlVD
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-38j8w0cd-tests-waozZlVD
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9568dbac0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9568da200>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9568d8d90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9568da9e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fd9568d8f40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/test-package/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement test_package (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for test_package

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_____________ test_lock_package_with_compatible_release_specifier ______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec480b910>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    @pytest.mark.install
    def test_lock_package_with_compatible_release_specifier(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six~=1.11")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six~=1.11', returncode=1, stdout='Installing six~=1.11...\nInstallation Succeede... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:579: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six~=1.11
Installing six~=1.11...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-jllovnl9-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 247ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-jllovnl9-tests-HHqLsx2D
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-jllovnl9-tests-HHqLsx2D
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six~=1.11 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f21369b93f0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f21369b9510>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f21369b9900>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f213719ce80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f2136d40f40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six~=1.11 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six~=1.11

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_pipenv_respects_package_index_restrictions ________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec483b940>, index_url='http://localhost:8080/simple')

    @flaky
    @pytest.mark.lock
    @pytest.mark.install
    @pytest.mark.needs_internet
    def test_pipenv_respects_package_index_restrictions(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = """
    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [[source]]
    url = "{url}"
    verify_ssl = true
    name = "local"

    [packages]
    requests = {requirement}
                    """.strip().format(
                    url=p.index_url, requirement='{version="*", index="local"}'
                )
                f.write(contents)

            c = p.pipenv("lock")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:625: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-zj0nryph-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 238ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-zj0nryph-tests-8xqKawt9
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-zj0nryph-tests-8xqKawt9
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f96f224e200>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f96f224f970>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f96f2d2af20>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f96f224e080>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f96f262d5d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-52bvga8v-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 267ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-52bvga8v-tests-4f5d67uY
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-52bvga8v-tests-4f5d67uY
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fb894f8f010>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fb894f8fb50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fb895139450>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fb894f8f910>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fb894f8f9a0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_______________ test_dev_lock_use_default_packages_as_constraint _______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47e7d00>, index_url='http://localhost:8080/simple')

    @pytest.mark.dev
    @pytest.mark.lock
    @pytest.mark.install
    def test_dev_lock_use_default_packages_as_constraint(pipenv_instance_private_pypi):
        # See https://github.com/pypa/pipenv/issues/4371
        # See https://github.com/pypa/pipenv/issues/2987
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [packages]
    requests = "<=2.14.0"

    [dev-packages]
    requests = "*"
                    """.strip()
                f.write(contents)

            c = p.pipenv("lock --dev")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --dev', returncode=1, stdout='Building requirements...\nResolving dependencies...\n... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:666: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --dev
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-klu2_a9e-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 252ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-klu2_a9e-tests-LJz2yROb
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-klu2_a9e-tests-LJz2yROb
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf355aab60>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf355ab670>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf355ab5e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf355aa260>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7faf355a8dc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/requests/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement requests<=2.14.0 (from versions:
none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for requests<=2.14.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_lock_specific_named_category _______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec5cc3fd0>, index_url='http://localhost:8080/simple')

    @pytest.mark.lock
    def test_lock_specific_named_category(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi(pipfile=False) as p:
            contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = true
    name = "test"

    [packages]
    requests = "*"

    [prereq]
    six = "*"
            """.strip()
            with open(p.pipfile_path, "w") as f:
                f.write(contents)
            c = p.pipenv("lock --categories prereq")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --categories prereq', returncode=1, stdout='Building requirements...\nResolving dep... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_lock.py:697: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --categories prereq
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-4wk7llzv-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 274ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-4wk7llzv-tests-Us4DRyXG
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-4wk7llzv-tests-Us4DRyXG
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f52bfda21d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f52bfda0370>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f52bfda17e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f52bfda19c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f52bfda34c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________________ test_update_locks _______________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec476ba60>, index_url='http://localhost:8080/simple')

    @pytest.mark.update
    @pytest.mark.lock
    def test_update_locks(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install jdcal==1.3")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install jdcal==1.3', returncode=1, stdout='Installing jdcal==1.3...\nInstallation Succee... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_pipenv.py:47: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install jdcal==1.3
Installing jdcal==1.3...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-ltblzlxe-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-ltblzlxe-tests-o9vhN8by
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-ltblzlxe-tests-o9vhN8by
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading jdcal==1.3 in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f77b68b1450>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f77b68b1780>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f77b69dd690>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f77b69dd630>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f77b6c48040>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/jdcal/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement jdcal==1.3 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for jdcal==1.3

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_get_source[True] _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51ac2b0>, index_url='http://localhost:8080/simple')
lock_first = True

    @pytest.mark.project
    @pytest.mark.sources
    @pytest.mark.parametrize("lock_first", [True, False])
    def test_get_source(pipenv_instance_private_pypi, lock_first):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    url = "{p.index_url}"
    verify_ssl = false
    name = "testindex"

    [[source]]
    url = "https://pypi.org/simple"
    verify_ssl = true
    name = "pypi"

    [packages]
    pytz = "*"
    six = {{version = "*", index = "pypi"}}

    [dev-packages]
                """.strip()
                f.write(contents)

            if lock_first:
                # force source to be cached
                c = p.pipenv("lock")
>               assert c.returncode == 0
E               AssertionError: assert 1 == 0
E                +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_project.py:64: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-6yu6lwiy-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 241ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-6yu6lwiy-tests-XtqDXNFl
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-6yu6lwiy-tests-XtqDXNFl
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5e7f689b40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5e7f84c4c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5e7f84f5b0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5e7f84f790>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5e7f84f370>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/pytz/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement pytz (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for pytz

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_mirror_lock_sync _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec51219c0>, index_url='http://localhost:8080/simple')

    @pytest.mark.sync
    @pytest.mark.lock
    def test_mirror_lock_sync(pipenv_instance_private_pypi):
        with temp_environ(), pipenv_instance_private_pypi() as p:
            mirror_url = p.index_url
            assert "pypi.org" not in mirror_url
            with open(p.pipfile_path, "w") as f:
                f.write(
                    """
    [[source]]
    name = "pypi"
    url = "https://pypi.org/simple"
    verify_ssl = true

    [packages]
    six = "==1.12.0"
                """.strip()
                )
            c = p.pipenv(f"lock --pypi-mirror {mirror_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv lock --pypi-mirror http://localhost:8080/simple', returncode=1, stdout='Building require... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_sync.py:41: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv lock --pypi-mirror http://localhost:8080/simple
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-s8vbt4fe-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 236ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-s8vbt4fe-tests-nava53kF
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-s8vbt4fe-tests-nava53kF
Locking  dependencies...
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1bc409ec80>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1bc4469cc0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1bc490a890>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1bc4908400>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f1bc4432f50>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six==1.12.0 (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six==1.12.0

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_uninstall_django _____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47e4eb0>, index_url='http://localhost:8080/simple')

    @pytest.mark.uninstall
    @pytest.mark.skipif(
        sys.version_info >= (3, 12), reason="Package does not work with Python 3.12"
    )
    def test_uninstall_django(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install Django")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install Django', returncode=1, stdout='Installing Django...\nInstallation Succeeded\nIns... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:31: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install Django
Installing Django...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-3itafnr4-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 221ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-3itafnr4-tests-oL8nIdHi
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-3itafnr4-tests-oL8nIdHi
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading Django in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc4b418ca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc4b41bf40>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc4b41a4d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc4b41aaa0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fdc4b41bca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement django (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for django

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

____________________________ test_mirror_uninstall _____________________________

pipenv_instance_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47e6dd0>, index_url='https://pypi.org/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    @pytest.mark.skipif(
        sys.version_info >= (3, 12), reason="Package does not work with Python 3.12"
    )
    def test_mirror_uninstall(pipenv_instance_pypi):
        with temp_environ(), pipenv_instance_pypi() as p:
            mirror_url = DEFAULT_PRIVATE_PYPI_SERVER
            assert "pypi.org" not in mirror_url

            c = p.pipenv(f"install Django --pypi-mirror {mirror_url}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install Django --pypi-mirror http://localhost:8080/simple', returncode=1, stdout='Instal... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:60: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install Django --pypi-mirror http://localhost:8080/simple
Installing Django...
Installation Succeeded
Installing dependencies from Pipfile.lock (91492b)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-zb3bp1mf-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 237ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-zb3bp1mf-tests-IaKvhnfn
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-zb3bp1mf-tests-IaKvhnfn
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(94ec0de252e24e5093d96f3e04e17e9824c4777320d90a21de8f1d3dc191492b)!
Upgrading Django in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5860301780>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5860300f10>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f586068a140>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f586096c1c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f5860300ca0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/django/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement django (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for django

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

________________________ test_uninstall_all_local_files ________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47febc0>, index_url='http://localhost:8080/simple')
testsroot = '/app/tests'

    @pytest.mark.files
    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_all_local_files(pipenv_instance_private_pypi, testsroot):
        with pipenv_instance_private_pypi() as p:
            file_uri = p._pipfile.get_fixture_path(
                "tablib/tablib-0.12.1.tar.gz", fixtures="pypi"
            ).as_uri()
            c = p.pipenv(f"install {file_uri}")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz', returncode=1, stdout='Insta...or \'rb\')\nFileNotFoundError: [Errno 2] No such file or directory: \'/app/tests/pypi/tablib/tablib-0.12.1.tar.gz\'\n').returncode

tests/integration/test_uninstall.py:97: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz
Installing file:///app/tests/pypi/tablib/tablib-0.12.1.tar.gz...

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-e_pxlm15-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 273ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-e_pxlm15-tests-UUKo5qiI
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-e_pxlm15-tests-UUKo5qiI
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pipenv", line 8, in <module>
    sys.exit(cli())
  File "/app/pipenv/vendor/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
  File "/app/pipenv/cli/options.py", line 51, in main
    return super().main(*args, **kwargs, windows_expand_args=False)
  File "/app/pipenv/vendor/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/app/pipenv/vendor/click/core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/app/pipenv/vendor/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/app/pipenv/vendor/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/app/pipenv/vendor/click/decorators.py", line 92, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
  File "/app/pipenv/vendor/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/app/pipenv/cli/command.py", line 208, in install
    do_install(
  File "/app/pipenv/routines/install.py", line 318, in do_install
    new_packages, _ = handle_new_packages(
  File "/app/pipenv/routines/install.py", line 85, in handle_new_packages
    added, cat, normalized_name = project.add_package_to_pipfile(
  File "/app/pipenv/project.py", line 1240, in add_package_to_pipfile
    name, normalized_name, entry = self.generate_package_pipfile_entry(
  File "/app/pipenv/project.py", line 1174, in generate_package_pipfile_entry
    req_name = determine_package_name(package)
  File "/app/pipenv/utils/dependencies.py", line 838, in determine_package_name
    req_name = find_package_name_from_tarball(package.link.file_path)
  File "/app/pipenv/utils/dependencies.py", line 646, in find_package_name_from_tarball
    with tarfile.open(tarball_filepath, "r") as tar_ref:
  File "/usr/lib/python3.10/tarfile.py", line 1829, in open
    return func(name, "r", fileobj, **kwargs)
  File "/usr/lib/python3.10/tarfile.py", line 1895, in gzopen
    fileobj = GzipFile(name, mode + "b", compresslevel, fileobj)
  File "/usr/lib/python3.10/gzip.py", line 174, in __init__
    fileobj = self.myfileobj = builtins.open(filename, mode or 'rb')
FileNotFoundError: [Errno 2] No such file or directory: '/app/tests/pypi/tablib/tablib-0.12.1.tar.gz'

____________________________ test_uninstall_all_dev ____________________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec481ba60>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_all_dev(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            with open(p.pipfile_path, "w") as f:
                contents = f"""
    [[source]]
    name = "pypi"
    url = "{p.index_url}"
    verify_ssl = true

    [packages]
    tablib = "*"

    [dev-packages]
    jinja2 = "==2.11.1"
    six = "==1.12.0"
            """
                f.write(contents)

            c = p.pipenv("install -v --dev")
>           assert c.returncode == 0
E           assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install -v --dev', returncode=1, stdout='Building requirements...\nResolving dependencie... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n").returncode

tests/integration/test_uninstall.py:127: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install -v --dev
Building requirements...
Resolving dependencies...
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.starti
ng()
INFO:pipenv.patched.pip._internal.resolution.resolvelib.reporter:Reporter.adding
_requirement(SpecifierRequirement('tablib'), None)
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b8a344a90>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b8a3460e0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b8a345360>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b8a3477c0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7f4b8a347940>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/tablib/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement tablib (from versions: none)
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 429, in resolve
    self._add_to_criteria(self.state.criteria, r, parent=None)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 151, in _add_to_criteria
    raise RequirementsConflicted(criterion)
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.RequirementsConflicte
d: Requirements conflict: SpecifierRequirement('tablib')
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 96, in resolve
    result = self._result = resolver.resolve(
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 596, in resolve
    state = resolution.resolve(requirements, max_rounds=max_rounds)
  File "/app/pipenv/patched/pip/_vendor/resolvelib/resolvers/resolution.py",
line 431, in resolve
    raise ResolutionImpossible(e.criterion.information) from e
pipenv.patched.pip._vendor.resolvelib.resolvers.exceptions.ResolutionImpossible:
[RequirementInformation(requirement=SpecifierRequirement('tablib'),
parent=None)]
The above exception was the direct cause of the following exception:
Traceback (most recent call last):
  File "/app/pipenv/utils/resolver.py", line 469, in resolve
    results = resolver.resolve(self.constraints, check_supported_wheels=False)
  File "/app/pipenv/patched/pip/_internal/resolution/resolvelib/resolver.py",
line 105, in resolve
    raise error from e
pipenv.patched.pip._internal.exceptions.DistributionNotFound: No matching
distribution found for tablib
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "/app/pipenv/resolver.py", line 465, in <module>
    main()
  File "/app/pipenv/resolver.py", line 451, in main
    _main(
  File "/app/pipenv/resolver.py", line 436, in _main
    resolve_packages(
  File "/app/pipenv/resolver.py", line 400, in resolve_packages
    results, resolver = resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 1083, in resolve_deps
    results, hashes, internal_resolver = actually_resolve_deps(
  File "/app/pipenv/utils/resolver.py", line 811, in actually_resolve_deps
    resolver.resolve()
  File "/app/pipenv/utils/resolver.py", line 471, in resolve
    raise ResolutionFailure(message=e)
pipenv.exceptions.ResolutionFailure: ERROR: No matching distribution found for
tablib
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Using python: None
Path to python:
PythonInfo(path=PosixPath('/root/.local/share/virtualenvs/app-4PlAip0Q/bin/pytho
n'), version_str='3.10.12', major=3, minor=10, patch=12, is_prerelease=False,
is_postrelease=False, is_devrelease=False, is_debug=False,
version=<Version('3.10.12')>, architecture=None, company='PythonCore',
name='python',
executable='/root/.local/share/virtualenvs/app-4PlAip0Q/bin/python')
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-1yxn0ix0-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 244ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-1yxn0ix0-tests-Vvom3B42
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-1yxn0ix0-tests-Vvom3B42
Pipfile.lock not found, creating...
Locking  dependencies...
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

______________________ test_uninstall_missing_parameters _______________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec481a5f0>, index_url='http://localhost:8080/simple')

    @pytest.mark.install
    @pytest.mark.uninstall
    def test_uninstall_missing_parameters(pipenv_instance_private_pypi):
        with pipenv_instance_private_pypi() as p:
            c = p.pipenv("install six")
>           assert c.returncode == 0
E           AssertionError: assert 1 == 0
E            +  where 1 = CompletedProcess(args='pipenv install six', returncode=1, stdout='Installing six...\nInstallation Succeeded\nInstallin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode

tests/integration/test_uninstall.py:203: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv install six
Installing six...
Installation Succeeded
Installing dependencies from Pipfile.lock (beaca8)...
All dependencies are now up-to-date!
Building requirements...
Resolving dependencies...
Locking Failed!

Command failed...
----------------------------- Captured stderr call -----------------------------
Creating a virtualenv for this project
Pipfile: /tmp/pipenv-guq2aeel-tests/Pipfile
Using /root/.local/share/virtualenvs/app-4PlAip0Q/bin/python3.10.12 to create
virtualenv...
created virtual environment CPython3.10.12.final.0-64 in 251ms
  creator
CPython3Posix(dest=/root/.local/share/virtualenvs/pipenv-guq2aeel-tests-vjGEOXDR
, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, via=copy,
app_data_dir=/root/.local/share/virtualenv)
    added seed packages: pip==25.2, setuptools==80.9.0
  activators
BashActivator,CShellActivator,FishActivator,NushellActivator,PowerShellActivator
,PythonActivator

Successfully created virtual environment!
Virtualenv location: /root/.local/share/virtualenvs/pipenv-guq2aeel-tests-vjGEOXDR
Pipfile.lock not found, creating...
Locking  dependencies...
Locking  dependencies...
Updated Pipfile.lock
(822ce9baece7c99f32494061ca1636547630ffb6100d7fd22e6517f7d2beaca8)!
Upgrading six in  dependencies.
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=4, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc8d39e79d0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=3, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc8d39e7cd0>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=2, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc8d39e6d70>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=1, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc8d39e5930>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying
(Retry(total=0, connect=None, read=None, redirect=None, status=None)) after
connection broken by
'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnecti
on object at 0x7fc8d39e5f00>: Failed to establish a new connection: [Errno 111]
Connection refused')': /simple/six/
CRITICAL:pipenv.patched.pip._internal.resolution.resolvelib.factory:Could not
find a version that satisfies the requirement six (from versions: none)
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 451, in main
[ResolutionFailure]:       _main(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 436, in _main
[ResolutionFailure]:       resolve_packages(
[ResolutionFailure]:   File "/app/pipenv/resolver.py", line 400, in
resolve_packages
[ResolutionFailure]:       results, resolver = resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 1083, in
resolve_deps
[ResolutionFailure]:       results, hashes, internal_resolver =
actually_resolve_deps(
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 811, in
actually_resolve_deps
[ResolutionFailure]:       resolver.resolve()
[ResolutionFailure]:   File "/app/pipenv/utils/resolver.py", line 471, in
resolve
[ResolutionFailure]:       raise ResolutionFailure(message=e)
Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: No matching distribution found for six

Your dependencies could not be resolved. You likely have a mismatch in your
sub-dependencies.
You can use $ pipenv run pip install <requirement_name> to bypass this
mechanism, then run $ pipenv graph to inspect the versions actually installed in
the virtualenv.
Hint: try $ pipenv lock --pre if it is a pre-release dependency.
ERROR: Failed to lock Pipfile.lock!

_________________ test_update_outdated_with_outdated_package[] _________________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47fd8a0>, index_url='http://localhost:8080/simple')
cmd_option = ''

    @pytest.mark.parametrize("cmd_option", ["", "--dev"])
    @pytest.mark.basic
    @pytest.mark.update
    @pytest.mark.skipif(
        "os.name == 'nt' and sys.version_info[:2] == (3, 8)",
        reason="Seems to work on 3.8 but not via the CI",
    )
    def test_update_outdated_with_outdated_package(pipenv_instance_private_pypi, cmd_option):
        with pipenv_instance_private_pypi() as p:
            package_name = "six"
            p.pipenv(f"install {cmd_option} {package_name}==1.11")
            c = p.pipenv(f"update {package_name} {cmd_option} --outdated")
>           assert f"Package '{package_name}' out-of-date:" in c.stdout
E           assert "Package 'six' out-of-date:" in 'All packages are up to date!\n'
E            +  where 'All packages are up to date!\n' = CompletedProcess(args='pipenv update six  --outdated', returncode=0, stdout='All packages are up to date!\n', stderr="...on object at 0x7fb86477f400>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/\n").stdout

tests/integration/test_update.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv update six  --outdated
All packages are up to date!

----------------------------- Captured stderr call -----------------------------
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca9480>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca9210>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca9000>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca8df0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca8be0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca8640>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca8400>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb863ca81f0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb86477fac0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7fb86477f400>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/

______________ test_update_outdated_with_outdated_package[--dev] _______________

pipenv_instance_private_pypi = functools.partial(<class 'tests.integration.conftest._PipenvInstance'>, capfd=<_pytest.capture.CaptureFixture object at 0x7efec47e6020>, index_url='http://localhost:8080/simple')
cmd_option = '--dev'

    @pytest.mark.parametrize("cmd_option", ["", "--dev"])
    @pytest.mark.basic
    @pytest.mark.update
    @pytest.mark.skipif(
        "os.name == 'nt' and sys.version_info[:2] == (3, 8)",
        reason="Seems to work on 3.8 but not via the CI",
    )
    def test_update_outdated_with_outdated_package(pipenv_instance_private_pypi, cmd_option):
        with pipenv_instance_private_pypi() as p:
            package_name = "six"
            p.pipenv(f"install {cmd_option} {package_name}==1.11")
            c = p.pipenv(f"update {package_name} {cmd_option} --outdated")
>           assert f"Package '{package_name}' out-of-date:" in c.stdout
E           assert "Package 'six' out-of-date:" in 'All packages are up to date!\n'
E            +  where 'All packages are up to date!\n' = CompletedProcess(args='pipenv update six --dev --outdated', returncode=0, stdout='All packages are up to date!\n', std...on object at 0x7f8bf8bed900>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/\n").stdout

tests/integration/test_update.py:19: AssertionError
----------------------------- Captured stdout call -----------------------------
$ pipenv update six --dev --outdated
All packages are up to date!

----------------------------- Captured stderr call -----------------------------
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8beefb0>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8beed40>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8beeb30>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bee920>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bee710>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/setuptools/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bee170>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bedf30>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bedd20>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bedb10>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/
WARNING:pipenv.patched.pip._vendor.urllib3.connectionpool:Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pipenv.patched.pip._vendor.urllib3.connection.HTTPConnection object at 0x7f8bf8bed900>: Failed to establish a new connection: [Errno 111] Connection refused')': /simple/pip/

=============================== warnings summary ===============================
../root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/config/__init__.py:1474
  /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: plugins

    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

tests/integration/conftest.py:47
  /app/tests/integration/conftest.py:47: RuntimeWarning: Failed connecting to internet: http://httpbin.org/ip
    warnings.warn(

tests/integration/test_import_requirements.py::test_auth_with_pw_redacted
tests/integration/test_import_requirements.py::test_auth_with_pw_redacted
  /app/pipenv/patched/pip/_vendor/pkg_resources/__init__.py:3116: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('sphinxcontrib')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
===Flaky Test Report===

test_platform_python_implementation_marker failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_install_markers.py:49>]
test_platform_python_implementation_marker failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install depends-on-marked-package', returncode=1, stdout='Installing depends-on-marked-p... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_install_markers.py:49>]
test_specific_package_environment_markers passed 1 out of the required 1 times. Success!
test_top_level_overrides_environment_markers passed 1 out of the required 1 times. Success!
test_global_overrides_environment_markers failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_install_markers.py:130>]
test_global_overrides_environment_markers failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv install', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLoc... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_install_markers.py:130>]
test_resolver_unique_markers passed 1 out of the required 1 times. Success!
test_environment_variable_value_does_not_change_hash passed 1 out of the required 1 times. Success!
test_complex_deps_lock_and_install_properly passed 1 out of the required 1 times. Success!
test_pipenv_respects_package_index_restrictions failed (1 runs remaining out of 2).
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_lock.py:625>]
test_pipenv_respects_package_index_restrictions failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	assert 1 == 0
 +  where 1 = CompletedProcess(args='pipenv lock', returncode=1, stdout='Building requirements...\nResolving dependencies...\nLockin... virtualenv.\nHint: try $ pipenv lock --pre if it is a pre-release dependency.\nERROR: Failed to lock Pipfile.lock!\n').returncode
	[<TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:344>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/flaky/flaky_pytest_plugin.py:146>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/logging.py:850>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/capture.py:900>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:53>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_result.py:103>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:38>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:139>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/skipping.py:263>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/runner.py:178>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:1671>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_hooks.py:512>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_manager.py:120>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:167>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/pluggy/_callers.py:121>, <TracebackEntry /root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.10/site-packages/_pytest/python.py:157>, <TracebackEntry /app/tests/integration/test_lock.py:625>]

===End Flaky Test Report===
=========================== short test summary info ============================
SKIPPED [1] tests/integration/test_cli.py:153: This test will be revisited with the safety changes
SKIPPED [2] tests/integration/test_cli.py:184: This test will be revisited with the safety changes
SKIPPED [1] tests/integration/test_cli.py:272: This test clears the cache that other tests may be using.
SKIPPED [1] tests/integration/test_install_basic.py:610: pip 23.3 now vendors in truststore and so test assumptions invalid
SKIPPED [1] tests/integration/test_install_twists.py:185: This test modifies os.environment which has side effects on other tests
SKIPPED [1] tests/integration/test_install_twists.py:223: unconditional skip
SKIPPED [1] tests/integration/test_windows.py:13: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:39: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:54: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:69: only relevant on windows
SKIPPED [1] tests/integration/test_windows.py:86: only relevant on windows
SKIPPED [6] tests/unit/test_utils.py:345: Windows file paths tested
SKIPPED [1] tests/unit/test_utils.py:552: Windows test only
SKIPPED [1] tests/unit/test_utils_windows_executable.py:15: Windows test only
SKIPPED [1] tests/unit/test_utils_windows_executable.py:30: Windows test only
FAILED tests/integration/test_cli.py::test_pipenv_graph_reverse - AssertionEr...
FAILED tests/integration/test_cli.py::test_pipenv_clean - AssertionError: ass...
FAILED tests/integration/test_install_basic.py::test_basic_install - Assertio...
FAILED tests/integration/test_install_basic.py::test_extras_install - Asserti...
FAILED tests/integration/test_install_basic.py::test_skip_requirements_when_pipfile
FAILED tests/integration/test_install_basic.py::test_install_does_not_extrapolate_environ
FAILED tests/integration/test_install_basic.py::test_system_and_deploy_work
FAILED tests/integration/test_install_basic.py::test_install_package_with_dots
FAILED tests/integration/test_install_basic.py::test_rewrite_outline_table - ...
FAILED tests/integration/test_install_basic.py::test_rewrite_outline_table_ooo
FAILED tests/integration/test_install_basic.py::test_install_dev_use_default_constraints
FAILED tests/integration/test_install_categories.py::test_basic_category_install
FAILED tests/integration/test_install_categories.py::test_multiple_category_install[prereq other]
FAILED tests/integration/test_install_categories.py::test_multiple_category_install[prereq, other]
FAILED tests/integration/test_install_markers.py::test_platform_python_implementation_marker
FAILED tests/integration/test_install_markers.py::test_global_overrides_environment_markers
FAILED tests/integration/test_install_misc.py::test_install_uri_with_extras
FAILED tests/integration/test_install_twists.py::test_local_tar_gz_file - Ass...
FAILED tests/integration/test_install_twists.py::test_multiple_editable_packages_should_not_race
FAILED tests/integration/test_install_twists.py::test_outdated_should_compare_postreleases_without_failing
FAILED tests/integration/test_install_twists.py::test_install_skip_lock - ass...
FAILED tests/integration/test_install_twists.py::test_no_duplicate_source_on_install
FAILED tests/integration/test_install_uri.py::test_file_urls_work - assert 1 ...
FAILED tests/integration/test_install_uri.py::test_install_git_tag - Assertio...
FAILED tests/integration/test_install_uri.py::test_install_named_index_alias
FAILED tests/integration/test_install_uri.py::test_install_local_vcs_not_in_lockfile
FAILED tests/integration/test_install_uri.py::test_get_vcs_refs - AssertionEr...
FAILED tests/integration/test_install_uri.py::test_vcs_entry_supersedes_non_vcs
FAILED tests/integration/test_install_uri.py::test_vcs_can_use_markers - asse...
FAILED tests/integration/test_install_vcs.py::test_install_vcs_ref_by_commit_hash
FAILED tests/integration/test_lock.py::test_lock_handle_eggs - assert 1 == 0
FAILED tests/integration/test_lock.py::test_lock_includes_hashes_for_all_platforms
FAILED tests/integration/test_lock.py::test_complex_lock_with_vcs_deps - Asse...
FAILED tests/integration/test_lock.py::test_lock_updated_source - AssertionEr...
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_without_install
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_ref_in_git
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_extras_without_install
FAILED tests/integration/test_lock.py::test_lock_editable_vcs_with_markers_without_install
FAILED tests/integration/test_lock.py::test_vcs_lock_respects_top_level_pins
FAILED tests/integration/test_lock.py::test_lock_nested_direct_url - Assertio...
FAILED tests/integration/test_lock.py::test_lock_package_with_compatible_release_specifier
FAILED tests/integration/test_lock.py::test_pipenv_respects_package_index_restrictions
FAILED tests/integration/test_lock.py::test_dev_lock_use_default_packages_as_constraint
FAILED tests/integration/test_lock.py::test_lock_specific_named_category - As...
FAILED tests/integration/test_pipenv.py::test_update_locks - AssertionError: ...
FAILED tests/integration/test_project.py::test_get_source[True] - AssertionEr...
FAILED tests/integration/test_sync.py::test_mirror_lock_sync - AssertionError...
FAILED tests/integration/test_uninstall.py::test_uninstall_django - Assertion...
FAILED tests/integration/test_uninstall.py::test_mirror_uninstall - Assertion...
FAILED tests/integration/test_uninstall.py::test_uninstall_all_local_files - ...
FAILED tests/integration/test_uninstall.py::test_uninstall_all_dev - assert 1...
FAILED tests/integration/test_uninstall.py::test_uninstall_missing_parameters
FAILED tests/integration/test_update.py::test_update_outdated_with_outdated_package[]
FAILED tests/integration/test_update.py::test_update_outdated_with_outdated_package[--dev]
===== 54 failed, 337 passed, 21 skipped, 4 warnings in 2260.69s (0:37:40) ======
