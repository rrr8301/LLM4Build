npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
npm warn deprecated gauge@3.0.2: This package is no longer supported.
npm warn deprecated mkdirp@0.3.0: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)

> @lexical/monorepo@0.36.2 prepare
> husky install

husky - Git hooks installed

added 3368 packages, and audited 3406 packages in 1m

759 packages are looking for funding
  run `npm fund` for details

24 vulnerabilities (5 low, 14 moderate, 3 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> @lexical/monorepo@0.36.2 ci-check
> npm-run-all --parallel tsc tsc-extension flow prettier lint


> @lexical/monorepo@0.36.2 flow
> node ./scripts/check-flow-types.js


> @lexical/monorepo@0.36.2 tsc-extension
> npm run compile -w @lexical/devtools


> @lexical/monorepo@0.36.2 tsc
> tsc


> @lexical/monorepo@0.36.2 lint
> eslint ./


> @lexical/monorepo@0.36.2 prettier
> prettier --list-different .

Running Flow...
/app/node_modules/flow-bin/flow-linux64-v0.280.0/flow: /lib/x86_64-linux-gnu/libm.so.6: version `GLIBC_2.35' not found (required by /app/node_modules/flow-bin/flow-linux64-v0.280.0/flow)
/app/node_modules/flow-bin/flow-linux64-v0.280.0/flow: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /app/node_modules/flow-bin/flow-linux64-v0.280.0/flow)
/app/node_modules/flow-bin/flow-linux64-v0.280.0/flow: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.33' not found (required by /app/node_modules/flow-bin/flow-linux64-v0.280.0/flow)
/app/node_modules/flow-bin/flow-linux64-v0.280.0/flow: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.34' not found (required by /app/node_modules/flow-bin/flow-linux64-v0.280.0/flow)
/app/node_modules/flow-bin/flow-linux64-v0.280.0/flow: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.32' not found (required by /app/node_modules/flow-bin/flow-linux64-v0.280.0/flow)
Flow failed :(


> @lexical/devtools@0.36.2 compile
> tsc --noEmit

ERROR: "flow" exited with 1.

> @lexical/monorepo@0.36.2 build
> node scripts/build.js


> @lexical/monorepo@0.36.2 build-www
> npm run clean && npm run build -- --www && npm run build -- --www --prod && npm run prepare-www


> @lexical/monorepo@0.36.2 clean
> node scripts/clean.js


> @lexical/monorepo@0.36.2 build
> node scripts/build.js --www


> @lexical/monorepo@0.36.2 build
> node scripts/build.js --www --prod


> @lexical/monorepo@0.36.2 prepare-www
> node scripts/www/rewriteImports.js


> @lexical/monorepo@0.36.2 test-unit
> vitest --no-watch


 RUN  v3.2.4 /app

 âœ“ |unit| packages/lexical-eslint-plugin/src/__tests__/unit/rules-of-lexical.test.ts (3 tests) 6ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/LexicalComposer.test.tsx (3 tests) 52ms
 âœ“ |unit| packages/lexical-extension/src/__tests__/unit/LexicalBuilder.test.ts (7 tests) 27ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/LexicalContentEditableElement.test.tsx (13 tests) 240ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTablePlugin.test.tsx (4 tests) 36ms
 âœ“ |unit| packages/lexical-html/src/__tests__/unit/LexicalHtml.test.ts (6 tests) 82ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/LexicalCollaborationPlugin.test.tsx (1 test) 174ms
stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text insertion between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/CollaborationWithCollisions.test.ts > CollaborationWithCollisions > useCollabV2: false > Remove text at within the first of multiple paragraphs colliding with removing first paragraph
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text insertion between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text insertion conflicts between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text insertion conflicts between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text insertion conflicts between two clients
Invalid access: Add Yjs type to a document before reading data.

 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalExtensionCore.test.ts (7 tests) 7ms
stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text deletion conflicts between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should collaborate basic text deletion conflicts between two clients
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/CollaborationWithCollisions.test.ts > CollaborationWithCollisions > useCollabV2: false > Remove first two paragraphs colliding with removing first paragraph
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should sync direction of element node
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should sync direction of element node
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/CollaborationWithCollisions.test.ts > CollaborationWithCollisions > useCollabV2: false > Editing first and second paragraphs colliding with editing second and third paragraphs (with overlapping edit)
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should allow the passing of arbitrary awareness data
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should sync to other clients when inserting a new paragraph node when document is emptied via undo
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should sync to other clients when inserting a new paragraph node when document is emptied via undo
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > useCollabV2: false > Should sync to other clients when inserting a new paragraph node when document is emptied via undo
Invalid access: Add Yjs type to a document before reading data.
Invalid access: Add Yjs type to a document before reading data.

 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalUtilsInsertNodeToNearestRoot.test.tsx (8 tests) 152ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/unwrapAndFilterDescendants.test.tsx (4 tests) 26ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/iterators.test.tsx (7 tests) 38ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/CollaborationWithCollisions.test.ts (6 tests) 605ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalUpdateTags.test.ts (6 tests) 177ms
 âœ“ |unit| packages/lexical-playground/__tests__/unit/docSerialization.test.ts (3 tests) 235ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/PlainRichTextPlugin.test.tsx (6 tests) 278ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalNodeHelpers.test.ts (10 tests) 270ms
 âœ“ |unit| packages/lexical-mark/__tests__/unit/LexicalMarkNode.test.ts (6 tests) 301ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalEditorState.test.ts (4 tests) 160ms
 âœ“ |unit| packages/lexical-rich-text/src/__tests__/unit/LexicalHeadingNode.test.ts (9 tests) 215ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/useLexicalCharacterLimit.test.ts (2 tests) 178ms
 âœ“ |unit| packages/lexical-rich-text/src/__tests__/unit/LexicalQuoteNode.test.ts (5 tests) 201ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalSerialization.test.ts (1 test) 217ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalUtilsSplitNode.test.tsx (7 tests) 151ms
stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > Should handle multiple text nodes being normalized due to merge conflict
Invalid access: Add Yjs type to a document before reading data.

stderr | packages/lexical-react/src/__tests__/unit/Collaboration.test.ts > Collaboration > Should handle multiple text nodes being normalized due to merge conflict
Invalid access: Add Yjs type to a document before reading data.

 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalNormalization.test.tsx (10 tests) 204ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/Collaboration.test.ts (13 tests) 727ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalReconciler.test.ts (5 tests) 193ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalParagraphNode.test.ts (7 tests) 194ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/ReactPluginHostExtension.test.tsx (2 tests) 182ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalElementNode.test.tsx (37 tests) 605ms
 âœ“ |unit| packages/lexical/src/caret/__tests__/unit/docs-traversals.test.ts (8 tests) 231ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/utils.test.ts (10 tests) 249ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalUtils.test.ts (25 tests) 306ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalRootNode.test.ts (14 tests) 252ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/LexicalExtensionComposer.test.tsx (2 tests) 138ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalGC.test.tsx (42 tests) 458ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/CodeBlock.test.ts (13 tests) 406ms
 âœ“ |unit| packages/lexical-link/src/__tests__/unit/LexicalAutoLinkNode.test.ts (27 tests) 349ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/HTMLCopyAndPaste.test.ts (10 tests) 411ms
 âœ“ |unit| packages/lexical-selection/src/__tests__/unit/LexicalSelectionHelpers.test.ts (49 tests) 368ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableSelection.test.tsx (2 tests) 129ms
 âœ“ |unit| packages/lexical-markdown/src/__tests__/unit/LexicalMarkdown.test.ts (238 tests) 728ms
 âœ“ |unit| packages/lexical-history/src/__tests__/unit/LexicalHistory.test.tsx (5 tests) 201ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableMobileSelection.test.tsx (5 tests) 193ms
 âœ“ |unit| packages/lexical-link/src/__tests__/unit/LexicalLinkNode.test.ts (36 tests) 410ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalTextNode.test.tsx (99 tests) 878ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/formatList.test.ts (4 tests) 177ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalTabNode.test.tsx (15 tests) 376ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalNode.test.ts (70 tests) 719ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalNodeState.test.ts (83 tests) 789ms
stderr | packages/lexical-react/src/__tests__/unit/CollaborationSnapshot.test.ts > CollaborationSnapshot > DIFF_VERSIONS_COMMAND > should diff between two snapshots
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 âœ“ |scripts-unit| scripts/error-codes/__tests__/unit/ErrorMap.test.ts (7 tests) 17ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalSelection.test.ts (50 tests) 642ms
 âœ“ |unit| packages/lexical-code/src/__tests__/unit/LexicalCodeNodeTabs.test.ts (74 tests) 891ms
 âœ“ |scripts-unit| scripts/__tests__/unit/stackblitz.test.ts (70 tests) 25ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalEventHelpers.test.tsx (57 tests) 939ms
 âœ“ |unit| packages/lexical-link/src/__tests__/unit/LinkExtension.test.ts (1 test) 31ms
 âœ“ |unit| packages/lexical-eslint-plugin/src/__tests__/unit/buildMatcher.test.ts (4 tests) 7ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalElementHelpers.test.ts (5 tests) 12ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/useLexicalIsTextContentEmpty.test.tsx (1 test) 94ms
 âœ“ |unit| packages/lexical-extension/src/__tests__/unit/deepThemeMergeInPlace.test.ts (1 test) 5ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/LinkExtension.test.ts (2 tests) 30ms
 âœ“ |scripts-unit| scripts/__tests__/unit/build.test.ts (461 tests) 141ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/React19.test.tsx (1 test) 27ms
 âœ“ |scripts-unit| scripts/www/__tests__/unit/transformFlowFileContents.test.ts (4 tests) 283ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/mergeRegister.test.ts (2 tests) 11ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/descendantsMatching.test.tsx (3 tests) 21ms
 âœ“ |unit| packages/lexical-code-shiki/src/__tests__/unit/LexicalCodeNodeTabs.test.ts (74 tests) 1181ms
   âœ“ LexicalCodeNode tests > Tabs > testing tab: >| => >-| (forwards)  491ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableExtension.test.ts (1 test) 23ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/registerListStrictIndentTransform.test.ts (1 test) 1785ms
   âœ“ Lexical List StrictIndentTransform tests > applyStrictListIndentation  1782ms
 âœ“ |unit| packages/lexical/src/caret/__tests__/unit/LexicalCaret.test.ts (168 tests) 1343ms
 âœ“ |unit| packages/lexical-code/src/__tests__/unit/LexicalCodeNode.test.ts (54 tests | 1 skipped) 1683ms
   âœ“ LexicalCodeNode tests > initial editor state before transforms > can be registered after initial editor state (regression #7014)  913ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/ReactExtension.test.tsx (2 tests) 13ms
 âœ“ |unit| packages/lexical/src/nodes/__tests__/unit/LexicalLineBreakNode.test.ts (5 tests) 120ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableCellNode.test.ts (3 tests) 1600ms
   âœ“ LexicalTableCellNode tests > TableCellNode.importDOM  1486ms
stderr | packages/lexical-react/src/__tests__/unit/CollaborationSnapshot.test.ts > CollaborationSnapshot > DIFF_VERSIONS_COMMAND > should diff from start of time if no prevSnapshot is provided
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | packages/lexical-react/src/__tests__/unit/CollaborationSnapshot.test.ts > CollaborationSnapshot > DIFF_VERSIONS_COMMAND > should diff to latest state if no snapshot is provided
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Placeholder inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalListPlugin.test.tsx (3 tests) 1570ms
   âœ“ @lexical/list tests > Toggle an empty list on/off  1407ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/LexicalListNode.test.ts (14 tests) 1172ms
   âœ“ LexicalListNode tests > Should clear checklist attributes when nesting lists  952ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableRowNode.test.ts (2 tests) 73ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/useMenuAnchorRef.test.tsx (1 test) 24ms
 âœ“ |unit| packages/lexical-hashtag/src/__tests__/unit/LexicalHashtagNode.test.ts (1 test) 69ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalUtilsKlassEqual.test.ts (1 test) 58ms
 âœ“ |unit| packages/lexical-utils/src/__tests__/unit/LexicalRootHelpers.test.ts (2 tests) 80ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/CollaborationSnapshot.test.ts (6 tests) 1484ms
   âœ“ CollaborationSnapshot > DIFF_VERSIONS_COMMAND > should diff between two snapshots  1158ms
 âœ“ |unit| packages/lexical/src/__tests__/unit/LexicalEditor.test.tsx (75 tests) 1947ms
   âœ“ LexicalEditor tests > transforms do not discard unintentional dirtyElements  1301ms
 âœ“ |unit| packages/lexical-list/src/__tests__/unit/LexicalListItemNode.test.ts (26 tests) 2302ms
   âœ“ LexicalListItemNode tests > ListItemNode.createDOM()  1119ms
   âœ“ LexicalListItemNode tests > ListItemNode.replace() > another list item node  380ms
 âœ“ |unit| packages/lexical-react/src/__tests__/unit/LexicalNestedComposer.test.tsx (8 tests) 1887ms
   âœ“ LexicalNestedComposer > with inherited configuration and namespace  1429ms
 âœ“ |unit| packages/lexical-headless/src/__tests__/unit/LexicalHeadlessEditor.test.ts (8 tests) 107ms
 âœ“ |unit| packages/lexical-selection/src/__tests__/unit/LexicalSelection.test.tsx (233 tests) 2244ms
 âœ“ |unit| packages/lexical-tailwind/src/__tests__/unit/LexicalTailwind.test.ts (1 test) 775ms
   âœ“ TailwindExtension > applies the expected classes  773ms
 âœ“ |scripts-unit| scripts/error-codes/__tests__/unit/transform-error-messages.test.ts (8 tests) 1604ms
   âœ“ transform-error-messages > invariant > {extractCodes: true, noMinify: false} > inserts known and extracts unknown message codes  1415ms
 âœ“ |unit| packages/lexical-table/src/__tests__/unit/LexicalTableNode.test.tsx (38 tests) 3119ms
   âœ“ LexicalTableNode tests > hasHorizontalScroll={false} > TableNode.createDOM()  1052ms
   âœ“ LexicalTableNode tests > hasHorizontalScroll={false} > TableNode.createDOM() and updateDOM() style  402ms

 Test Files  89 passed (89)
      Tests  2436 passed | 1 skipped (2437)
   Start at  05:06:23
   Duration  8.59s (transform 29.63s, setup 11.37s, collect 228.16s, tests 43.14s, environment 65.23s, prepare 14.08s)


> @lexical/monorepo@0.36.2 test-integration
> jest --selectProjects integration --testPathPattern

Running one project: integration
FAIL integration scripts/__tests__/integration/prepare-release.test.js (243.953 s)
  prepare-release tests
    lexical
      âœ“ npm/lexical-0.36.2.tgz exists (2 ms)
    @lexical/clipboard
      âœ“ npm/lexical-clipboard-0.36.2.tgz exists (1 ms)
    @lexical/code
      âœ“ npm/lexical-code-0.36.2.tgz exists
    @lexical/code-shiki
      âœ“ npm/lexical-code-shiki-0.36.2.tgz exists
    @lexical/devtools-core
      âœ“ npm/lexical-devtools-core-0.36.2.tgz exists
    @lexical/dragon
      âœ“ npm/lexical-dragon-0.36.2.tgz exists
    @lexical/eslint-plugin
      âœ“ npm/lexical-eslint-plugin-0.36.2.tgz exists
    @lexical/extension
      âœ“ npm/lexical-extension-0.36.2.tgz exists
    @lexical/file
      âœ“ npm/lexical-file-0.36.2.tgz exists
    @lexical/hashtag
      âœ“ npm/lexical-hashtag-0.36.2.tgz exists
    @lexical/headless
      âœ“ npm/lexical-headless-0.36.2.tgz exists (1 ms)
    @lexical/history
      âœ“ npm/lexical-history-0.36.2.tgz exists
    @lexical/html
      âœ“ npm/lexical-html-0.36.2.tgz exists (3 ms)
    @lexical/link
      âœ“ npm/lexical-link-0.36.2.tgz exists
    @lexical/list
      âœ“ npm/lexical-list-0.36.2.tgz exists
    @lexical/mark
      âœ“ npm/lexical-mark-0.36.2.tgz exists
    @lexical/markdown
      âœ“ npm/lexical-markdown-0.36.2.tgz exists (1 ms)
    @lexical/offset
      âœ“ npm/lexical-offset-0.36.2.tgz exists
    @lexical/overflow
      âœ“ npm/lexical-overflow-0.36.2.tgz exists
    @lexical/plain-text
      âœ“ npm/lexical-plain-text-0.36.2.tgz exists
    @lexical/react
      âœ“ npm/lexical-react-0.36.2.tgz exists
    @lexical/rich-text
      âœ“ npm/lexical-rich-text-0.36.2.tgz exists
    @lexical/selection
      âœ“ npm/lexical-selection-0.36.2.tgz exists
    @lexical/table
      âœ“ npm/lexical-table-0.36.2.tgz exists (1 ms)
    @lexical/tailwind
      âœ“ npm/lexical-tailwind-0.36.2.tgz exists
    @lexical/text
      âœ“ npm/lexical-text-0.36.2.tgz exists
    @lexical/utils
      âœ“ npm/lexical-utils-0.36.2.tgz exists (1 ms)
    @lexical/yjs
      âœ“ npm/lexical-yjs-0.36.2.tgz exists
  examples/vanilla-js-plugin
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (14 ms)
  examples/vanilla-js-iframe
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (8 ms)
  examples/vanilla-js
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (13 ms)
  examples/react-table
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (20 ms)
  examples/react-rich-collab
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (18 ms)
  examples/react-rich
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (20 ms)
  examples/react-plain-text
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (19 ms)
  examples/node-state-style
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (21 ms)
  examples/node-replacement
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (22 ms)
  examples/extension-vanilla-tailwind
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (11 ms)
  examples/extension-vanilla-react-plugin-host
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (17 ms)
  examples/extension-sveltekit-ssr-hydration
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (12 ms)
    âœ• tests pass (13304 ms)
  examples/extension-react-table
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (17 ms)
  scripts/__tests__/integration/fixtures/lexical-esm-nextjs
    âœ“ install & build succeeded
    âœ“ installed lexical 0.36.2 (14 ms)
    âœ• tests pass (3066 ms)
  scripts/__tests__/integration/fixtures/lexical-esm-astro-react
    âœ“ install & build succeeded (1 ms)
    âœ“ installed lexical 0.36.2 (15 ms)

  â— examples/extension-sveltekit-ssr-hydration â€º tests pass

    expect(received).toBe(expected) // Object.is equality

    Expected: null
    Received: {"code": 1, "stderr": "", "stdout": "
    > extension-sveltekit-ssr-hydration@0.36.2 test
    > playwright testÂ·Â·
    Running 2 tests using 1 workerÂ·
      âœ˜  1 e2e/demo.test.ts:3:1 â€º home page has expected h1 (5ms)
      âœ˜  2 e2e/demo.test.ts:9:1 â€º html is prerendered (5ms)Â·Â·
      1) e2e/demo.test.ts:3:1 â€º home page has expected h1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·
        Error: browserType.launch:Â·
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘ Host system is missing dependencies to run browsers. â•‘
        â•‘ Please install them with the following command:      â•‘
        â•‘                                                      â•‘
        â•‘     npx playwright install-deps                      â•‘
        â•‘                                                      â•‘
        â•‘ Alternatively, use apt:                              â•‘
        â•‘     apt-get install libglib2.0-0\\                    â•‘
        â•‘         libnspr4\\                                    â•‘
        â•‘         libnss3\\                                     â•‘
        â•‘         libdbus-1-3\\                                 â•‘
        â•‘         libatk1.0-0\\                                 â•‘
        â•‘         libatk-bridge2.0-0\\                          â•‘
        â•‘         libatspi2.0-0\\                               â•‘
        â•‘         libx11-6\\                                    â•‘
        â•‘         libxcomposite1\\                              â•‘
        â•‘         libxdamage1\\                                 â•‘
        â•‘         libxext6\\                                    â•‘
        â•‘         libxfixes3\\                                  â•‘
        â•‘         libxrandr2\\                                  â•‘
        â•‘         libgbm1\\                                     â•‘
        â•‘         libxcb1\\                                     â•‘
        â•‘         libxkbcommon0\\                               â•‘
        â•‘         libasound2                                   â•‘
        â•‘                                                      â•‘
        â•‘ <3 Playwright Team                                   â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·
      2) e2e/demo.test.ts:9:1 â€º html is prerendered â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·
        Error: browserType.launch:Â·
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘ Host system is missing dependencies to run browsers. â•‘
        â•‘ Please install them with the following command:      â•‘
        â•‘                                                      â•‘
        â•‘     npx playwright install-deps                      â•‘
        â•‘                                                      â•‘
        â•‘ Alternatively, use apt:                              â•‘
        â•‘     apt-get install libglib2.0-0\\                    â•‘
        â•‘         libnspr4\\                                    â•‘
        â•‘         libnss3\\                                     â•‘
        â•‘         libdbus-1-3\\                                 â•‘
        â•‘         libatk1.0-0\\                                 â•‘
        â•‘         libatk-bridge2.0-0\\                          â•‘
        â•‘         libatspi2.0-0\\                               â•‘
        â•‘         libx11-6\\                                    â•‘
        â•‘         libxcomposite1\\                              â•‘
        â•‘         libxdamage1\\                                 â•‘
        â•‘         libxext6\\                                    â•‘
        â•‘         libxfixes3\\                                  â•‘
        â•‘         libxrandr2\\                                  â•‘
        â•‘         libgbm1\\                                     â•‘
        â•‘         libxcb1\\                                     â•‘
        â•‘         libxkbcommon0\\                               â•‘
        â•‘         libasound2                                   â•‘
        â•‘                                                      â•‘
        â•‘ <3 Playwright Team                                   â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·
      2 failed
        e2e/demo.test.ts:3:1 â€º home page has expected h1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        e2e/demo.test.ts:9:1 â€º html is prerendered â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "}

      54 |         ['code', 'stdout', 'stderr'].map((prop) => [prop, err[prop]]),
      55 |       ),
    > 56 |     ).toBe(null);
         |       ^
      57 |     throw err;
      58 |   });
      59 | }

      at toBe (scripts/__tests__/integration/utils.js:56:7)

  â— scripts/__tests__/integration/fixtures/lexical-esm-nextjs â€º tests pass

    expect(received).toBe(expected) // Object.is equality

    Expected: null
    Received: {"code": 1, "stderr": "[WebServer]  [33m[1mâš [22m[39m Warning: Next.js inferred your workspace root, but it may not be correct.
    [WebServer]  We detected multiple lockfiles and selected the directory of /app/package-lock.json as the root directory.
    [WebServer]  To silence this warning, set `outputFileTracingRoot` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
    [WebServer]    See https://nextjs.org/docs/app/api-reference/config/next-config-js/output#caveats for more information.
    [WebServer]  Detected additional lockfiles:Â·
    [WebServer]    * /app/scripts/__tests__/integration/fixtures/lexical-esm-nextjs/package-lock.json
    [WebServer]Â·
    ", "stdout": "
    > lexical-esm-nextjs@0.36.2 test
    > playwright testÂ·Â·
    Running 1 test using 1 workerÂ·
      âœ˜  1 tests/test.ts:11:5 â€º index page has expected h1 and lexical state (5ms)Â·Â·
      1) tests/test.ts:11:5 â€º index page has expected h1 and lexical state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Â·
        Error: browserType.launch:Â·
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘ Host system is missing dependencies to run browsers. â•‘
        â•‘ Please install them with the following command:      â•‘
        â•‘                                                      â•‘
        â•‘     npx playwright install-deps                      â•‘
        â•‘                                                      â•‘
        â•‘ Alternatively, use apt:                              â•‘
        â•‘     apt-get install libglib2.0-0\\                    â•‘
        â•‘         libnspr4\\                                    â•‘
        â•‘         libnss3\\                                     â•‘
        â•‘         libdbus-1-3\\                                 â•‘
        â•‘         libatk1.0-0\\                                 â•‘
        â•‘         libatk-bridge2.0-0\\                          â•‘
        â•‘         libatspi2.0-0\\                               â•‘
        â•‘         libx11-6\\                                    â•‘
        â•‘         libxcomposite1\\                              â•‘
        â•‘         libxdamage1\\                                 â•‘
        â•‘         libxext6\\                                    â•‘
        â•‘         libxfixes3\\                                  â•‘
        â•‘         libxrandr2\\                                  â•‘
        â•‘         libgbm1\\                                     â•‘
        â•‘         libxcb1\\                                     â•‘
        â•‘         libxkbcommon0\\                               â•‘
        â•‘         libasound2                                   â•‘
        â•‘                                                      â•‘
        â•‘ <3 Playwright Team                                   â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·
      1 failed
        tests/test.ts:11:5 â€º index page has expected h1 and lexical state â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    "}

      54 |         ['code', 'stdout', 'stderr'].map((prop) => [prop, err[prop]]),
      55 |       ),
    > 56 |     ).toBe(null);
         |       ^
      57 |     throw err;
      58 |   });
      59 | }

      at toBe (scripts/__tests__/integration/utils.js:56:7)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 58 passed, 60 total
Snapshots:   0 total
Time:        243.997 s
Ran all test suites.
npm error Missing script: "test-e2e"
npm error
npm error To see a list of scripts, run:
npm error   npm run
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-10-07T12_11_57_720Z-debug-0.log
