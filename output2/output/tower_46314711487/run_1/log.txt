    Updating crates.io index
     Locking 90 packages to latest compatible versions
 Downloading crates ...
  Downloaded byteorder v1.5.0
  Downloaded tokio-macros v2.5.0
  Downloaded log v0.4.28
  Downloaded slab v0.4.11
  Downloaded rand_core v0.6.4
  Downloaded tracing-subscriber v0.3.20
  Downloaded rand v0.8.5
  Downloaded rand_core v0.9.3
  Downloaded proc-macro2 v1.0.101
  Downloaded tokio-stream v0.1.17
  Downloaded unicode-ident v1.0.19
  Downloaded tokio-test v0.4.4
  Downloaded futures-macro v0.3.31
  Downloaded rand_chacha v0.9.0
  Downloaded getrandom v0.3.3
  Downloaded sharded-slab v0.1.7
  Downloaded ppv-lite86 v0.2.21
  Downloaded zerocopy v0.8.27
  Downloaded tracing v0.1.41
  Downloaded quote v1.0.41
  Downloaded itoa v1.0.15
  Downloaded hashbrown v0.16.0
  Downloaded syn v2.0.106
  Downloaded futures v0.3.31
  Downloaded tracing-core v0.1.34
  Downloaded sync_wrapper v1.0.2
  Downloaded quickcheck v1.0.3
  Downloaded hdrhistogram v7.5.4
  Downloaded num-traits v0.2.19
  Downloaded futures-util v0.3.31
  Downloaded thread_local v1.1.9
  Downloaded getrandom v0.2.16
  Downloaded env_logger v0.8.4
  Downloaded libc v0.2.176
  Downloaded regex v1.11.3
  Downloaded async-stream v0.3.6
  Downloaded tokio-util v0.7.16
  Downloaded once_cell v1.21.3
  Downloaded fnv v1.0.7
  Downloaded autocfg v1.5.0
  Downloaded futures-core v0.3.31
  Downloaded regex-syntax v0.8.6
  Downloaded tokio v1.47.1
  Downloaded indexmap v2.11.4
  Downloaded futures-io v0.3.31
  Downloaded aho-corasick v1.1.3
  Downloaded lazy_static v1.5.0
  Downloaded regex-automata v0.4.11
  Downloaded rand v0.9.2
  Downloaded memchr v2.7.6
  Downloaded http v1.3.1
  Downloaded futures-task v0.3.31
  Downloaded futures-sink v0.3.31
  Downloaded equivalent v1.0.2
  Downloaded bytes v1.10.1
  Downloaded pin-utils v0.1.0
  Downloaded nu-ansi-term v0.50.1
  Downloaded async-stream-impl v0.3.6
  Downloaded pin-project-lite v0.2.16
  Downloaded cfg-if v1.0.3
  Downloaded futures-executor v0.3.31
  Downloaded futures-channel v0.3.31
   Compiling proc-macro2 v1.0.101
   Compiling unicode-ident v1.0.19
   Compiling quote v1.0.41
   Compiling pin-project-lite v0.2.16
   Compiling futures-core v0.3.31
   Compiling memchr v2.7.6
   Compiling bytes v1.10.1
   Compiling libc v0.2.176
   Compiling futures-sink v0.3.31
   Compiling cfg-if v1.0.3
   Compiling tower-layer v0.3.3 (/app/tower-layer)
   Compiling tower-service v0.3.3 (/app/tower-service)
   Compiling futures-task v0.3.31
   Compiling futures-io v0.3.31
   Compiling pin-utils v0.1.0
   Compiling slab v0.4.11
   Compiling autocfg v1.5.0
   Compiling log v0.4.28
   Compiling once_cell v1.21.3
   Compiling getrandom v0.3.3
   Compiling zerocopy v0.8.27
   Compiling regex-syntax v0.8.6
   Compiling equivalent v1.0.2
   Compiling byteorder v1.5.0
   Compiling hashbrown v0.16.0
   Compiling itoa v1.0.15
   Compiling fnv v1.0.7
   Compiling sync_wrapper v1.0.2
   Compiling lazy_static v1.5.0
   Compiling nu-ansi-term v0.50.1
   Compiling thread_local v1.1.9
   Compiling futures-channel v0.3.31
   Compiling sharded-slab v0.1.7
   Compiling tracing-core v0.1.34
   Compiling num-traits v0.2.19
   Compiling aho-corasick v1.1.3
   Compiling http v1.3.1
   Compiling indexmap v2.11.4
   Compiling tracing v0.1.41
   Compiling tracing-subscriber v0.3.20
   Compiling syn v2.0.106
   Compiling getrandom v0.2.16
   Compiling hdrhistogram v7.5.4
   Compiling rand_core v0.6.4
   Compiling rand_core v0.9.3
   Compiling rand v0.8.5
   Compiling regex-automata v0.4.11
   Compiling ppv-lite86 v0.2.21
   Compiling rand_chacha v0.9.0
   Compiling rand v0.9.2
   Compiling regex v1.11.3
   Compiling tokio-macros v2.5.0
   Compiling futures-macro v0.3.31
   Compiling async-stream-impl v0.3.6
   Compiling env_logger v0.8.4
   Compiling quickcheck v1.0.3
   Compiling async-stream v0.3.6
   Compiling tokio v1.47.1
   Compiling futures-util v0.3.31
   Compiling tokio-stream v0.1.17
   Compiling tokio-util v0.7.16
   Compiling tokio-test v0.4.4
   Compiling tower-test v0.4.1 (/app/tower-test)
   Compiling futures-executor v0.3.31
   Compiling tower v0.5.2 (/app/tower)
   Compiling futures v0.3.31
    Finished `test` profile [unoptimized + debuginfo] target(s) in 10.60s
     Running unittests src/lib.rs (target/debug/deps/tower-14cd703fa1c3f923)

running 23 tests
test load::peak_ewma::tests::default_decay ... ok
test load::peak_ewma::tests::compound_decay ... ok
test balance::p2c::test::single_endpoint ... ok
test balance::p2c::test::empty ... ok
test load::peak_ewma::tests::nanos ... ok
test balance::p2c::test::two_endpoints_with_equal_load ... ok
test make::make_service::shared::tests::as_make_service_into_service ... ok
test load::pending_requests::tests::default ... ok
test make::make_service::shared::tests::as_make_service ... ok
test load::pending_requests::tests::with_completion ... ok
test retry::budget::tps_budget::tests::tps_empty ... ok
test util::boxed::sync::is_sync ... ok
test retry::budget::tps_budget::tests::tps_reserve ... ok
test retry::budget::tps_budget::tests::tps_leaky ... ok
test retry::backoff::tests::backoff_base_first ... ok
test retry::budget::tps_budget::tests::tps_slots ... ok
test retry::backoff::tests::backoff_base ... ok
test util::rng::tests::next_f64 ... ok
test util::future_service::tests::pending_service_debug_impl ... ok
test util::rng::tests::sample_inplace_boundaries ... ok
test util::rng::tests::next_range ... ok
test retry::backoff::tests::backoff_jitter ... ok
test util::rng::tests::sample_floyd2 ... ok

test result: ok. 23 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/balance/main.rs (target/debug/deps/balance-26abbbc82c9bd8a6)

running 1 test
test stress ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 5.33s

     Running tests/buffer/main.rs (target/debug/deps/buffer-2670476242488f4c)

running 11 tests
test doesnt_leak_permits ... ok
test poll_ready_when_worker_is_dropped_early ... ok
test wakes_pending_waiters_on_failure ... ok
test wakes_pending_waiters_on_close ... ok
test propagates_trace_spans ... ok
test waits_for_channel_capacity ... ok
test req_and_res ... ok
test when_inner_fails ... ok
test response_future_when_worker_is_dropped_early ... ok
test clears_canceled_requests ... ok
test when_inner_is_not_ready ... ok

test result: ok. 11 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.20s

     Running tests/builder.rs (target/debug/deps/builder-7c421af587fa5738)

running 1 test
test builder_service ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/hedge/main.rs (target/debug/deps/hedge-8d273ec2d580a38b)

running 5 tests
test request_not_retyable ... ok
test completes_before_hedge ... ok
test hedge_orig_completes_first ... ok
test request_not_clonable ... ok
test hedge_hedge_completes_first ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/limit/main.rs (target/debug/deps/limit-a18475e90fcea672)

running 10 tests
test concurrency::response_error_releases_capacity ... ok
test concurrency::basic_service_limit_functionality_without_poll_ready ... ok
test concurrency::basic_service_limit_functionality_with_poll_ready ... ok
test concurrency::multi_waiters ... ok
test concurrency::request_without_capacity ... ok
test concurrency::reserve_capacity_without_sending_request ... ok
test concurrency::response_future_drop_releases_capacity ... ok
test concurrency::service_drop_frees_capacity ... ok
test rate::remaining_gets_reset ... ok
test rate::reaching_capacity ... ok

test result: ok. 10 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/load_shed/main.rs (target/debug/deps/load_shed-c19eba5b821b49ee)

running 2 tests
test when_ready ... ok
test when_not_ready ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/ready_cache/main.rs (target/debug/deps/ready_cache-ce9c6cfd1b5fe907)

running 9 tests
test poll_ready_inner_failure ... ok
test poll_ready_not_ready ... ok
test evict_pending_then_error ... ok
test evict_ready_then_error ... ok
test error_after_promote ... ok
test duplicate_key_by_index ... ok
test push_then_evict ... ok
test poll_ready_promotes_inner ... ok
test cancelation_observed ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/retry/main.rs (target/debug/deps/retry-1186087952c462d1)

running 6 tests
test retry_cannot_clone_request ... ok
test retry_errors ... ok
test retry_error_inspection ... ok
test success_with_cannot_clone ... ok
test retry_limit ... ok
test retry_mutating_policy ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/spawn_ready/main.rs (target/debug/deps/spawn_ready-2501609899e1819b)

running 4 tests
test abort_on_drop ... ok
test when_inner_fails ... ok
test when_inner_is_not_ready ... ok
test propagates_trace_spans ... ok

test result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/steer/main.rs (target/debug/deps/steer-57812e6904c4c313)

running 2 tests
test pending_all_ready ... ok
test pick_correctly ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/support.rs (target/debug/deps/support-5a93e7142f315c08)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/util/main.rs (target/debug/deps/util-1d39f442a9b6b6ba)

running 7 tests
test call_all::ordered ... ok
test call_all::pending ... ok
test call_all::poll_ready_error ... ok
test oneshot::service_driven_to_readiness ... ok
test call_all::unordered ... ok
test service_fn::simple ... ok
test call_all::stream_does_not_block_service ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_layer-94b21972ea635cc0)

running 1 test
test layer_fn::tests::layer_fn_has_useful_debug_impl ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_service-abadd116caef7619)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (target/debug/deps/tower_test-b48e5c73b0861976)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/mock.rs (target/debug/deps/mock-0c7bb6722610a62e)

running 2 tests
test single_request_ready ... ok
test backpressure - should panic ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests tower

running 49 tests
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 30) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 72) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 51) ... ok
test tower/src/util/boxed_clone_sync.rs - util::boxed_clone_sync::BoxCloneSyncService (line 17) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 502) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder (line 89) ... ok
test tower/src/util/future_service.rs - util::future_service::FutureService<F,S>::new (line 71) ... ok
test tower/src/load/mod.rs - load (line 34) ... ok
test tower/src/buffer/mod.rs - buffer (line 13) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::as_service (line 92) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_clone (line 555) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::option_layer (line 140) ... ok
test tower/src/balance/mod.rs - balance (line 18) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service_clone (line 589) ... ok
test tower/src/retry/policy.rs - retry::policy::Policy (line 7) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 412) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 482) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::check_service (line 627) ... ok
test tower/src/discover/mod.rs - discover (line 14) ... ok
test tower/src/retry/budget/mod.rs - retry::budget (line 29) ... ok
test tower/src/util/boxed/layer.rs - util::boxed::layer::BoxLayer (line 21) ... ok
test tower/src/util/mod.rs - util::ServiceExt::then (line 794) ... ok
test tower/src/util/future_service.rs - util::future_service::future_service (line 15) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed (line 957) ... ok
test tower/src/util/mod.rs - util::option_layer (line 1049) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_request (line 553) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter (line 613) ... ok
test tower/src/util/mod.rs - util::ServiceExt::and_then (line 123) ... ok
test tower/src/make/make_service.rs - make::make_service::MakeService::into_service (line 53) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_err (line 259) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_response (line 192) ... ok
test tower/src/util/boxed/sync.rs - util::boxed::sync::BoxService (line 30) ... ok
test tower/src/util/mod.rs - util::ServiceExt::filter_async (line 686) ... ok
test tower/src/util/mod.rs - util::ServiceExt::boxed_clone (line 1003) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_result (line 349) ... ok
test tower/src/util/mod.rs - util::ServiceExt::map_future (line 880) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed (line 681) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone_sync (line 802) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::boxed_clone (line 739) ... ok
test tower/src/make/make_service/shared.rs - make::make_service::shared::Shared (line 11) ... ok
test tower/src/util/boxed/layer_clone.rs - util::boxed::layer_clone::BoxCloneServiceLayer (line 24) ... ok
test tower/src/util/boxed_clone.rs - util::boxed_clone::BoxCloneService (line 20) ... ok
test tower/src/util/boxed/layer_clone_sync.rs - util::boxed::layer_clone_sync::BoxCloneSyncServiceLayer (line 25) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 313) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::map_request (line 341) ... ok
test tower/src/util/service_fn.rs - util::service_fn::service_fn (line 12) ... ok
test tower/src/util/call_all/ordered.rs - util::call_all::ordered::CallAll (line 20) ... ok
test tower/src/steer/mod.rs - steer (line 10) ... ok
test tower/src/builder/mod.rs - builder::ServiceBuilder<L>::service_fn (line 514) ... ok

test result: ok. 49 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.62s

   Doc-tests tower_layer

running 6 tests
test tower-layer/src/identity.rs - identity::Identity::new (line 29) ... FAILED
test tower-layer/src/stack.rs - stack::Stack<Inner,Outer>::new (line 31) ... ok
test tower-layer/src/lib.rs - Layer (line 47) ... ok
test tower-layer/src/identity.rs - identity::Identity (line 13) ... ok
test tower-layer/src/stack.rs - stack::Stack (line 8) ... ok
test tower-layer/src/layer_fn.rs - layer_fn::layer_fn (line 18) ... ok

failures:

---- tower-layer/src/identity.rs - identity::Identity::new (line 29) stdout ----
error[E0433]: failed to resolve: use of unresolved module or unlinked crate `tokio_test`
 --> tower-layer/src/identity.rs:31:1
  |
5 | tokio_test::block_on(async {
  | ^^^^^^^^^^ use of unresolved module or unlinked crate `tokio_test`
  |
  = help: if you wanted to use a crate named `tokio_test`, use `cargo add tokio_test` to add it to your `Cargo.toml`

error: aborting due to 1 previous error

For more information about this error, try `rustc --explain E0433`.
Couldn't compile the test.

failures:
    tower-layer/src/identity.rs - identity::Identity::new (line 29)

test result: FAILED. 5 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.13s

error: doctest failed, to rerun pass `-p tower-layer --doc`
